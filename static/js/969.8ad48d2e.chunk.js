/*! For license information please see 969.8ad48d2e.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunksafka=self.webpackChunksafka||[]).push([[969],{5637:function(t,e,n){var r,i,o=n(9388),a=n(9971),s=n(826),u=n(9386),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new a.LL("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Yd("@firebase/app"),m=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,a.p$)(t),this.container=new s.H0(e.name),this._addComponent(new s.wA("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=f),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();m.prototype.name&&m.prototype.options||m.prototype.delete||console.log("dc");var v=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"===typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var s=o.name;if("string"!==typeof s||!s)throw l.create("bad-app-name",{appName:String(s)});if((0,a.r3)(e,s))throw l.create("duplicate-app",{appName:s});var u=new t(n,o,r);return e[s]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var a=i.match(/\s|\//),u=e.match(/\s|\//);if(a||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return a&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new s.wA(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.Ub,onLog:function(t,e){if(null!==t&&"function"!==typeof t)throw l.create("invalid-log-argument");(0,u.Am)(t,e)},apps:null,SDK_VERSION:"8.3.2",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!(0,a.r3)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return p.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!==typeof t[s])throw l.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&(0,a.ZB)(u,o.serviceProps),r[s]=u,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,s).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++){var f=h[c];e[f]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(m);return e.INTERNAL=(0,o.pi)((0,o.pi)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,a.ZB)(e,t)},createSubscribe:a.ne,ErrorFactory:a.LL,deepExtend:a.ZB}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if((0,a.jU)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var g=self.firebase.SDK_VERSION;g&&g.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=v.initializeApp;v.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,a.UG)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var w=v;!function(t,e){t.INTERNAL.registerComponent(new s.wA("platform-logger",(function(t){return new y(t)}),"PRIVATE")),t.registerVersion(h,"0.6.18",e),t.registerVersion("fire-js","")}(w),e.Z=w},826:function(t,e,n){n.d(e,{wA:function(){return o},H0:function(){return u}});var r=n(9388),i=n(9971),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),a="[DEFAULT]",s=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=a);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.BH;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=(0,r.pi)({identifier:a,optional:!1},t),n=e.identifier,i=e.optional,o=this.normalizeInstanceIdentifier(n);try{var s=this.getOrInitializeService({instanceIdentifier:o});if(!s){if(i)return null;throw Error("Service "+this.name+" is not available")}return s}catch(u){if(i)return null;throw u}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:a})}catch(f){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=(0,r.CR)(o.value,2),u=s[0],c=s[1],l=this.normalizeInstanceIdentifier(u);try{var h=this.getOrInitializeService({instanceIdentifier:l});c.resolve(h)}catch(f){}}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=a),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,(function(){var t;return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),(0,r.CR)(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=a),this.instances.has(t)},t.prototype.initialize=function(t){void 0===t&&(t={});var e=t.instanceIdentifier,n=void 0===e?a:e,r=t.options,i=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(n);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");return this.getOrInitializeService({instanceIdentifier:o,options:i})},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);return!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===a?void 0:e),options:i}),this.instances.set(n,o)),o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:a:t},t}();var u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},9386:function(t,e,n){function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var i;n.d(e,{in:function(){return o},Yd:function(){return h},Ub:function(){return f},Am:function(){return d}});var o,a=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(o||(o={}));var s={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),a=c[e];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[a].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,a.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"===typeof t?s[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function f(t){a.forEach((function(e){e.setLogLevel(t)}))}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=s[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=i.map((function(t){if(null==t)return null;if("string"===typeof t)return t;if("number"===typeof t||"boolean"===typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!==r&&void 0!==r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=a;r<i.length;r++){n(i[r])}}},9971:function(t,e,n){n.d(e,{BH:function(){return s},LL:function(){return g},r3:function(){return E},ne:function(){return I},p$:function(){return o},ZB:function(){return a},m9:function(){return S},z$:function(){return u},jU:function(){return h},ru:function(){return f},d:function(){return p},w1:function(){return m},uI:function(){return c},UG:function(){return l},b$:function(){return d},Mn:function(){return v}});var r=n(9388),i=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296===(64512&i)&&r+1<t.length&&56320===(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e};function o(t){return a(void 0,t)}function a(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=a(t[n],e[n]));return t}var s=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"===typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function u(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function c(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(u())}function l(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}function h(){return"object"===typeof self&&self.self===self}function f(){var t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id}function d(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function p(){return u().indexOf("Electron/")>=0}function m(){var t=u();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function v(){return u().indexOf("MSAppHost/")>=0}var y=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,g.prototype.create),o}return(0,r.ZT)(e,t),e}(Error),g=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?b(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new y(i,s,r);return u},t}();function b(t,e){return t.replace(w,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var w=/\{\$([^}]+)}/g;function E(t,e){return Object.prototype.hasOwnProperty.call(t,e)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"===typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"===typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();function I(t,e){var n=new T(t,e);return n.subscribe.bind(n)}var T=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!==typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"===typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=_),void 0===r.error&&(r.error=_),void 0===r.complete&&(r.complete=_);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function _(){}function S(t){return t&&t._delegate?t._delegate:t}},7376:function(t,e,n){var r=n(7462),i=n(5987),o=n(2791),a=(n(2007),n(8182)),s=n(5088),u=n(8317),c=o.forwardRef((function(t,e){var n=t.disableUnderline,u=t.classes,c=t.fullWidth,l=void 0!==c&&c,h=t.inputComponent,f=void 0===h?"input":h,d=t.multiline,p=void 0!==d&&d,m=t.type,v=void 0===m?"text":m,y=(0,i.Z)(t,["disableUnderline","classes","fullWidth","inputComponent","multiline","type"]);return o.createElement(s.Z,(0,r.Z)({classes:(0,r.Z)({},u,{root:(0,a.Z)(u.root,!n&&u.underline),underline:null}),fullWidth:l,inputComponent:f,multiline:p,ref:e,type:v},y))}));c.muiName="Input",e.Z=(0,u.Z)((function(t){var e="light"===t.palette.type,n=e?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.09)";return{root:{position:"relative",backgroundColor:r,borderTopLeftRadius:t.shape.borderRadius,borderTopRightRadius:t.shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:e?"rgba(0, 0, 0, 0.13)":"rgba(255, 255, 255, 0.13)","@media (hover: none)":{backgroundColor:r}},"&$focused":{backgroundColor:e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.09)"},"&$disabled":{backgroundColor:e?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)"}},colorSecondary:{"&$underline:after":{borderBottomColor:t.palette.secondary.main}},underline:{"&:after":{borderBottom:"2px solid ".concat(t.palette.primary.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:t.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(n),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:before":{borderBottom:"1px solid ".concat(t.palette.text.primary)},"&$disabled:before":{borderBottomStyle:"dotted"}},focused:{},disabled:{},adornedStart:{paddingLeft:12},adornedEnd:{paddingRight:12},error:{},marginDense:{},multiline:{padding:"27px 12px 10px","&$marginDense":{paddingTop:23,paddingBottom:6}},input:{padding:"27px 12px 10px","&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.type?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.type?null:"#fff",caretColor:"light"===t.palette.type?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},inputMarginDense:{paddingTop:23,paddingBottom:6},inputHiddenLabel:{paddingTop:18,paddingBottom:19,"&$inputMarginDense":{paddingTop:10,paddingBottom:11}},inputMultiline:{padding:0},inputAdornedStart:{paddingLeft:0},inputAdornedEnd:{paddingRight:0}}}),{name:"MuiFilledInput"})(c)},9856:function(t,e,n){n.d(e,{Y:function(){return o}});var r=n(2791),i=r.createContext();function o(){return r.useContext(i)}e.Z=i},4326:function(t,e,n){function r(t){var e=t.props,n=t.states,r=t.muiFormControl;return n.reduce((function(t,n){return t[n]=e[n],r&&"undefined"===typeof e[n]&&(t[n]=r[n]),t}),{})}n.d(e,{Z:function(){return r}})},1024:function(t,e,n){n.d(e,{Z:function(){return o}});var r=n(2791),i=n(9856);function o(){return r.useContext(i.Z)}},5088:function(t,e,n){n.d(e,{Z:function(){return E}});var r=n(5987),i=n(7462),o=n(7483),a=n(2791),s=(n(2007),n(8182)),u=n(4326),c=n(9856),l=n(8317),h=n(1122),f=n(9806),d=n(503);function p(t,e){return parseInt(t[e],10)||0}var m="undefined"!==typeof window?a.useLayoutEffect:a.useEffect,v={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"},y=a.forwardRef((function(t,e){var n=t.onChange,o=t.rows,s=t.rowsMax,u=t.rowsMin,c=t.maxRows,l=t.minRows,h=void 0===l?1:l,y=t.style,g=t.value,b=(0,r.Z)(t,["onChange","rows","rowsMax","rowsMin","maxRows","minRows","style","value"]),w=c||s,E=o||u||h,I=a.useRef(null!=g).current,T=a.useRef(null),_=(0,f.Z)(e,T),S=a.useRef(null),N=a.useRef(0),x=a.useState({}),C=x[0],D=x[1],A=a.useCallback((function(){var e=T.current,n=window.getComputedStyle(e),r=S.current;r.style.width=n.width,r.value=e.value||t.placeholder||"x","\n"===r.value.slice(-1)&&(r.value+=" ");var i=n["box-sizing"],o=p(n,"padding-bottom")+p(n,"padding-top"),a=p(n,"border-bottom-width")+p(n,"border-top-width"),s=r.scrollHeight-o;r.value="x";var u=r.scrollHeight-o,c=s;E&&(c=Math.max(Number(E)*u,c)),w&&(c=Math.min(Number(w)*u,c));var l=(c=Math.max(c,u))+("border-box"===i?o+a:0),h=Math.abs(c-s)<=1;D((function(t){return N.current<20&&(l>0&&Math.abs((t.outerHeightStyle||0)-l)>1||t.overflow!==h)?(N.current+=1,{overflow:h,outerHeightStyle:l}):t}))}),[w,E,t.placeholder]);a.useEffect((function(){var t=(0,d.Z)((function(){N.current=0,A()}));return window.addEventListener("resize",t),function(){t.clear(),window.removeEventListener("resize",t)}}),[A]),m((function(){A()})),a.useEffect((function(){N.current=0}),[g]);return a.createElement(a.Fragment,null,a.createElement("textarea",(0,i.Z)({value:g,onChange:function(t){N.current=0,I||A(),n&&n(t)},ref:_,rows:E,style:(0,i.Z)({height:C.outerHeightStyle,overflow:C.overflow?"hidden":null},y)},b)),a.createElement("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:S,tabIndex:-1,style:(0,i.Z)({},v,y)}))})),g=n(7904),b="undefined"===typeof window?a.useEffect:a.useLayoutEffect,w=a.forwardRef((function(t,e){var n=t["aria-describedby"],l=t.autoComplete,d=t.autoFocus,p=t.classes,m=t.className,v=(t.color,t.defaultValue),w=t.disabled,E=t.endAdornment,I=(t.error,t.fullWidth),T=void 0!==I&&I,_=t.id,S=t.inputComponent,N=void 0===S?"input":S,x=t.inputProps,C=void 0===x?{}:x,D=t.inputRef,A=(t.margin,t.multiline),k=void 0!==A&&A,R=t.name,O=t.onBlur,P=t.onChange,L=t.onClick,M=t.onFocus,F=t.onKeyDown,V=t.onKeyUp,U=t.placeholder,q=t.readOnly,B=t.renderSuffix,j=t.rows,Z=t.rowsMax,G=t.rowsMin,K=t.maxRows,z=t.minRows,H=t.startAdornment,W=t.type,J=void 0===W?"text":W,Q=t.value,Y=(0,r.Z)(t,["aria-describedby","autoComplete","autoFocus","classes","className","color","defaultValue","disabled","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","rowsMax","rowsMin","maxRows","minRows","startAdornment","type","value"]),$=null!=C.value?C.value:Q,X=a.useRef(null!=$).current,tt=a.useRef(),et=a.useCallback((function(t){0}),[]),nt=(0,f.Z)(C.ref,et),rt=(0,f.Z)(D,nt),it=(0,f.Z)(tt,rt),ot=a.useState(!1),at=ot[0],st=ot[1],ut=(0,c.Y)();var ct=(0,u.Z)({props:t,muiFormControl:ut,states:["color","disabled","error","hiddenLabel","margin","required","filled"]});ct.focused=ut?ut.focused:at,a.useEffect((function(){!ut&&w&&at&&(st(!1),O&&O())}),[ut,w,at,O]);var lt=ut&&ut.onFilled,ht=ut&&ut.onEmpty,ft=a.useCallback((function(t){(0,g.vd)(t)?lt&&lt():ht&&ht()}),[lt,ht]);b((function(){X&&ft({value:$})}),[$,ft,X]);a.useEffect((function(){ft(tt.current)}),[]);var dt=N,pt=(0,i.Z)({},C,{ref:it});"string"!==typeof dt?pt=(0,i.Z)({inputRef:it,type:J},pt,{ref:null}):k?!j||K||z||Z||G?(pt=(0,i.Z)({minRows:j||z,rowsMax:Z,maxRows:K},pt),dt=y):dt="textarea":pt=(0,i.Z)({type:J},pt);return a.useEffect((function(){ut&&ut.setAdornedStart(Boolean(H))}),[ut,H]),a.createElement("div",(0,i.Z)({className:(0,s.Z)(p.root,p["color".concat((0,h.Z)(ct.color||"primary"))],m,ct.disabled&&p.disabled,ct.error&&p.error,T&&p.fullWidth,ct.focused&&p.focused,ut&&p.formControl,k&&p.multiline,H&&p.adornedStart,E&&p.adornedEnd,"dense"===ct.margin&&p.marginDense),onClick:function(t){tt.current&&t.currentTarget===t.target&&tt.current.focus(),L&&L(t)},ref:e},Y),H,a.createElement(c.Z.Provider,{value:null},a.createElement(dt,(0,i.Z)({"aria-invalid":ct.error,"aria-describedby":n,autoComplete:l,autoFocus:d,defaultValue:v,disabled:ct.disabled,id:_,onAnimationStart:function(t){ft("mui-auto-fill-cancel"===t.animationName?tt.current:{value:"x"})},name:R,placeholder:U,readOnly:q,required:ct.required,rows:j,value:$,onKeyDown:F,onKeyUp:V},pt,{className:(0,s.Z)(p.input,C.className,ct.disabled&&p.disabled,k&&p.inputMultiline,ct.hiddenLabel&&p.inputHiddenLabel,H&&p.inputAdornedStart,E&&p.inputAdornedEnd,"search"===J&&p.inputTypeSearch,"dense"===ct.margin&&p.inputMarginDense),onBlur:function(t){O&&O(t),C.onBlur&&C.onBlur(t),ut&&ut.onBlur?ut.onBlur(t):st(!1)},onChange:function(t){if(!X){var e=t.target||tt.current;if(null==e)throw new Error((0,o.Z)(1));ft({value:e.value})}for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];C.onChange&&C.onChange.apply(C,[t].concat(r)),P&&P.apply(void 0,[t].concat(r))},onFocus:function(t){ct.disabled?t.stopPropagation():(M&&M(t),C.onFocus&&C.onFocus(t),ut&&ut.onFocus?ut.onFocus(t):st(!0))}}))),E,B?B((0,i.Z)({},ct,{startAdornment:H})):null)})),E=(0,l.Z)((function(t){var e="light"===t.palette.type,n={color:"currentColor",opacity:e?.42:.5,transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})},r={opacity:"0 !important"},o={opacity:e?.42:.5};return{"@global":{"@keyframes mui-auto-fill":{},"@keyframes mui-auto-fill-cancel":{}},root:(0,i.Z)({},t.typography.body1,{color:t.palette.text.primary,lineHeight:"1.1876em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center","&$disabled":{color:t.palette.text.disabled,cursor:"default"}}),formControl:{},focused:{},disabled:{},adornedStart:{},adornedEnd:{},error:{},marginDense:{},multiline:{padding:"".concat(6,"px 0 ").concat(7,"px"),"&$marginDense":{paddingTop:3}},colorSecondary:{},fullWidth:{width:"100%"},input:{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"".concat(6,"px 0 ").concat(7,"px"),border:0,boxSizing:"content-box",background:"none",height:"1.1876em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&:-ms-input-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{"-webkit-appearance":"none"},"label[data-shrink=false] + $formControl &":{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":o,"&:focus::-moz-placeholder":o,"&:focus:-ms-input-placeholder":o,"&:focus::-ms-input-placeholder":o},"&$disabled":{opacity:1},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},inputMarginDense:{paddingTop:3},inputMultiline:{height:"auto",resize:"none",padding:0},inputTypeSearch:{"-moz-appearance":"textfield","-webkit-appearance":"textfield"},inputAdornedStart:{},inputAdornedEnd:{},inputHiddenLabel:{}}}),{name:"MuiInputBase"})(w)},7904:function(t,e,n){function r(t){return null!=t&&!(Array.isArray(t)&&0===t.length)}function i(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t&&(r(t.value)&&""!==t.value||e&&r(t.defaultValue)&&""!==t.defaultValue)}function o(t){return t.startAdornment}n.d(e,{vd:function(){return i},B7:function(){return o}})},7104:function(t,e,n){var r=n(7462),i=n(5987),o=n(2791),a=(n(2007),n(8182)),s=n(5088),u=n(8317),c=o.forwardRef((function(t,e){var n=t.disableUnderline,u=t.classes,c=t.fullWidth,l=void 0!==c&&c,h=t.inputComponent,f=void 0===h?"input":h,d=t.multiline,p=void 0!==d&&d,m=t.type,v=void 0===m?"text":m,y=(0,i.Z)(t,["disableUnderline","classes","fullWidth","inputComponent","multiline","type"]);return o.createElement(s.Z,(0,r.Z)({classes:(0,r.Z)({},u,{root:(0,a.Z)(u.root,!n&&u.underline),underline:null}),fullWidth:l,inputComponent:f,multiline:p,ref:e,type:v},y))}));c.muiName="Input",e.Z=(0,u.Z)((function(t){var e="light"===t.palette.type?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return{root:{position:"relative"},formControl:{"label + &":{marginTop:16}},focused:{},disabled:{},colorSecondary:{"&$underline:after":{borderBottomColor:t.palette.secondary.main}},underline:{"&:after":{borderBottom:"2px solid ".concat(t.palette.primary.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:t.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(e),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:not($disabled):before":{borderBottom:"2px solid ".concat(t.palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(e)}},"&$disabled:before":{borderBottomStyle:"dotted"}},error:{},marginDense:{},multiline:{},fullWidth:{},input:{},inputMarginDense:{},inputMultiline:{},inputTypeSearch:{}}}),{name:"MuiInput"})(c)},4496:function(t,e,n){var r=n(2791).createContext({});e.Z=r},7019:function(t,e,n){n.d(e,{Z:function(){return k}});var r=n(5987),i=n(7462),o=n(2791),a=n(4164),s=(n(2007),n(5522)),u=n(794),c=n(4667),l=n(1565),h=n(9806);var f="undefined"!==typeof window?o.useLayoutEffect:o.useEffect;var d=o.forwardRef((function(t,e){var n=t.children,r=t.container,i=t.disablePortal,s=void 0!==i&&i,u=t.onRendered,c=o.useState(null),d=c[0],p=c[1],m=(0,h.Z)(o.isValidElement(n)?n.ref:null,e);return f((function(){s||p(function(t){return t="function"===typeof t?t():t,a.findDOMNode(t)}(r)||document.body)}),[r,s]),f((function(){if(d&&!s)return(0,l.Z)(e,d),function(){(0,l.Z)(e,null)}}),[e,d,s]),f((function(){u&&(d||s)&&u()}),[u,d,s]),s?o.isValidElement(n)?o.cloneElement(n,{ref:m}):n:d?a.createPortal(n,d):d})),p=n(7545),m=n(2216),v=n(9535);var y=n(3144),g=n(2982),b=n(6394),w=n(7636);function E(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function I(t){return parseInt(window.getComputedStyle(t)["padding-right"],10)||0}function T(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4?arguments[4]:void 0,o=[e,n].concat((0,g.Z)(r)),a=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(t.children,(function(t){1===t.nodeType&&-1===o.indexOf(t)&&-1===a.indexOf(t.tagName)&&E(t,i)}))}function _(t,e){var n=-1;return t.some((function(t,r){return!!e(t)&&(n=r,!0)})),n}function S(t,e){var n,r=[],i=[],o=t.container;if(!e.disableScrollLock){if(function(t){var e=(0,c.Z)(t);return e.body===t?(0,w.Z)(e).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}(o)){var a=(0,b.Z)();r.push({value:o.style.paddingRight,key:"padding-right",el:o}),o.style["padding-right"]="".concat(I(o)+a,"px"),n=(0,c.Z)(o).querySelectorAll(".mui-fixed"),[].forEach.call(n,(function(t){i.push(t.style.paddingRight),t.style.paddingRight="".concat(I(t)+a,"px")}))}var s=o.parentElement,u="HTML"===s.nodeName&&"scroll"===window.getComputedStyle(s)["overflow-y"]?s:o;r.push({value:u.style.overflow,key:"overflow",el:u}),u.style.overflow="hidden"}return function(){n&&[].forEach.call(n,(function(t,e){i[e]?t.style.paddingRight=i[e]:t.style.removeProperty("padding-right")})),r.forEach((function(t){var e=t.value,n=t.el,r=t.key;e?n.style.setProperty(r,e):n.style.removeProperty(r)}))}}var N=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.modals=[],this.containers=[]}return(0,y.Z)(t,[{key:"add",value:function(t,e){var n=this.modals.indexOf(t);if(-1!==n)return n;n=this.modals.length,this.modals.push(t),t.modalRef&&E(t.modalRef,!1);var r=function(t){var e=[];return[].forEach.call(t.children,(function(t){t.getAttribute&&"true"===t.getAttribute("aria-hidden")&&e.push(t)})),e}(e);T(e,t.mountNode,t.modalRef,r,!0);var i=_(this.containers,(function(t){return t.container===e}));return-1!==i?(this.containers[i].modals.push(t),n):(this.containers.push({modals:[t],container:e,restore:null,hiddenSiblingNodes:r}),n)}},{key:"mount",value:function(t,e){var n=_(this.containers,(function(e){return-1!==e.modals.indexOf(t)})),r=this.containers[n];r.restore||(r.restore=S(r,e))}},{key:"remove",value:function(t){var e=this.modals.indexOf(t);if(-1===e)return e;var n=_(this.containers,(function(e){return-1!==e.modals.indexOf(t)})),r=this.containers[n];if(r.modals.splice(r.modals.indexOf(t),1),this.modals.splice(e,1),0===r.modals.length)r.restore&&r.restore(),t.modalRef&&E(t.modalRef,!0),T(r.container,t.mountNode,t.modalRef,r.hiddenSiblingNodes,!1),this.containers.splice(n,1);else{var i=r.modals[r.modals.length-1];i.modalRef&&E(i.modalRef,!1)}return e}},{key:"isTopModal",value:function(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}]),t}();var x=function(t){var e=t.children,n=t.disableAutoFocus,r=void 0!==n&&n,i=t.disableEnforceFocus,s=void 0!==i&&i,u=t.disableRestoreFocus,l=void 0!==u&&u,f=t.getDoc,d=t.isEnabled,p=t.open,m=o.useRef(),v=o.useRef(null),y=o.useRef(null),g=o.useRef(),b=o.useRef(null),w=o.useCallback((function(t){b.current=a.findDOMNode(t)}),[]),E=(0,h.Z)(e.ref,w),I=o.useRef();return o.useEffect((function(){I.current=p}),[p]),!I.current&&p&&"undefined"!==typeof window&&(g.current=f().activeElement),o.useEffect((function(){if(p){var t=(0,c.Z)(b.current);r||!b.current||b.current.contains(t.activeElement)||(b.current.hasAttribute("tabIndex")||b.current.setAttribute("tabIndex",-1),b.current.focus());var e=function(){null!==b.current&&(t.hasFocus()&&!s&&d()&&!m.current?b.current&&!b.current.contains(t.activeElement)&&b.current.focus():m.current=!1)},n=function(e){!s&&d()&&9===e.keyCode&&t.activeElement===b.current&&(m.current=!0,e.shiftKey?y.current.focus():v.current.focus())};t.addEventListener("focus",e,!0),t.addEventListener("keydown",n,!0);var i=setInterval((function(){e()}),50);return function(){clearInterval(i),t.removeEventListener("focus",e,!0),t.removeEventListener("keydown",n,!0),l||(g.current&&g.current.focus&&g.current.focus(),g.current=null)}}}),[r,s,l,d,p]),o.createElement(o.Fragment,null,o.createElement("div",{tabIndex:0,ref:v,"data-test":"sentinelStart"}),o.cloneElement(e,{ref:E}),o.createElement("div",{tabIndex:0,ref:y,"data-test":"sentinelEnd"}))},C={root:{zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},D=o.forwardRef((function(t,e){var n=t.invisible,a=void 0!==n&&n,s=t.open,u=(0,r.Z)(t,["invisible","open"]);return s?o.createElement("div",(0,i.Z)({"aria-hidden":!0,ref:e},u,{style:(0,i.Z)({},C.root,a?C.invisible:{},u.style)})):null}));var A=new N,k=o.forwardRef((function(t,e){var n=(0,s.Z)(),l=(0,u.Z)({name:"MuiModal",props:(0,i.Z)({},t),theme:n}),f=l.BackdropComponent,y=void 0===f?D:f,g=l.BackdropProps,b=l.children,w=l.closeAfterTransition,I=void 0!==w&&w,T=l.container,_=l.disableAutoFocus,S=void 0!==_&&_,N=l.disableBackdropClick,C=void 0!==N&&N,k=l.disableEnforceFocus,R=void 0!==k&&k,O=l.disableEscapeKeyDown,P=void 0!==O&&O,L=l.disablePortal,M=void 0!==L&&L,F=l.disableRestoreFocus,V=void 0!==F&&F,U=l.disableScrollLock,q=void 0!==U&&U,B=l.hideBackdrop,j=void 0!==B&&B,Z=l.keepMounted,G=void 0!==Z&&Z,K=l.manager,z=void 0===K?A:K,H=l.onBackdropClick,W=l.onClose,J=l.onEscapeKeyDown,Q=l.onRendered,Y=l.open,$=(0,r.Z)(l,["BackdropComponent","BackdropProps","children","closeAfterTransition","container","disableAutoFocus","disableBackdropClick","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onEscapeKeyDown","onRendered","open"]),X=o.useState(!0),tt=X[0],et=X[1],nt=o.useRef({}),rt=o.useRef(null),it=o.useRef(null),ot=(0,h.Z)(it,e),at=function(t){return!!t.children&&t.children.props.hasOwnProperty("in")}(l),st=function(){return(0,c.Z)(rt.current)},ut=function(){return nt.current.modalRef=it.current,nt.current.mountNode=rt.current,nt.current},ct=function(){z.mount(ut(),{disableScrollLock:q}),it.current.scrollTop=0},lt=(0,m.Z)((function(){var t=function(t){return t="function"===typeof t?t():t,a.findDOMNode(t)}(T)||st().body;z.add(ut(),t),it.current&&ct()})),ht=o.useCallback((function(){return z.isTopModal(ut())}),[z]),ft=(0,m.Z)((function(t){rt.current=t,t&&(Q&&Q(),Y&&ht()?ct():E(it.current,!0))})),dt=o.useCallback((function(){z.remove(ut())}),[z]);if(o.useEffect((function(){return function(){dt()}}),[dt]),o.useEffect((function(){Y?lt():at&&I||dt()}),[Y,dt,at,I,lt]),!G&&!Y&&(!at||tt))return null;var pt=function(t){return{root:{position:"fixed",zIndex:t.zIndex.modal,right:0,bottom:0,top:0,left:0},hidden:{visibility:"hidden"}}}(n||{zIndex:v.Z}),mt={};return void 0===b.props.tabIndex&&(mt.tabIndex=b.props.tabIndex||"-1"),at&&(mt.onEnter=(0,p.Z)((function(){et(!1)}),b.props.onEnter),mt.onExited=(0,p.Z)((function(){et(!0),I&&dt()}),b.props.onExited)),o.createElement(d,{ref:ft,container:T,disablePortal:M},o.createElement("div",(0,i.Z)({ref:ot,onKeyDown:function(t){"Escape"===t.key&&ht()&&(J&&J(t),P||(t.stopPropagation(),W&&W(t,"escapeKeyDown")))},role:"presentation"},$,{style:(0,i.Z)({},pt.root,!Y&&tt?pt.hidden:{},$.style)}),j?null:o.createElement(y,(0,i.Z)({open:Y,onClick:function(t){t.target===t.currentTarget&&(H&&H(t),!C&&W&&W(t,"backdropClick"))}},g)),o.createElement(x,{disableEnforceFocus:R,disableAutoFocus:S,disableRestoreFocus:V,getDoc:st,isEnabled:ht,open:Y},o.cloneElement(b,mt))))}))},7692:function(t,e,n){n.d(e,{Z:function(){return m}});var r=n(7462),i=n(5987),o=n(2791),a=(n(2007),n(8182)),s=n(5088),u=n(4942),c=n(8317),l=n(3364),h=n(1122),f=o.forwardRef((function(t,e){t.children;var n=t.classes,s=t.className,c=t.label,f=t.labelWidth,d=t.notched,p=t.style,m=(0,i.Z)(t,["children","classes","className","label","labelWidth","notched","style"]),v="rtl"===(0,l.Z)().direction?"right":"left";if(void 0!==c)return o.createElement("fieldset",(0,r.Z)({"aria-hidden":!0,className:(0,a.Z)(n.root,s),ref:e,style:p},m),o.createElement("legend",{className:(0,a.Z)(n.legendLabelled,d&&n.legendNotched)},c?o.createElement("span",null,c):o.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}})));var y=f>0?.75*f+8:.01;return o.createElement("fieldset",(0,r.Z)({"aria-hidden":!0,style:(0,r.Z)((0,u.Z)({},"padding".concat((0,h.Z)(v)),8),p),className:(0,a.Z)(n.root,s),ref:e},m),o.createElement("legend",{className:n.legend,style:{width:d?y:.01}},o.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}})))})),d=(0,c.Z)((function(t){return{root:{position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden"},legend:{textAlign:"left",padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})},legendLabelled:{display:"block",width:"auto",textAlign:"left",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),"& > span":{paddingLeft:5,paddingRight:5,display:"inline-block"}},legendNotched:{maxWidth:1e3,transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}}}),{name:"PrivateNotchedOutline"})(f),p=o.forwardRef((function(t,e){var n=t.classes,u=t.fullWidth,c=void 0!==u&&u,l=t.inputComponent,h=void 0===l?"input":l,f=t.label,p=t.labelWidth,m=void 0===p?0:p,v=t.multiline,y=void 0!==v&&v,g=t.notched,b=t.type,w=void 0===b?"text":b,E=(0,i.Z)(t,["classes","fullWidth","inputComponent","label","labelWidth","multiline","notched","type"]);return o.createElement(s.Z,(0,r.Z)({renderSuffix:function(t){return o.createElement(d,{className:n.notchedOutline,label:f,labelWidth:m,notched:"undefined"!==typeof g?g:Boolean(t.startAdornment||t.filled||t.focused)})},classes:(0,r.Z)({},n,{root:(0,a.Z)(n.root,n.underline),notchedOutline:null}),fullWidth:c,inputComponent:h,multiline:y,ref:e,type:w},E))}));p.muiName="Input";var m=(0,c.Z)((function(t){var e="light"===t.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{root:{position:"relative",borderRadius:t.shape.borderRadius,"&:hover $notchedOutline":{borderColor:t.palette.text.primary},"@media (hover: none)":{"&:hover $notchedOutline":{borderColor:e}},"&$focused $notchedOutline":{borderColor:t.palette.primary.main,borderWidth:2},"&$error $notchedOutline":{borderColor:t.palette.error.main},"&$disabled $notchedOutline":{borderColor:t.palette.action.disabled}},colorSecondary:{"&$focused $notchedOutline":{borderColor:t.palette.secondary.main}},focused:{},disabled:{},adornedStart:{paddingLeft:14},adornedEnd:{paddingRight:14},error:{},marginDense:{},multiline:{padding:"18.5px 14px","&$marginDense":{paddingTop:10.5,paddingBottom:10.5}},notchedOutline:{borderColor:e},input:{padding:"18.5px 14px","&:-webkit-autofill":{WebkitBoxShadow:"light"===t.palette.type?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===t.palette.type?null:"#fff",caretColor:"light"===t.palette.type?null:"#fff",borderRadius:"inherit"}},inputMarginDense:{paddingTop:10.5,paddingBottom:10.5},inputMultiline:{padding:0},inputAdornedStart:{paddingLeft:0},inputAdornedEnd:{paddingRight:0}}}),{name:"MuiOutlinedInput"})(p)},1756:function(t,e,n){n.d(e,{Z:function(){return Nt}});var r=n(7462),i=n(5987),o=n(2791),a=(n(2007),n(5352)),s=n(885),u=n(1002),c=n(7483),l=(n(7441),n(8182)),h=n(4667),f=n(1122),d=n(8317),p=n(4164),m=n(503),v=n(7636),y=n(7545),g=n(7019),b=n(3366),w=n(1721),E=!1,I=n(5545),T="unmounted",_="exited",S="entering",N="entered",x="exiting",C=function(t){function e(e,n){var r;r=t.call(this,e,n)||this;var i,o=n&&!n.isMounting?e.enter:e.appear;return r.appearStatus=null,e.in?o?(i=_,r.appearStatus=S):i=N:i=e.unmountOnExit||e.mountOnEnter?T:_,r.state={status:i},r.nextCallback=null,r}(0,w.Z)(e,t),e.getDerivedStateFromProps=function(t,e){return t.in&&e.status===T?{status:_}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(t){var e=null;if(t!==this.props){var n=this.state.status;this.props.in?n!==S&&n!==N&&(e=S):n!==S&&n!==N||(e=x)}this.updateStatus(!1,e)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var t,e,n,r=this.props.timeout;return t=e=n=r,null!=r&&"number"!==typeof r&&(t=r.exit,e=r.enter,n=void 0!==r.appear?r.appear:e),{exit:t,enter:e,appear:n}},n.updateStatus=function(t,e){void 0===t&&(t=!1),null!==e?(this.cancelNextCallback(),e===S?this.performEnter(t):this.performExit()):this.props.unmountOnExit&&this.state.status===_&&this.setState({status:T})},n.performEnter=function(t){var e=this,n=this.props.enter,r=this.context?this.context.isMounting:t,i=this.props.nodeRef?[r]:[p.findDOMNode(this),r],o=i[0],a=i[1],s=this.getTimeouts(),u=r?s.appear:s.enter;!t&&!n||E?this.safeSetState({status:N},(function(){e.props.onEntered(o)})):(this.props.onEnter(o,a),this.safeSetState({status:S},(function(){e.props.onEntering(o,a),e.onTransitionEnd(u,(function(){e.safeSetState({status:N},(function(){e.props.onEntered(o,a)}))}))})))},n.performExit=function(){var t=this,e=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:p.findDOMNode(this);e&&!E?(this.props.onExit(r),this.safeSetState({status:x},(function(){t.props.onExiting(r),t.onTransitionEnd(n.exit,(function(){t.safeSetState({status:_},(function(){t.props.onExited(r)}))}))}))):this.safeSetState({status:_},(function(){t.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(t,e){e=this.setNextCallback(e),this.setState(t,e)},n.setNextCallback=function(t){var e=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,e.nextCallback=null,t(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(t,e){this.setNextCallback(e);var n=this.props.nodeRef?this.props.nodeRef.current:p.findDOMNode(this),r=null==t&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],a=i[1];this.props.addEndListener(o,a)}null!=t&&setTimeout(this.nextCallback,t)}else setTimeout(this.nextCallback,0)},n.render=function(){var t=this.state.status;if(t===T)return null;var e=this.props,n=e.children,r=(e.in,e.mountOnEnter,e.unmountOnExit,e.appear,e.enter,e.exit,e.timeout,e.addEndListener,e.onEnter,e.onEntering,e.onEntered,e.onExit,e.onExiting,e.onExited,e.nodeRef,(0,b.Z)(e,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return o.createElement(I.Z.Provider,{value:null},"function"===typeof n?n(t,r):o.cloneElement(o.Children.only(n),r))},e}(o.Component);function D(){}C.contextType=I.Z,C.propTypes={},C.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:D,onEntering:D,onEntered:D,onExit:D,onExiting:D,onExited:D},C.UNMOUNTED=T,C.EXITED=_,C.ENTERING=S,C.ENTERED=N,C.EXITING=x;var A=C,k=n(3364);function R(t,e){var n=t.timeout,r=t.style,i=void 0===r?{}:r;return{duration:i.transitionDuration||"number"===typeof n?n:n[e.mode]||0,delay:i.transitionDelay}}var O=n(9806);function P(t){return"scale(".concat(t,", ").concat(Math.pow(t,2),")")}var L={entering:{opacity:1,transform:P(1)},entered:{opacity:1,transform:"none"}},M=o.forwardRef((function(t,e){var n=t.children,a=t.disableStrictModeCompat,u=void 0!==a&&a,c=t.in,l=t.onEnter,h=t.onEntered,f=t.onEntering,d=t.onExit,p=t.onExited,m=t.onExiting,v=t.style,y=t.timeout,g=void 0===y?"auto":y,b=t.TransitionComponent,w=void 0===b?A:b,E=(0,i.Z)(t,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),I=o.useRef(),T=o.useRef(),_=(0,k.Z)(),S=_.unstable_strictMode&&!u,N=o.useRef(null),x=(0,O.Z)(n.ref,e),C=(0,O.Z)(S?N:void 0,x),D=function(t){return function(e,n){if(t){var r=S?[N.current,e]:[e,n],i=(0,s.Z)(r,2),o=i[0],a=i[1];void 0===a?t(o):t(o,a)}}},M=D(f),F=D((function(t,e){!function(t){t.scrollTop}(t);var n,r=R({style:v,timeout:g},{mode:"enter"}),i=r.duration,o=r.delay;"auto"===g?(n=_.transitions.getAutoHeightDuration(t.clientHeight),T.current=n):n=i,t.style.transition=[_.transitions.create("opacity",{duration:n,delay:o}),_.transitions.create("transform",{duration:.666*n,delay:o})].join(","),l&&l(t,e)})),V=D(h),U=D(m),q=D((function(t){var e,n=R({style:v,timeout:g},{mode:"exit"}),r=n.duration,i=n.delay;"auto"===g?(e=_.transitions.getAutoHeightDuration(t.clientHeight),T.current=e):e=r,t.style.transition=[_.transitions.create("opacity",{duration:e,delay:i}),_.transitions.create("transform",{duration:.666*e,delay:i||.333*e})].join(","),t.style.opacity="0",t.style.transform=P(.75),d&&d(t)})),B=D(p);return o.useEffect((function(){return function(){clearTimeout(I.current)}}),[]),o.createElement(w,(0,r.Z)({appear:!0,in:c,nodeRef:S?N:void 0,onEnter:F,onEntered:V,onEntering:M,onExit:q,onExited:B,onExiting:U,addEndListener:function(t,e){var n=S?t:e;"auto"===g&&(I.current=setTimeout(n,T.current||0))},timeout:"auto"===g?null:g},E),(function(t,e){return o.cloneElement(n,(0,r.Z)({style:(0,r.Z)({opacity:0,transform:P(.75),visibility:"exited"!==t||c?void 0:"hidden"},L[t],v,n.props.style),ref:C},e))}))}));M.muiSupportAuto=!0;var F=M,V=n(9526);function U(t,e){var n=0;return"number"===typeof e?n=e:"center"===e?n=t.height/2:"bottom"===e&&(n=t.height),n}function q(t,e){var n=0;return"number"===typeof e?n=e:"center"===e?n=t.width/2:"right"===e&&(n=t.width),n}function B(t){return[t.horizontal,t.vertical].map((function(t){return"number"===typeof t?"".concat(t,"px"):t})).join(" ")}function j(t){return"function"===typeof t?t():t}var Z=o.forwardRef((function(t,e){var n=t.action,a=t.anchorEl,s=t.anchorOrigin,u=void 0===s?{vertical:"top",horizontal:"left"}:s,c=t.anchorPosition,f=t.anchorReference,d=void 0===f?"anchorEl":f,b=t.children,w=t.classes,E=t.className,I=t.container,T=t.elevation,_=void 0===T?8:T,S=t.getContentAnchorEl,N=t.marginThreshold,x=void 0===N?16:N,C=t.onEnter,D=t.onEntered,A=t.onEntering,k=t.onExit,R=t.onExited,O=t.onExiting,P=t.open,L=t.PaperProps,M=void 0===L?{}:L,Z=t.transformOrigin,G=void 0===Z?{vertical:"top",horizontal:"left"}:Z,K=t.TransitionComponent,z=void 0===K?F:K,H=t.transitionDuration,W=void 0===H?"auto":H,J=t.TransitionProps,Q=void 0===J?{}:J,Y=(0,i.Z)(t,["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","classes","className","container","elevation","getContentAnchorEl","marginThreshold","onEnter","onEntered","onEntering","onExit","onExited","onExiting","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"]),$=o.useRef(),X=o.useCallback((function(t){if("anchorPosition"===d)return c;var e=j(a),n=(e&&1===e.nodeType?e:(0,h.Z)($.current).body).getBoundingClientRect(),r=0===t?u.vertical:"center";return{top:n.top+U(n,r),left:n.left+q(n,u.horizontal)}}),[a,u.horizontal,u.vertical,c,d]),tt=o.useCallback((function(t){var e=0;if(S&&"anchorEl"===d){var n=S(t);if(n&&t.contains(n)){var r=function(t,e){for(var n=e,r=0;n&&n!==t;)r+=(n=n.parentElement).scrollTop;return r}(t,n);e=n.offsetTop+n.clientHeight/2-r||0}0}return e}),[u.vertical,d,S]),et=o.useCallback((function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{vertical:U(t,G.vertical)+e,horizontal:q(t,G.horizontal)}}),[G.horizontal,G.vertical]),nt=o.useCallback((function(t){var e=tt(t),n={width:t.offsetWidth,height:t.offsetHeight},r=et(n,e);if("none"===d)return{top:null,left:null,transformOrigin:B(r)};var i=X(e),o=i.top-r.vertical,s=i.left-r.horizontal,u=o+n.height,c=s+n.width,l=(0,v.Z)(j(a)),h=l.innerHeight-x,f=l.innerWidth-x;if(o<x){var p=o-x;o-=p,r.vertical+=p}else if(u>h){var m=u-h;o-=m,r.vertical+=m}if(s<x){var y=s-x;s-=y,r.horizontal+=y}else if(c>f){var g=c-f;s-=g,r.horizontal+=g}return{top:"".concat(Math.round(o),"px"),left:"".concat(Math.round(s),"px"),transformOrigin:B(r)}}),[a,d,X,tt,et,x]),rt=o.useCallback((function(){var t=$.current;if(t){var e=nt(t);null!==e.top&&(t.style.top=e.top),null!==e.left&&(t.style.left=e.left),t.style.transformOrigin=e.transformOrigin}}),[nt]),it=o.useCallback((function(t){$.current=p.findDOMNode(t)}),[]);o.useEffect((function(){P&&rt()})),o.useImperativeHandle(n,(function(){return P?{updatePosition:function(){rt()}}:null}),[P,rt]),o.useEffect((function(){if(P){var t=(0,m.Z)((function(){rt()}));return window.addEventListener("resize",t),function(){t.clear(),window.removeEventListener("resize",t)}}}),[P,rt]);var ot=W;"auto"!==W||z.muiSupportAuto||(ot=void 0);var at=I||(a?(0,h.Z)(j(a)).body:void 0);return o.createElement(g.Z,(0,r.Z)({container:at,open:P,ref:e,BackdropProps:{invisible:!0},className:(0,l.Z)(w.root,E)},Y),o.createElement(z,(0,r.Z)({appear:!0,in:P,onEnter:C,onEntered:D,onExit:k,onExited:R,onExiting:O,timeout:ot},Q,{onEntering:(0,y.Z)((function(t,e){A&&A(t,e),rt()}),Q.onEntering)}),o.createElement(V.Z,(0,r.Z)({elevation:_,ref:it},M,{className:(0,l.Z)(w.paper,M.className)}),b)))})),G=(0,d.Z)({root:{},paper:{position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}},{name:"MuiPopover"})(Z),K=n(4496),z=o.forwardRef((function(t,e){var n=t.children,a=t.classes,s=t.className,u=t.component,c=void 0===u?"ul":u,h=t.dense,f=void 0!==h&&h,d=t.disablePadding,p=void 0!==d&&d,m=t.subheader,v=(0,i.Z)(t,["children","classes","className","component","dense","disablePadding","subheader"]),y=o.useMemo((function(){return{dense:f}}),[f]);return o.createElement(K.Z.Provider,{value:y},o.createElement(c,(0,r.Z)({className:(0,l.Z)(a.root,s,f&&a.dense,!p&&a.padding,m&&a.subheader),ref:e},v),m,n))})),H=(0,d.Z)({root:{listStyle:"none",margin:0,padding:0,position:"relative"},padding:{paddingTop:8,paddingBottom:8},dense:{},subheader:{paddingTop:0}},{name:"MuiList"})(z),W=n(6394);function J(t,e,n){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:t.firstChild}function Q(t,e,n){return t===e?n?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:t.lastChild}function Y(t,e){if(void 0===e)return!0;var n=t.innerText;return void 0===n&&(n=t.textContent),0!==(n=n.trim().toLowerCase()).length&&(e.repeating?n[0]===e.keys[0]:0===n.indexOf(e.keys.join("")))}function $(t,e,n,r,i,o){for(var a=!1,s=i(t,e,!!e&&n);s;){if(s===t.firstChild){if(a)return;a=!0}var u=!r&&(s.disabled||"true"===s.getAttribute("aria-disabled"));if(s.hasAttribute("tabindex")&&Y(s,o)&&!u)return void s.focus();s=i(t,s,n)}}var X="undefined"===typeof window?o.useEffect:o.useLayoutEffect,tt=o.forwardRef((function(t,e){var n=t.actions,a=t.autoFocus,s=void 0!==a&&a,u=t.autoFocusItem,c=void 0!==u&&u,l=t.children,f=t.className,d=t.disabledItemsFocusable,m=void 0!==d&&d,v=t.disableListWrap,y=void 0!==v&&v,g=t.onKeyDown,b=t.variant,w=void 0===b?"selectedMenu":b,E=(0,i.Z)(t,["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"]),I=o.useRef(null),T=o.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});X((function(){s&&I.current.focus()}),[s]),o.useImperativeHandle(n,(function(){return{adjustStyleForScrollbar:function(t,e){var n=!I.current.style.width;if(t.clientHeight<I.current.clientHeight&&n){var r="".concat((0,W.Z)(!0),"px");I.current.style["rtl"===e.direction?"paddingLeft":"paddingRight"]=r,I.current.style.width="calc(100% + ".concat(r,")")}return I.current}}}),[]);var _=o.useCallback((function(t){I.current=p.findDOMNode(t)}),[]),S=(0,O.Z)(_,e),N=-1;o.Children.forEach(l,(function(t,e){o.isValidElement(t)&&(t.props.disabled||("selectedMenu"===w&&t.props.selected||-1===N)&&(N=e))}));var x=o.Children.map(l,(function(t,e){if(e===N){var n={};return c&&(n.autoFocus=!0),void 0===t.props.tabIndex&&"selectedMenu"===w&&(n.tabIndex=0),o.cloneElement(t,n)}return t}));return o.createElement(H,(0,r.Z)({role:"menu",ref:S,className:f,onKeyDown:function(t){var e=I.current,n=t.key,r=(0,h.Z)(e).activeElement;if("ArrowDown"===n)t.preventDefault(),$(e,r,y,m,J);else if("ArrowUp"===n)t.preventDefault(),$(e,r,y,m,Q);else if("Home"===n)t.preventDefault(),$(e,null,y,m,J);else if("End"===n)t.preventDefault(),$(e,null,y,m,Q);else if(1===n.length){var i=T.current,o=n.toLowerCase(),a=performance.now();i.keys.length>0&&(a-i.lastTime>500?(i.keys=[],i.repeating=!0,i.previousKeyMatched=!0):i.repeating&&o!==i.keys[0]&&(i.repeating=!1)),i.lastTime=a,i.keys.push(o);var s=r&&!i.repeating&&Y(r,i);i.previousKeyMatched&&(s||$(e,r,!1,m,J,i))?t.preventDefault():i.previousKeyMatched=!1}g&&g(t)},tabIndex:s?0:-1},E),x)})),et=n(1565),nt={vertical:"top",horizontal:"right"},rt={vertical:"top",horizontal:"left"},it=o.forwardRef((function(t,e){var n=t.autoFocus,a=void 0===n||n,s=t.children,u=t.classes,c=t.disableAutoFocusItem,h=void 0!==c&&c,f=t.MenuListProps,d=void 0===f?{}:f,m=t.onClose,v=t.onEntering,y=t.open,g=t.PaperProps,b=void 0===g?{}:g,w=t.PopoverClasses,E=t.transitionDuration,I=void 0===E?"auto":E,T=t.TransitionProps,_=(T=void 0===T?{}:T).onEntering,S=(0,i.Z)(T,["onEntering"]),N=t.variant,x=void 0===N?"selectedMenu":N,C=(0,i.Z)(t,["autoFocus","children","classes","disableAutoFocusItem","MenuListProps","onClose","onEntering","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"]),D=(0,k.Z)(),A=a&&!h&&y,R=o.useRef(null),O=o.useRef(null),P=-1;o.Children.map(s,(function(t,e){o.isValidElement(t)&&(t.props.disabled||("menu"!==x&&t.props.selected||-1===P)&&(P=e))}));var L=o.Children.map(s,(function(t,e){return e===P?o.cloneElement(t,{ref:function(e){O.current=p.findDOMNode(e),(0,et.Z)(t.ref,e)}}):t}));return o.createElement(G,(0,r.Z)({getContentAnchorEl:function(){return O.current},classes:w,onClose:m,TransitionProps:(0,r.Z)({onEntering:function(t,e){R.current&&R.current.adjustStyleForScrollbar(t,D),v&&v(t,e),_&&_(t,e)}},S),anchorOrigin:"rtl"===D.direction?nt:rt,transformOrigin:"rtl"===D.direction?nt:rt,PaperProps:(0,r.Z)({},b,{classes:(0,r.Z)({},b.classes,{root:u.paper})}),open:y,ref:e,transitionDuration:I},C),o.createElement(tt,(0,r.Z)({onKeyDown:function(t){"Tab"===t.key&&(t.preventDefault(),m&&m(t,"tabKeyDown"))},actions:R,autoFocus:a&&(-1===P||h),autoFocusItem:A,variant:x},d,{className:(0,l.Z)(u.list,d.className)}),L))})),ot=(0,d.Z)({paper:{maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"},list:{outline:0}},{name:"MuiMenu"})(it),at=n(7904);function st(t,e){return"object"===(0,u.Z)(e)&&null!==e?t===e:String(t)===String(e)}var ut=o.forwardRef((function(t,e){var n=t["aria-label"],a=t.autoFocus,u=t.autoWidth,d=t.children,p=t.classes,m=t.className,v=t.defaultValue,y=t.disabled,g=t.displayEmpty,b=t.IconComponent,w=t.inputRef,E=t.labelId,I=t.MenuProps,T=void 0===I?{}:I,_=t.multiple,S=t.name,N=t.onBlur,x=t.onChange,C=t.onClose,D=t.onFocus,A=t.onOpen,k=t.open,R=t.readOnly,P=t.renderValue,L=t.SelectDisplayProps,M=void 0===L?{}:L,F=t.tabIndex,V=(t.type,t.value),U=t.variant,q=void 0===U?"standard":U,B=(0,i.Z)(t,["aria-label","autoFocus","autoWidth","children","classes","className","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"]),j=function(t){var e=t.controlled,n=t.default,r=(t.name,t.state,o.useRef(void 0!==e).current),i=o.useState(n),a=i[0],s=i[1];return[r?e:a,o.useCallback((function(t){r||s(t)}),[])]}({controlled:V,default:v,name:"Select"}),Z=(0,s.Z)(j,2),G=Z[0],K=Z[1],z=o.useRef(null),H=o.useState(null),W=H[0],J=H[1],Q=o.useRef(null!=k).current,Y=o.useState(),$=Y[0],X=Y[1],tt=o.useState(!1),et=tt[0],nt=tt[1],rt=(0,O.Z)(e,w);o.useImperativeHandle(rt,(function(){return{focus:function(){W.focus()},node:z.current,value:G}}),[W,G]),o.useEffect((function(){a&&W&&W.focus()}),[a,W]),o.useEffect((function(){if(W){var t=(0,h.Z)(W).getElementById(E);if(t){var e=function(){getSelection().isCollapsed&&W.focus()};return t.addEventListener("click",e),function(){t.removeEventListener("click",e)}}}}),[E,W]);var it,ut,ct=function(t,e){t?A&&A(e):C&&C(e),Q||(X(u?null:W.clientWidth),nt(t))},lt=o.Children.toArray(d),ht=function(t){return function(e){var n;if(_||ct(!1,e),_){n=Array.isArray(G)?G.slice():[];var r=G.indexOf(t.props.value);-1===r?n.push(t.props.value):n.splice(r,1)}else n=t.props.value;t.props.onClick&&t.props.onClick(e),G!==n&&(K(n),x&&(e.persist(),Object.defineProperty(e,"target",{writable:!0,value:{value:n,name:S}}),x(e,t)))}},ft=null!==W&&(Q?k:et);delete B["aria-invalid"];var dt=[],pt=!1;((0,at.vd)({value:G})||g)&&(P?it=P(G):pt=!0);var mt=lt.map((function(t){if(!o.isValidElement(t))return null;var e;if(_){if(!Array.isArray(G))throw new Error((0,c.Z)(2));(e=G.some((function(e){return st(e,t.props.value)})))&&pt&&dt.push(t.props.children)}else(e=st(G,t.props.value))&&pt&&(ut=t.props.children);return e&&!0,o.cloneElement(t,{"aria-selected":e?"true":void 0,onClick:ht(t),onKeyUp:function(e){" "===e.key&&e.preventDefault(),t.props.onKeyUp&&t.props.onKeyUp(e)},role:"option",selected:e,value:void 0,"data-value":t.props.value})}));pt&&(it=_?dt.join(", "):ut);var vt,yt=$;!u&&Q&&W&&(yt=W.clientWidth),vt="undefined"!==typeof F?F:y?null:0;var gt=M.id||(S?"mui-component-select-".concat(S):void 0);return o.createElement(o.Fragment,null,o.createElement("div",(0,r.Z)({className:(0,l.Z)(p.root,p.select,p.selectMenu,p[q],m,y&&p.disabled),ref:J,tabIndex:vt,role:"button","aria-disabled":y?"true":void 0,"aria-expanded":ft?"true":void 0,"aria-haspopup":"listbox","aria-label":n,"aria-labelledby":[E,gt].filter(Boolean).join(" ")||void 0,onKeyDown:function(t){if(!R){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(t.key)&&(t.preventDefault(),ct(!0,t))}},onMouseDown:y||R?null:function(t){0===t.button&&(t.preventDefault(),W.focus(),ct(!0,t))},onBlur:function(t){!ft&&N&&(t.persist(),Object.defineProperty(t,"target",{writable:!0,value:{value:G,name:S}}),N(t))},onFocus:D},M,{id:gt}),function(t){return null==t||"string"===typeof t&&!t.trim()}(it)?o.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}}):it),o.createElement("input",(0,r.Z)({value:Array.isArray(G)?G.join(","):G,name:S,ref:z,"aria-hidden":!0,onChange:function(t){var e=lt.map((function(t){return t.props.value})).indexOf(t.target.value);if(-1!==e){var n=lt[e];K(n.props.value),x&&x(t,n)}},tabIndex:-1,className:p.nativeInput,autoFocus:a},B)),o.createElement(b,{className:(0,l.Z)(p.icon,p["icon".concat((0,f.Z)(q))],ft&&p.iconOpen,y&&p.disabled)}),o.createElement(ot,(0,r.Z)({id:"menu-".concat(S||""),anchorEl:W,open:ft,onClose:function(t){ct(!1,t)}},T,{MenuListProps:(0,r.Z)({"aria-labelledby":E,role:"listbox",disableListWrap:!0},T.MenuListProps),PaperProps:(0,r.Z)({},T.PaperProps,{style:(0,r.Z)({minWidth:yt},null!=T.PaperProps?T.PaperProps.style:null)})}),mt))})),ct=ut,lt=n(4326),ht=n(1024),ft=o.forwardRef((function(t,e){var n=t.children,a=t.classes,s=t.className,u=t.color,c=void 0===u?"inherit":u,h=t.component,d=void 0===h?"svg":h,p=t.fontSize,m=void 0===p?"medium":p,v=t.htmlColor,y=t.titleAccess,g=t.viewBox,b=void 0===g?"0 0 24 24":g,w=(0,i.Z)(t,["children","classes","className","color","component","fontSize","htmlColor","titleAccess","viewBox"]);return o.createElement(d,(0,r.Z)({className:(0,l.Z)(a.root,s,"inherit"!==c&&a["color".concat((0,f.Z)(c))],"default"!==m&&"medium"!==m&&a["fontSize".concat((0,f.Z)(m))]),focusable:"false",viewBox:b,color:v,"aria-hidden":!y||void 0,role:y?"img":void 0,ref:e},w),n,y?o.createElement("title",null,y):null)}));ft.muiName="SvgIcon";var dt=(0,d.Z)((function(t){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:t.typography.pxToRem(24),transition:t.transitions.create("fill",{duration:t.transitions.duration.shorter})},colorPrimary:{color:t.palette.primary.main},colorSecondary:{color:t.palette.secondary.main},colorAction:{color:t.palette.action.active},colorError:{color:t.palette.error.main},colorDisabled:{color:t.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:t.typography.pxToRem(20)},fontSizeLarge:{fontSize:t.typography.pxToRem(35)}}}),{name:"MuiSvgIcon"})(ft);var pt=function(t,e){var n=function(e,n){return o.createElement(dt,(0,r.Z)({ref:n},e),t)};return n.muiName=dt.muiName,o.memo(o.forwardRef(n))}(o.createElement("path",{d:"M7 10l5 5 5-5z"})),mt=n(7104),vt=o.forwardRef((function(t,e){var n=t.classes,a=t.className,s=t.disabled,u=t.IconComponent,c=t.inputRef,h=t.variant,d=void 0===h?"standard":h,p=(0,i.Z)(t,["classes","className","disabled","IconComponent","inputRef","variant"]);return o.createElement(o.Fragment,null,o.createElement("select",(0,r.Z)({className:(0,l.Z)(n.root,n.select,n[d],a,s&&n.disabled),disabled:s,ref:c||e},p)),t.multiple?null:o.createElement(u,{className:(0,l.Z)(n.icon,n["icon".concat((0,f.Z)(d))],s&&n.disabled)}))})),yt=function(t){return{root:{},select:{"-moz-appearance":"none","-webkit-appearance":"none",userSelect:"none",borderRadius:0,minWidth:16,cursor:"pointer","&:focus":{backgroundColor:"light"===t.palette.type?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",borderRadius:0},"&::-ms-expand":{display:"none"},"&$disabled":{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:t.palette.background.paper},"&&":{paddingRight:24}},filled:{"&&":{paddingRight:32}},outlined:{borderRadius:t.shape.borderRadius,"&&":{paddingRight:32}},selectMenu:{height:"auto",minHeight:"1.1876em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},disabled:{},icon:{position:"absolute",right:0,top:"calc(50% - 12px)",pointerEvents:"none",color:t.palette.action.active,"&$disabled":{color:t.palette.action.disabled}},iconOpen:{transform:"rotate(180deg)"},iconFilled:{right:7},iconOutlined:{right:7},nativeInput:{bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%"}}},gt=o.createElement(mt.Z,null),bt=o.forwardRef((function(t,e){var n=t.children,a=t.classes,s=t.IconComponent,u=void 0===s?pt:s,c=t.input,l=void 0===c?gt:c,h=t.inputProps,f=(t.variant,(0,i.Z)(t,["children","classes","IconComponent","input","inputProps","variant"])),d=(0,ht.Z)(),p=(0,lt.Z)({props:t,muiFormControl:d,states:["variant"]});return o.cloneElement(l,(0,r.Z)({inputComponent:vt,inputProps:(0,r.Z)({children:n,classes:a,IconComponent:u,variant:p.variant,type:void 0},h,l?l.props.inputProps:{}),ref:e},f))}));bt.muiName="Select";(0,d.Z)(yt,{name:"MuiNativeSelect"})(bt);var wt=n(7376),Et=n(7692),It=yt,Tt=o.createElement(mt.Z,null),_t=o.createElement(wt.Z,null),St=o.forwardRef((function t(e,n){var s=e.autoWidth,u=void 0!==s&&s,c=e.children,l=e.classes,h=e.displayEmpty,f=void 0!==h&&h,d=e.IconComponent,p=void 0===d?pt:d,m=e.id,v=e.input,y=e.inputProps,g=e.label,b=e.labelId,w=e.labelWidth,E=void 0===w?0:w,I=e.MenuProps,T=e.multiple,_=void 0!==T&&T,S=e.native,N=void 0!==S&&S,x=e.onClose,C=e.onOpen,D=e.open,A=e.renderValue,k=e.SelectDisplayProps,R=e.variant,O=void 0===R?"standard":R,P=(0,i.Z)(e,["autoWidth","children","classes","displayEmpty","IconComponent","id","input","inputProps","label","labelId","labelWidth","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"]),L=N?vt:ct,M=(0,ht.Z)(),F=(0,lt.Z)({props:e,muiFormControl:M,states:["variant"]}).variant||O,V=v||{standard:Tt,outlined:o.createElement(Et.Z,{label:g,labelWidth:E}),filled:_t}[F];return o.cloneElement(V,(0,r.Z)({inputComponent:L,inputProps:(0,r.Z)({children:c,IconComponent:p,variant:F,type:void 0,multiple:_},N?{id:m}:{autoWidth:u,displayEmpty:f,labelId:b,MenuProps:I,onClose:x,onOpen:C,open:D,renderValue:A,SelectDisplayProps:(0,r.Z)({id:m},k)},y,{classes:y?(0,a.Z)({baseClasses:l,newClasses:y.classes,Component:t}):l},v?v.props.inputProps:{}),ref:n},P))}));St.muiName="Select";var Nt=(0,d.Z)(It,{name:"MuiSelect"})(St)},9038:function(t,e,n){n.d(e,{Z:function(){return C}});var r=n(7462),i=n(5987),o=n(2791),a=(n(2007),n(8182)),s=n(7104),u=n(7376),c=n(7692),l=n(4326),h=n(1024),f=n(8317),d=n(1122),p=o.forwardRef((function(t,e){var n=t.children,s=t.classes,u=t.className,c=(t.color,t.component),f=void 0===c?"label":c,p=(t.disabled,t.error,t.filled,t.focused,t.required,(0,i.Z)(t,["children","classes","className","color","component","disabled","error","filled","focused","required"])),m=(0,h.Z)(),v=(0,l.Z)({props:t,muiFormControl:m,states:["color","required","focused","disabled","error","filled"]});return o.createElement(f,(0,r.Z)({className:(0,a.Z)(s.root,s["color".concat((0,d.Z)(v.color||"primary"))],u,v.disabled&&s.disabled,v.error&&s.error,v.filled&&s.filled,v.focused&&s.focused,v.required&&s.required),ref:e},p),n,v.required&&o.createElement("span",{"aria-hidden":!0,className:(0,a.Z)(s.asterisk,v.error&&s.error)},"\u2009","*"))})),m=(0,f.Z)((function(t){return{root:(0,r.Z)({color:t.palette.text.secondary},t.typography.body1,{lineHeight:1,padding:0,"&$focused":{color:t.palette.primary.main},"&$disabled":{color:t.palette.text.disabled},"&$error":{color:t.palette.error.main}}),colorSecondary:{"&$focused":{color:t.palette.secondary.main}},focused:{},disabled:{},error:{},filled:{},required:{},asterisk:{"&$error":{color:t.palette.error.main}}}}),{name:"MuiFormLabel"})(p),v=o.forwardRef((function(t,e){var n=t.classes,s=t.className,u=t.disableAnimation,c=void 0!==u&&u,f=(t.margin,t.shrink),d=(t.variant,(0,i.Z)(t,["classes","className","disableAnimation","margin","shrink","variant"])),p=(0,h.Z)(),v=f;"undefined"===typeof v&&p&&(v=p.filled||p.focused||p.adornedStart);var y=(0,l.Z)({props:t,muiFormControl:p,states:["margin","variant"]});return o.createElement(m,(0,r.Z)({"data-shrink":v,className:(0,a.Z)(n.root,s,p&&n.formControl,!c&&n.animated,v&&n.shrink,"dense"===y.margin&&n.marginDense,{filled:n.filled,outlined:n.outlined}[y.variant]),classes:{focused:n.focused,disabled:n.disabled,error:n.error,required:n.required,asterisk:n.asterisk},ref:e},d))})),y=(0,f.Z)((function(t){return{root:{display:"block",transformOrigin:"top left"},focused:{},disabled:{},error:{},required:{},asterisk:{},formControl:{position:"absolute",left:0,top:0,transform:"translate(0, 24px) scale(1)"},marginDense:{transform:"translate(0, 21px) scale(1)"},shrink:{transform:"translate(0, 1.5px) scale(0.75)",transformOrigin:"top left"},animated:{transition:t.transitions.create(["color","transform"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},filled:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 20px) scale(1)","&$marginDense":{transform:"translate(12px, 17px) scale(1)"},"&$shrink":{transform:"translate(12px, 10px) scale(0.75)","&$marginDense":{transform:"translate(12px, 7px) scale(0.75)"}}},outlined:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 20px) scale(1)","&$marginDense":{transform:"translate(14px, 12px) scale(1)"},"&$shrink":{transform:"translate(14px, -6px) scale(0.75)"}}}}),{name:"MuiInputLabel"})(v),g=n(7904),b=n(3375),w=n(9856),E=o.forwardRef((function(t,e){var n=t.children,s=t.classes,u=t.className,c=t.color,l=void 0===c?"primary":c,h=t.component,f=void 0===h?"div":h,p=t.disabled,m=void 0!==p&&p,v=t.error,y=void 0!==v&&v,E=t.fullWidth,I=void 0!==E&&E,T=t.focused,_=t.hiddenLabel,S=void 0!==_&&_,N=t.margin,x=void 0===N?"none":N,C=t.required,D=void 0!==C&&C,A=t.size,k=t.variant,R=void 0===k?"standard":k,O=(0,i.Z)(t,["children","classes","className","color","component","disabled","error","fullWidth","focused","hiddenLabel","margin","required","size","variant"]),P=o.useState((function(){var t=!1;return n&&o.Children.forEach(n,(function(e){if((0,b.Z)(e,["Input","Select"])){var n=(0,b.Z)(e,["Select"])?e.props.input:e;n&&(0,g.B7)(n.props)&&(t=!0)}})),t})),L=P[0],M=P[1],F=o.useState((function(){var t=!1;return n&&o.Children.forEach(n,(function(e){(0,b.Z)(e,["Input","Select"])&&(0,g.vd)(e.props,!0)&&(t=!0)})),t})),V=F[0],U=F[1],q=o.useState(!1),B=q[0],j=q[1],Z=void 0!==T?T:B;m&&Z&&j(!1);var G=o.useCallback((function(){U(!0)}),[]),K={adornedStart:L,setAdornedStart:M,color:l,disabled:m,error:y,filled:V,focused:Z,fullWidth:I,hiddenLabel:S,margin:("small"===A?"dense":void 0)||x,onBlur:function(){j(!1)},onEmpty:o.useCallback((function(){U(!1)}),[]),onFilled:G,onFocus:function(){j(!0)},registerEffect:undefined,required:D,variant:R};return o.createElement(w.Z.Provider,{value:K},o.createElement(f,(0,r.Z)({className:(0,a.Z)(s.root,u,"none"!==x&&s["margin".concat((0,d.Z)(x))],I&&s.fullWidth),ref:e},O),n))})),I=(0,f.Z)({root:{display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},marginNormal:{marginTop:16,marginBottom:8},marginDense:{marginTop:8,marginBottom:4},fullWidth:{width:"100%"}},{name:"MuiFormControl"})(E),T=o.forwardRef((function(t,e){var n=t.children,s=t.classes,u=t.className,c=t.component,f=void 0===c?"p":c,d=(t.disabled,t.error,t.filled,t.focused,t.margin,t.required,t.variant,(0,i.Z)(t,["children","classes","className","component","disabled","error","filled","focused","margin","required","variant"])),p=(0,h.Z)(),m=(0,l.Z)({props:t,muiFormControl:p,states:["variant","margin","disabled","error","filled","focused","required"]});return o.createElement(f,(0,r.Z)({className:(0,a.Z)(s.root,("filled"===m.variant||"outlined"===m.variant)&&s.contained,u,m.disabled&&s.disabled,m.error&&s.error,m.filled&&s.filled,m.focused&&s.focused,m.required&&s.required,"dense"===m.margin&&s.marginDense),ref:e},d)," "===n?o.createElement("span",{dangerouslySetInnerHTML:{__html:"&#8203;"}}):n)})),_=(0,f.Z)((function(t){return{root:(0,r.Z)({color:t.palette.text.secondary},t.typography.caption,{textAlign:"left",marginTop:3,margin:0,"&$disabled":{color:t.palette.text.disabled},"&$error":{color:t.palette.error.main}}),error:{},disabled:{},marginDense:{marginTop:4},contained:{marginLeft:14,marginRight:14},focused:{},filled:{},required:{}}}),{name:"MuiFormHelperText"})(T),S=n(1756),N={standard:s.Z,filled:u.Z,outlined:c.Z},x=o.forwardRef((function(t,e){var n=t.autoComplete,s=t.autoFocus,u=void 0!==s&&s,c=t.children,l=t.classes,h=t.className,f=t.color,d=void 0===f?"primary":f,p=t.defaultValue,m=t.disabled,v=void 0!==m&&m,g=t.error,b=void 0!==g&&g,w=t.FormHelperTextProps,E=t.fullWidth,T=void 0!==E&&E,x=t.helperText,C=t.hiddenLabel,D=t.id,A=t.InputLabelProps,k=t.inputProps,R=t.InputProps,O=t.inputRef,P=t.label,L=t.multiline,M=void 0!==L&&L,F=t.name,V=t.onBlur,U=t.onChange,q=t.onFocus,B=t.placeholder,j=t.required,Z=void 0!==j&&j,G=t.rows,K=t.rowsMax,z=t.maxRows,H=t.minRows,W=t.select,J=void 0!==W&&W,Q=t.SelectProps,Y=t.type,$=t.value,X=t.variant,tt=void 0===X?"standard":X,et=(0,i.Z)(t,["autoComplete","autoFocus","children","classes","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","hiddenLabel","id","InputLabelProps","inputProps","InputProps","inputRef","label","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","rowsMax","maxRows","minRows","select","SelectProps","type","value","variant"]);var nt={};if("outlined"===tt&&(A&&"undefined"!==typeof A.shrink&&(nt.notched=A.shrink),P)){var rt,it=null!==(rt=null===A||void 0===A?void 0:A.required)&&void 0!==rt?rt:Z;nt.label=o.createElement(o.Fragment,null,P,it&&"\xa0*")}J&&(Q&&Q.native||(nt.id=void 0),nt["aria-describedby"]=void 0);var ot=x&&D?"".concat(D,"-helper-text"):void 0,at=P&&D?"".concat(D,"-label"):void 0,st=N[tt],ut=o.createElement(st,(0,r.Z)({"aria-describedby":ot,autoComplete:n,autoFocus:u,defaultValue:p,fullWidth:T,multiline:M,name:F,rows:G,rowsMax:K,maxRows:z,minRows:H,type:Y,value:$,id:D,inputRef:O,onBlur:V,onChange:U,onFocus:q,placeholder:B,inputProps:k},nt,R));return o.createElement(I,(0,r.Z)({className:(0,a.Z)(l.root,h),disabled:v,error:b,fullWidth:T,hiddenLabel:C,ref:e,required:Z,color:d,variant:tt},et),P&&o.createElement(y,(0,r.Z)({htmlFor:D,id:at},A),P),J?o.createElement(S.Z,(0,r.Z)({"aria-describedby":ot,id:D,labelId:at,value:$,input:ut},Q),c):ut,x&&o.createElement(_,(0,r.Z)({id:ot},w),x))})),C=(0,f.Z)({root:{}},{name:"MuiTextField"})(x)},3364:function(t,e,n){n.d(e,{Z:function(){return o}});var r=n(5522),i=(n(2791),n(1798));function o(){return(0,r.Z)()||i.Z}},7545:function(t,e,n){function r(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce((function(t,e){return null==e?t:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.apply(this,r),e.apply(this,r)}}),(function(){}))}n.d(e,{Z:function(){return r}})},503:function(t,e,n){function r(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=this,s=function(){t.apply(a,i)};clearTimeout(e),e=setTimeout(s,n)}return r.clear=function(){clearTimeout(e)},r}n.d(e,{Z:function(){return r}})},6394:function(t,e,n){function r(){var t=document.createElement("div");t.style.width="99px",t.style.height="99px",t.style.position="absolute",t.style.top="-9999px",t.style.overflow="scroll",document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e}n.d(e,{Z:function(){return r}})},3375:function(t,e,n){n.d(e,{Z:function(){return i}});var r=n(2791);function i(t,e){return r.isValidElement(t)&&-1!==e.indexOf(t.type.muiName)}},4667:function(t,e,n){function r(t){return t&&t.ownerDocument||document}n.d(e,{Z:function(){return r}})},7636:function(t,e,n){n.d(e,{Z:function(){return i}});var r=n(4667);function i(t){return(0,r.Z)(t).defaultView||window}},2426:function(t,e,n){n.d(e,{Z:function(){return r.Z}});var r=n(5637);r.Z.registerVersion("firebase","8.3.2","app")},6360:function(t,e,n){var r=n(5637),i=n(9971),o=n(9386),a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},a(t,e)};function s(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var u,c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},l=l||{},h=c||self;function f(){}function d(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var m="closure_uid_"+(1e9*Math.random()>>>0),v=0;function y(t,e,n){return t.call.apply(t.bind,arguments)}function g(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:g).apply(null,arguments)}function w(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function E(){return Date.now()}function I(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function T(){this.j=this.j,this.i=this.i}T.prototype.j=!1,T.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),0))(function(t){Object.prototype.hasOwnProperty.call(t,m)&&t[m]||(t[m]=++v)})(this)},T.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var _=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},S=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function N(t){return Array.prototype.concat.apply([],arguments)}function x(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function C(t){return/^[\s\xa0]*$/.test(t)}var D,A=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function k(t,e){return-1!=t.indexOf(e)}function R(t,e){return t<e?-1:t>e?1:0}t:{var O=h.navigator;if(O){var P=O.userAgent;if(P){D=P;break t}}D=""}function L(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function M(t){var e={};for(var n in t)e[n]=t[n];return e}var F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<F.length;o++)n=F[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function U(t){return U[" "](t),t}U[" "]=f;var q,B=k(D,"Opera"),j=k(D,"Trident")||k(D,"MSIE"),Z=k(D,"Edge"),G=Z||j,K=k(D,"Gecko")&&!(k(D.toLowerCase(),"webkit")&&!k(D,"Edge"))&&!(k(D,"Trident")||k(D,"MSIE"))&&!k(D,"Edge"),z=k(D.toLowerCase(),"webkit")&&!k(D,"Edge");function H(){var t=h.document;return t?t.documentMode:void 0}t:{var W="",J=function(){var t=D;return K?/rv:([^\);]+)(\)|;)/.exec(t):Z?/Edge\/([\d\.]+)/.exec(t):j?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):z?/WebKit\/(\S+)/.exec(t):B?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(J&&(W=J?J[1]:""),j){var Q=H();if(null!=Q&&Q>parseFloat(W)){q=String(Q);break t}}q=W}var Y,$={};function X(t){return function(t,e){var n=$;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=A(String(q)).split("."),r=A(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=R(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||R(0==a[2].length,0==s[2].length)||R(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}if(h.document&&j){var tt=H();Y=tt||(parseInt(q,10)||void 0)}else Y=void 0;var et=Y,nt=!j||9<=Number(et),rt=j&&!X("9"),it=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{h.addEventListener("test",f,e),h.removeEventListener("test",f,e)}catch(n){}return t}();function ot(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function at(t,e){if(ot.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(K){t:{try{U(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:st[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}ot.prototype.b=function(){this.defaultPrevented=!0},I(at,ot);var st={2:"touch",3:"pen",4:"mouse"};at.prototype.b=function(){at.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,rt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var ut="closure_listenable_"+(1e6*Math.random()|0),ct=0;function lt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++ct,this.Y=this.Z=!1}function ht(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function ft(t){this.src=t,this.a={},this.b=0}function dt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=_(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ht(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function pt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}ft.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=pt(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):((e=new lt(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var mt="closure_lm_"+(1e6*Math.random()|0),vt={};function yt(t,e,n,r,i){if(r&&r.once)return bt(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)yt(t,e[o],n,r,i);return null}return n=xt(n),t&&t[ut]?t.va(e,n,p(r)?!!r.capture:!!r,i):gt(t,e,n,!1,r,i)}function gt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=p(i)?!!i.capture:!!i;if(a&&!nt)return null;var s=St(t);if(s||(t[mt]=s=new ft(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=_t,e=nt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)it||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(It(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function bt(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)bt(t,e[o],n,r,i);return null}return n=xt(n),t&&t[ut]?t.wa(e,n,p(r)?!!r.capture:!!r,i):gt(t,e,n,!0,r,i)}function wt(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)wt(t,e[o],n,r,i);else r=p(r)?!!r.capture:!!r,n=xt(n),t&&t[ut]?(t=t.c,(e=String(e).toString())in t.a&&(-1<(n=pt(o=t.a[e],n,r,i))&&(ht(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=St(t))&&(e=t.a[e.toString()],t=-1,e&&(t=pt(e,n,r,i)),(n=-1<t?e[t]:null)&&Et(n))}function Et(t){if("number"!==typeof t&&t&&!t.Y){var e=t.src;if(e&&e[ut])dt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(It(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=St(e))?(dt(n,t),0==n.b&&(n.src=null,e[mt]=null)):ht(t)}}}function It(t){return t in vt?vt[t]:vt[t]="on"+t}function Tt(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Et(t),n.call(r,e)}function _t(t,e){if(t.Y)return!0;if(!nt){if(!e)t:{e=["window","event"];for(var n=h,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Tt(t,e=new at(e,this))}return Tt(t,new at(e,this))}function St(t){return(t=t[mt])instanceof ft?t:null}var Nt="__closure_events_fn_"+(1e9*Math.random()>>>0);function xt(t){return"function"===typeof t?t:(t[Nt]||(t[Nt]=function(e){return t.handleEvent(e)}),t[Nt])}function Ct(){T.call(this),this.c=new ft(this),this.J=this,this.C=null}function Dt(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"===typeof e)e=new ot(e,t);else if(e instanceof ot)e.target=e.target||t;else{var i=e;V(e=new ot(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.a=n[o];i=At(a,r,!0,e)&&i}if(i=At(a=e.a=t,r,!0,e)&&i,i=At(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=At(a=e.a=n[o],r,!1,e)&&i}function At(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.Y&&a.capture==n){var s=a.listener,u=a.ca||a.src;a.Z&&dt(t.c,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}I(Ct,T),Ct.prototype[ut]=!0,(u=Ct.prototype).addEventListener=function(t,e,n,r){yt(this,t,e,n,r)},u.removeEventListener=function(t,e,n,r){wt(this,t,e,n,r)},u.G=function(){if(Ct.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ht(n[r]);delete e.a[t],e.b--}}this.C=null},u.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},u.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var kt=h.JSON.stringify;function Rt(){this.b=this.a=null}var Ot,Pt=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new Mt}),(function(t){t.reset()}));function Lt(){var t=qt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Mt(){this.next=this.b=this.a=null}function Ft(t){h.setTimeout((function(){throw t}),0)}function Vt(t,e){Ot||function(){var t=h.Promise.resolve(void 0);Ot=function(){t.then(Bt)}}(),Ut||(Ot(),Ut=!0),qt.add(t,e)}Rt.prototype.add=function(t,e){var n=Pt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Mt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Mt.prototype.reset=function(){this.next=this.b=this.a=null};var Ut=!1,qt=new Rt;function Bt(){for(var t;t=Lt();){try{t.a.call(t.b)}catch(n){Ft(n)}var e=Pt;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Ut=!1}function jt(t,e){Ct.call(this),this.b=t||1,this.a=e||h,this.f=b(this.Za,this),this.g=E()}function Zt(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Gt(t,e,n){if("function"===typeof t)n&&(t=b(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:h.setTimeout(t,e||0)}function Kt(t){t.a=Gt((function(){t.a=null,t.c&&(t.c=!1,Kt(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}I(jt,Ct),(u=jt.prototype).aa=!1,u.M=null,u.Za=function(){if(this.aa){var t=E()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Dt(this,"tick"),this.aa&&(Zt(this),this.start()))}},u.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=E())},u.G=function(){jt.X.G.call(this),Zt(this),delete this.a};var zt=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Kt(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(h.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(T);function Ht(t){T.call(this),this.b=t,this.a={}}I(Ht,T);var Wt=[];function Jt(t,e,n,r){Array.isArray(n)||(n&&(Wt[0]=n.toString()),n=Wt);for(var i=0;i<n.length;i++){var o=yt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Qt(t){L(t.a,(function(t,e){this.a.hasOwnProperty(e)&&Et(t)}),t),t.a={}}function Yt(){this.a=!0}function $t(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return kt(n)}catch(s){return e}}(t,n)+(r?" "+r:"")}))}Ht.prototype.G=function(){Ht.X.G.call(this),Qt(this)},Ht.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Yt.prototype.info=function(){};var Xt={},te=null;function ee(){return te=te||new Ct}function ne(t){ot.call(this,Xt.Fa,t)}function re(t){var e=ee();Dt(e,new ne(e,t))}function ie(t,e){ot.call(this,Xt.STAT_EVENT,t),this.stat=e}function oe(t){var e=ee();Dt(e,new ie(e,t))}function ae(t){ot.call(this,Xt.Ga,t)}function se(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return h.setTimeout((function(){t()}),e)}Xt.Fa="serverreachability",I(ne,ot),Xt.STAT_EVENT="statevent",I(ie,ot),Xt.Ga="timingevent",I(ae,ot);var ue={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},ce={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function le(){}function he(t){var e;return(e=t.a)||(e=t.a={}),e}function fe(){}le.prototype.a=null;var de,pe={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function me(){ot.call(this,"d")}function ve(){ot.call(this,"c")}function ye(){}function ge(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Ht(this),this.P=be,t=G?125:void 0,this.R=new jt(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}I(me,ot),I(ve,ot),I(ye,le),de=new ye;var be=45e3,we={},Ee={};function Ie(t,e,n){t.H=1,t.i=Ge(Ve(e)),t.j=n,t.I=!0,Te(t,null)}function Te(t,e){t.u=E(),Ne(t),t.l=Ve(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),rn(n.b,"t",r),t.D=0,t.a=$n(t.g,t.g.C?e:null),0<t.O&&(t.F=new zt(b(t.Ca,t,t.a),t.O)),Jt(t.J,t.a,"readystatechange",t.Xa),e=t.B?M(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),re(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function _e(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Se(t,n);if(i==Ee){4==e&&(t.h=4,oe(14),r=!1),$t(t.c,t.f,null,"[Incomplete Response]");break}if(i==we){t.h=4,oe(15),$t(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}$t(t.c,t.f,i,null),ke(t,i)}4==e&&0==n.length&&(t.h=1,oe(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Gn(e),e.F=!0,oe(11))):($t(t.c,t.f,n,"[Invalid Chunked Response]"),Ae(t),De(t))}function Se(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Ee:(n=Number(e.substring(n,r)),isNaN(n)?we:(r+=1)+n>e.length?Ee:(e=e.substr(r,n),t.D=r+n,e))}function Ne(t){t.T=E()+t.P,xe(t,t.P)}function xe(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=se(b(t.Va,t),e)}function Ce(t){t.o&&(h.clearTimeout(t.o),t.o=null)}function De(t){0==t.g.v||t.A||Hn(t.g,t)}function Ae(t){Ce(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Zt(t.R),Qt(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function ke(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||hn(n.b,t)))if(n.I=t.N,!t.C&&hn(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(qf){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;zn(n),Ln(n)}Zn(n),oe(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=se(b(n.Sa,n),6e3));if(1>=ln(n.b)&&n.ea){try{n.ea()}catch(qf){}n.ea=void 0}}else Jn(n,11)}else if((t.C||n.a==t)&&zn(n),!C(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var a=i[4];null!=a&&(n.pa=a,n.c.info("SVER="+n.pa));var s=i[5];if(null!=s&&"number"===typeof s&&0<s){var u=1.5*s;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(k(l,"spdy")||k(l,"quic")||k(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(fn(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Ze(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=E()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=Yn(u,u.C?u.ga:null,u.fa),d.C){dn(u.b,d);var p=d,m=u.D;m&&p.setTimeout(m),p.o&&(Ce(p),Ne(p)),u.a=d}else jn(u);0<n.g.length&&Vn(n)}else"stop"!=i[0]&&"close"!=i[0]||Jn(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Jn(n,7):Pn(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);re(4)}catch(qf){}}function Re(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||"string"===typeof t)S(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(d(t)||"string"===typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"===typeof t)return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Oe(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Oe)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Pe(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Le(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Le(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Le(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(u=ge.prototype).setTimeout=function(t){this.P=t},u.Xa=function(t){t=t.target;var e=this.F;e&&3==An(t)?e.f():this.Ca(t)},u.Ca=function(t){try{if(t==this.a)t:{var e=An(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!G&&!this.a.$())){this.A||4!=e||7==n||re(8==n||0>=r?3:2),Ce(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var a,s=this.a;if((a=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(a)){var u=a;break e}}u=null}if(!u){this.b=!1,this.h=3,oe(12),Ae(this),De(this);break t}$t(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,ke(this,u)}this.I?(_e(this,e,o),G&&this.b&&3==e&&(Jt(this.J,this.R,"tick",this.Wa),this.R.start())):($t(this.c,this.f,o,null),ke(this,o)),4==e&&Ae(this),this.b&&!this.A&&(4==e?Hn(this.g,this):(this.b=!1,Ne(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,oe(12)):(this.h=0,oe(13)),Ae(this),De(this)}}}catch(c){}},u.Wa=function(){if(this.a){var t=An(this.a),e=this.a.$();this.D<e.length&&(Ce(this),_e(this,t,e),this.b&&4!=t&&Ne(this))}},u.cancel=function(){this.A=!0,Ae(this)},u.Va=function(){this.o=null;var t=E();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(re(3),oe(17)),Ae(this),this.h=2,De(this)):xe(this,this.T-t)},(u=Oe.prototype).K=function(){Pe(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},u.L=function(){return Pe(this),this.a.concat()},u.get=function(t,e){return Le(this.b,t)?this.b[t]:e},u.set=function(t,e){Le(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},u.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Me=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Fe(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Fe){this.a=void 0!==e?e:t.a,Ue(this,t.f),this.j=t.j,qe(this,t.c),Be(this,t.h),this.g=t.g,e=t.b;var n=new Xe;n.c=e.c,e.a&&(n.a=new Oe(e.a),n.b=e.b),je(this,n),this.i=t.i}else t&&(n=String(t).match(Me))?(this.a=!!e,Ue(this,n[1]||"",!0),this.j=Ke(n[2]||""),qe(this,n[3]||"",!0),Be(this,n[4]),this.g=Ke(n[5]||"",!0),je(this,n[6]||"",!0),this.i=Ke(n[7]||"")):(this.a=!!e,this.b=new Xe(null,this.a))}function Ve(t){return new Fe(t)}function Ue(t,e,n){t.f=n?Ke(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function qe(t,e,n){t.c=n?Ke(e,!0):e}function Be(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function je(t,e,n){e instanceof Xe?(t.b=e,function(t,e){e&&!t.f&&(tn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(en(this,e),rn(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=ze(e,Ye)),t.b=new Xe(e,t.a))}function Ze(t,e,n){t.b.set(e,n)}function Ge(t){return Ze(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^E()).toString(36)),t}function Ke(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ze(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,He),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function He(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Fe.prototype.toString=function(){var t=[],e=this.f;e&&t.push(ze(e,We,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(ze(e,We,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(ze(n,"/"==n.charAt(0)?Qe:Je,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",ze(n,$e)),t.join("")};var We=/[#\/\?@]/g,Je=/[#\?:]/g,Qe=/[#\?]/g,Ye=/[#\?@]/g,$e=/#/g;function Xe(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function tn(t){t.a||(t.a=new Oe,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function en(t,e){tn(t),e=on(t,e),Le(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Le((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Pe(t)))}function nn(t,e){return tn(t),e=on(t,e),Le(t.a.b,e)}function rn(t,e,n){en(t,e),0<n.length&&(t.c=null,t.a.set(on(t,e),x(n)),t.b+=n.length)}function on(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(u=Xe.prototype).add=function(t,e){tn(this),this.c=null,t=on(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},u.forEach=function(t,e){tn(this),this.a.forEach((function(n,r){S(n,(function(n){t.call(e,n,r,this)}),this)}),this)},u.L=function(){tn(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},u.K=function(t){tn(this);var e=[];if("string"===typeof t)nn(this,t)&&(e=N(e,this.a.get(on(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=N(e,t[n])}return e},u.set=function(t,e){return tn(this),this.c=null,nn(this,t=on(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},u.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},u.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var an=function(t,e){this.b=t,this.a=e};function sn(t){this.g=t||un,h.PerformanceNavigationTiming?t=0<(t=h.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(h.ia&&h.ia.ya&&h.ia.ya()&&h.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var un=10;function cn(t){return!!t.b||!!t.a&&t.a.size>=t.f}function ln(t){return t.b?1:t.a?t.a.size:0}function hn(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function fn(t,e){t.a?t.a.add(e):t.b=e}function dn(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function pn(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=s(t.a.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.s)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return x(t.c)}function mn(){}function vn(){this.a=new mn}function yn(t,e,n){var r=n||"";try{Re(t,(function(t,n){var i=t;p(t)&&(i=kt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(Td){throw e.push(r+"type="+encodeURIComponent("_badmap")),Td}}function gn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}sn.prototype.cancel=function(){var t,e;if(this.c=pn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=s(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},mn.prototype.stringify=function(t){return h.JSON.stringify(t,void 0)},mn.prototype.parse=function(t){return h.JSON.parse(t,void 0)};var bn=h.JSON.parse;function wn(t){Ct.call(this),this.headers=new Oe,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=En,this.D=this.F=!1}I(wn,Ct);var En="",In=/^https?$/i,Tn=["POST","PUT"];function _n(t){return"content-type"==t.toLowerCase()}function Sn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Nn(t),Cn(t)}function Nn(t){t.u||(t.u=!0,Dt(t,"complete"),Dt(t,"error"))}function xn(t){if(t.b&&"undefined"!=typeof l&&(!t.s[1]||4!=An(t)||2!=t.W()))if(t.l&&4==An(t))Gt(t.za,0,t);else if(Dt(t,"readystatechange"),4==An(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Me)[1]||null;if(!o&&h.self&&h.self.location){var a=h.self.location.protocol;o=a.substr(0,a.length-1)}i=!In.test(o?o.toLowerCase():"")}e=i}if(e)Dt(t,"complete"),Dt(t,"success");else{t.h=6;try{var s=2<An(t)?t.a.statusText:""}catch(n){s=""}t.f=s+" ["+t.W()+"]",Nn(t)}}finally{Cn(t)}}}function Cn(t,e){if(t.a){Dn(t);var n=t.a,r=t.s[0]?f:null;t.a=null,t.s=null,e||Dt(t,"ready");try{n.onreadystatechange=r}catch(Td){}}}function Dn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(h.clearTimeout(t.m),t.m=null)}function An(t){return t.a?t.a.readyState:0}function kn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return L(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):Ze(t,e,n))}function Rn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function On(t){this.pa=0,this.g=[],this.c=new Yt,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Rn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Rn("baseRetryDelayMs",5e3,t),this.Ra=Rn("retryDelaySeedMs",1e4,t),this.Ma=Rn("forwardChannelMaxRetries",2,t),this.ma=Rn("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new sn(t&&t.concurrentRequestLimit),this.ka=new vn,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Pn(t){if(Mn(t),3==t.v){var e=t.R++,n=Ve(t.B);Ze(n,"SID",t.J),Ze(n,"RID",e),Ze(n,"TYPE","terminate"),qn(t,n),(e=new ge(t,t.c,e,void 0)).H=2,e.i=Ge(Ve(n)),n=!1,h.navigator&&h.navigator.sendBeacon&&(n=h.navigator.sendBeacon(e.i.toString(),"")),!n&&h.Image&&((new Image).src=e.i,n=!0),n||(e.a=$n(e.g,null),e.a.ba(e.i)),e.u=E(),Ne(e)}Qn(t)}function Ln(t){t.a&&(Gn(t),t.a.cancel(),t.a=null)}function Mn(t){Ln(t),t.j&&(h.clearTimeout(t.j),t.j=null),zn(t),t.b.cancel(),t.h&&("number"===typeof t.h&&h.clearTimeout(t.h),t.h=null)}function Fn(t,e){t.g.push(new an(t.Oa++,e)),3==t.v&&Vn(t)}function Vn(t){cn(t.b)||t.h||(t.h=!0,Vt(t.Ba,t),t.u=0)}function Un(t,e){var n;n=e?e.f:t.R++;var r=Ve(t.B);Ze(r,"SID",t.J),Ze(r,"RID",n),Ze(r,"AID",t.P),qn(t,r),t.i&&t.l&&kn(r,t.i,t.l),n=new ge(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Bn(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),fn(t.b,n),Ie(n,r,e)}function qn(t,e){t.f&&Re({},(function(t,n){Ze(e,n,t)}))}function Bn(t,e,n){n=Math.min(t.g.length,n);var r=t.f?b(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{yn(l,a,"req"+c+"_")}catch(Or){r&&r(l)}}if(s){r=a.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function jn(t){t.a||t.j||(t.T=1,Vt(t.Aa,t),t.o=0)}function Zn(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=se(b(t.Aa,t),Wn(t,t.o)),t.o++,!0)}function Gn(t){null!=t.s&&(h.clearTimeout(t.s),t.s=null)}function Kn(t){t.a=new ge(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Ve(t.la);Ze(e,"RID","rpc"),Ze(e,"SID",t.J),Ze(e,"CI",t.H?"0":"1"),Ze(e,"AID",t.P),qn(t,e),Ze(e,"TYPE","xmlhttp"),t.i&&t.l&&kn(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Ge(Ve(e)),n.j=null,n.I=!0,Te(n,t)}function zn(t){null!=t.m&&(h.clearTimeout(t.m),t.m=null)}function Hn(t,e){var n=null;if(t.a==e){zn(t),Gn(t),t.a=null;var r=2}else{if(!hn(t.b,e))return;n=e.s,dn(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=E()-e.u;var i=t.u;Dt(r=ee(),new ae(r,n,e,i)),Vn(t)}else jn(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(ln(t.b)>=t.b.f-(t.h?1:0))&&(t.h?(t.g=e.s.concat(t.g),!0):!(1==t.v||2==t.v||t.u>=(t.La?0:t.Ma))&&(t.h=se(b(t.Ba,t,e),Wn(t,t.u)),t.u++,!0))}(t,e)||2==r&&Zn(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Jn(t,5);break;case 4:Jn(t,10);break;case 3:Jn(t,6);break;default:Jn(t,2)}}function Wn(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Jn(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=b(t.Ya,t);n||(n=new Fe("//www.google.com/images/cleardot.gif"),h.location&&"http"==h.location.protocol||Ue(n,"https"),Ge(n)),function(t,e){var n=new Yt;if(h.Image){var r=new Image;r.onload=w(gn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=w(gn,n,r,"TestLoadImage: error",!1,e),r.onabort=w(gn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=w(gn,n,r,"TestLoadImage: timeout",!1,e),h.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else oe(2);t.v=0,t.f&&t.f.ra(e),Qn(t),Mn(t)}function Qn(t){t.v=0,t.I=-1,t.f&&(0==pn(t.b).length&&0==t.g.length||(t.b.c.length=0,x(t.g),t.g.length=0),t.f.qa())}function Yn(t,e,n){var r=function(t){return t instanceof Fe?Ve(t):new Fe(t,void 0)}(n);if(""!=r.c)e&&qe(r,e+"."+r.c),Be(r,r.h);else{var i=h.location;r=function(t,e,n,r){var i=new Fe(null,void 0);return t&&Ue(i,t),e&&qe(i,e),n&&Be(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&L(t.V,(function(t,e){Ze(r,e,t)})),e=t.A,n=t.na,e&&n&&Ze(r,e,n),Ze(r,"VER",t.ha),qn(t,r),r}function $n(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new wn(t.Na)).F=t.C,e}function Xn(){}function tr(){if(j&&!(10<=Number(et)))throw Error("Environmental error: no available transport.")}function er(t,e){Ct.call(this),this.a=new On(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!C(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!C(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new ir(this)}function nr(t){me.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function rr(){ve.call(this),this.status=1}function ir(t){this.a=t}(u=wn.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?he(this.H):he(de),this.a.onreadystatechange=b(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void Sn(this,o)}t=n||"";var i=new Oe(this.headers);r&&Re(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=_n,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}(i.L()),n=h.FormData&&t instanceof h.FormData,!(0<=_(Tn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Dn(this),0<this.o&&((this.D=function(t){return j&&X(9)&&"number"===typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=b(this.xa,this)):this.m=Gt(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){Sn(this,o)}},u.xa=function(){"undefined"!=typeof l&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Dt(this,"timeout"),this.abort(8))},u.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Dt(this,"complete"),Dt(this,"abort"),Cn(this))},u.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Cn(this,!0)),wn.X.G.call(this)},u.za=function(){this.j||(this.A||this.l||this.g?xn(this):this.Ua())},u.Ua=function(){xn(this)},u.W=function(){try{return 2<An(this)?this.a.status:-1}catch(t){return-1}},u.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},u.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),bn(e)}},u.ua=function(){return this.h},u.Qa=function(){return"string"===typeof this.f?this.f:String(this.f)},(u=On.prototype).ha=8,u.v=1,u.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new ge(this,this.c,t,void 0),r=this.l;if(this.O&&(r?V(r=M(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"===typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Bn(this,n,e),Ze(i=Ve(this.B),"RID",t),Ze(i,"CVER",22),this.A&&Ze(i,"X-HTTP-Session-Id",this.A),qn(this,i),this.i&&r&&kn(i,this.i,r),fn(this.b,n),this.Ia&&Ze(i,"TYPE","init"),this.da?(Ze(i,"$req",e),Ze(i,"SID","null"),n.U=!0,Ie(n,i,null)):Ie(n,i,e),this.v=2}}else 3==this.v&&(t?Un(this,t):0==this.g.length||cn(this.b)||Un(this))},u.Aa=function(){if(this.j=null,Kn(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=se(b(this.Ta,this),t)}},u.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,oe(10),Ln(this),Kn(this))},u.Sa=function(){null!=this.m&&(this.m=null,Ln(this),Zn(this),oe(19))},u.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),oe(2)):(this.c.info("Failed to ping google.com"),oe(1))},(u=Xn.prototype).ta=function(){},u.sa=function(){},u.ra=function(){},u.qa=function(){},u.Ja=function(){},tr.prototype.a=function(t,e){return new er(t,e)},I(er,Ct),er.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;oe(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Yn(t,null,t.fa),Vn(t)},er.prototype.close=function(){Pn(this.a)},er.prototype.h=function(t){if("string"===typeof t){var e={};e.__data__=t,Fn(this.a,e)}else this.l?((e={}).__data__=kt(t),Fn(this.a,e)):Fn(this.a,t)},er.prototype.G=function(){this.a.f=null,delete this.f,Pn(this.a),delete this.a,er.X.G.call(this)},I(nr,me),I(rr,ve),I(ir,Xn),ir.prototype.ta=function(){Dt(this.a,"a")},ir.prototype.sa=function(t){Dt(this.a,new nr(t))},ir.prototype.ra=function(t){Dt(this.a,new rr(t))},ir.prototype.qa=function(){Dt(this.a,"b")},tr.prototype.createWebChannel=tr.prototype.a,er.prototype.send=er.prototype.h,er.prototype.open=er.prototype.g,er.prototype.close=er.prototype.close,ue.NO_ERROR=0,ue.TIMEOUT=8,ue.HTTP_ERROR=6,ce.COMPLETE="complete",fe.EventType=pe,pe.OPEN="a",pe.CLOSE="b",pe.ERROR="c",pe.MESSAGE="d",Ct.prototype.listen=Ct.prototype.va,wn.prototype.listenOnce=wn.prototype.wa,wn.prototype.getLastError=wn.prototype.Qa,wn.prototype.getLastErrorCode=wn.prototype.ua,wn.prototype.getStatus=wn.prototype.W,wn.prototype.getResponseJson=wn.prototype.Pa,wn.prototype.getResponseText=wn.prototype.$,wn.prototype.send=wn.prototype.ba;var or=function(){return new tr},ar=function(){return ee()},sr=ue,ur=ce,cr=Xt,lr={gb:0,jb:1,kb:2,Db:3,Ib:4,Fb:5,Gb:6,Eb:7,Cb:8,Hb:9,PROXY:10,NOPROXY:11,Ab:12,wb:13,xb:14,vb:15,yb:16,zb:17,bb:18,ab:19,cb:20},hr=fe,fr=wn,dr=n(9388),pr=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();pr.o=-1;var mr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},vr=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,dr.ZT)(e,t),e}(Error),yr=new o.Yd("@firebase/firestore");function gr(){return yr.logLevel}function br(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(yr.logLevel<=o.in.DEBUG){var r=e.map(Ir);yr.debug.apply(yr,(0,dr.ev)(["Firestore (8.3.2): "+t],r))}}function wr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(yr.logLevel<=o.in.ERROR){var r=e.map(Ir);yr.error.apply(yr,(0,dr.ev)(["Firestore (8.3.2): "+t],r))}}function Er(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(yr.logLevel<=o.in.WARN){var r=e.map(Ir);yr.warn.apply(yr,(0,dr.ev)(["Firestore (8.3.2): "+t],r))}}function Ir(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function Tr(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.3.2) INTERNAL ASSERTION FAILED: "+t;throw wr(e),new Error(e)}function _r(t,e){t||Tr()}function Sr(t,e){return t}function Nr(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var xr=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Nr(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Cr(t,e){return t<e?-1:t>e?1:0}function Dr(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Ar(t){return t+"\0"}var kr=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new vr(mr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new vr(mr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new vr(mr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new vr(mr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Cr(this.nanoseconds,t.nanoseconds):Cr(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Rr=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new kr(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function Or(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Pr(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Lr(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Mr=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Tr(),void 0===n?n=t.length-e:n>t.length-e&&Tr(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Fr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,dr.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new vr(mr.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Mr),Vr=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ur=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,dr.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Vr.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new vr(mr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new vr(mr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new vr(mr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new vr(mr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Mr),qr=function(){function t(t){this.fields=t,t.sort(Ur.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Dr(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Br=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Cr(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Br.EMPTY_BYTE_STRING=new Br("");var jr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zr(t){if(_r(!!t),"string"==typeof t){var e=0,n=jr.exec(t);if(_r(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Gr(t.seconds),nanos:Gr(t.nanos)}}function Gr(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Kr(t){return"string"==typeof t?Br.fromBase64String(t):Br.fromUint8Array(t)}function zr(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Hr(t){var e=t.mapValue.fields.__previous_value__;return zr(e)?Hr(e):e}function Wr(t){var e=Zr(t.mapValue.fields.__local_write_time__.timestampValue);return new kr(e.seconds,e.nanos)}function Jr(t){return null==t}function Qr(t){return 0===t&&1/t==-1/0}function Yr(t){return"number"==typeof t&&Number.isInteger(t)&&!Qr(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var $r=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Fr.fromString(e))},t.fromName=function(e){return new t(Fr.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Fr.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Fr.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Fr(e.slice()))},t}();function Xr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?zr(t)?4:10:Tr()}function ti(t,e){var n=Xr(t);if(n!==Xr(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wr(t).isEqual(Wr(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Zr(t.timestampValue),r=Zr(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Kr(t.bytesValue).isEqual(Kr(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Gr(t.geoPointValue.latitude)===Gr(e.geoPointValue.latitude)&&Gr(t.geoPointValue.longitude)===Gr(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Gr(t.integerValue)===Gr(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Gr(t.doubleValue),r=Gr(e.doubleValue);return n===r?Qr(n)===Qr(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Dr(t.arrayValue.values||[],e.arrayValue.values||[],ti);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Or(n)!==Or(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ti(n[i],r[i])))return!1;return!0}(t,e);default:return Tr()}}function ei(t,e){return void 0!==(t.values||[]).find((function(t){return ti(t,e)}))}function ni(t,e){var n=Xr(t),r=Xr(e);if(n!==r)return Cr(n,r);switch(n){case 0:return 0;case 1:return Cr(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Gr(t.integerValue||t.doubleValue),r=Gr(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return ri(t.timestampValue,e.timestampValue);case 4:return ri(Wr(t),Wr(e));case 5:return Cr(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Kr(t),r=Kr(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Cr(n[i],r[i]);if(0!==o)return o}return Cr(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Cr(Gr(t.latitude),Gr(e.latitude));return 0!==n?n:Cr(Gr(t.longitude),Gr(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=ni(n[i],r[i]);if(o)return o}return Cr(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=Cr(r[a],o[a]);if(0!==s)return s;var u=ni(n[r[a]],i[o[a]]);if(0!==u)return u}return Cr(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Tr()}}function ri(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Cr(t,e);var n=Zr(t),r=Zr(e),i=Cr(n.seconds,r.seconds);return 0!==i?i:Cr(n.nanos,r.nanos)}function ii(t){return oi(t)}function oi(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Zr(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Kr(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,$r.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=oi(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+oi(t.fields[o])}return e+"}"}(t.mapValue):Tr();var e,n}function ai(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function si(t){return!!t&&"integerValue"in t}function ui(t){return!!t&&"arrayValue"in t}function ci(t){return!!t&&"nullValue"in t}function li(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function hi(t){return!!t&&"mapValue"in t}var fi=function(){function t(t){this.overlayMap=new Map,this.partialValue=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){return t.extractNestedValue(this.buildProto(),e)},t.prototype.toProto=function(){return this.field(Ur.emptyPath())},t.prototype.set=function(t,e){this.setOverlay(t,e)},t.prototype.setAll=function(t){var e=this;t.forEach((function(t,n){t?e.set(n,t):e.delete(n)}))},t.prototype.delete=function(t){this.setOverlay(t,null)},t.prototype.isEqual=function(t){return ti(this.buildProto(),t.buildProto())},t.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Xr(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.applyOverlay=function(e,n){var r=this,i=!1,o=t.extractNestedValue(this.partialValue,e),a=hi(o)?Object.assign({},o.mapValue.fields):{};return n.forEach((function(t,n){if(t instanceof Map){var o=r.applyOverlay(e.child(n),t);null!=o&&(a[n]=o,i=!0)}else null!==t?(a[n]=t,i=!0):a.hasOwnProperty(n)&&(delete a[n],i=!0)})),i?{mapValue:{fields:a}}:null},t.prototype.buildProto=function(){var t=this.applyOverlay(Ur.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},t.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!hi(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.clone=function(){return new t(this.buildProto())},t}();function di(t){var e=[];return Pr(t.fields||{},(function(t,n){var r=new Ur([t]);if(hi(n)){var i=di(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];e.push(r.child(s))}}else e.push(r)})),new qr(e)}var pi=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Rr.min(),fi.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,fi.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,fi.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=fi.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=fi.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),mi=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function vi(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new mi(t,e,n,r,i,o,a)}function yi(t){var e=Sr(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+ii(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),Jr(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Ai(e.startAt)),e.endAt&&(n+="|ub:",n+=Ai(e.endAt)),e.h=n}return e.h}function gi(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Ri(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!ti(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Pi(t.startAt,e.startAt)&&Pi(t.endAt,e.endAt)}function bi(t){return $r.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var wi=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,dr.ZT)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Ei(t,n,r):"array-contains"===n?new Si(t,r):"in"===n?new Ni(t,r):"not-in"===n?new xi(t,r):"array-contains-any"===n?new Ci(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Ii(t,n):new Ti(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(ni(e,this.value)):null!==e&&Xr(this.value)===Xr(e)&&this.m(ni(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Tr()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Ei=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=$r.fromName(r.referenceValue),i}return(0,dr.ZT)(e,t),e.prototype.matches=function(t){var e=$r.comparator(t.key,this.key);return this.m(e)},e}(wi),Ii=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=_i("in",n),r}return(0,dr.ZT)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(wi),Ti=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=_i("not-in",n),r}return(0,dr.ZT)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(wi);function _i(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return $r.fromName(t.referenceValue)}))}var Si=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,dr.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return ui(e)&&ei(e.arrayValue,this.value)},e}(wi),Ni=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,dr.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&ei(this.value.arrayValue,e)},e}(wi),xi=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,dr.ZT)(e,t),e.prototype.matches=function(t){if(ei(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!ei(this.value.arrayValue,e)},e}(wi),Ci=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,dr.ZT)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!ui(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return ei(e.value.arrayValue,t)}))},e}(wi),Di=function(t,e){this.position=t,this.before=e};function Ai(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return ii(t)})).join(",")}var ki=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Ri(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Oi(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?$r.comparator($r.fromName(a.referenceValue),n.key):ni(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Pi(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!ti(t.position[n],e.position[n]))return!1;return!0}var Li=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function Mi(t,e,n,r,i,o,a,s){return new Li(t,e,n,r,i,o,a,s)}function Fi(t){return new Li(t)}function Vi(t){return!Jr(t.limit)&&"F"===t.limitType}function Ui(t){return!Jr(t.limit)&&"L"===t.limitType}function qi(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Bi(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function ji(t){return null!==t.collectionGroup}function Zi(t){var e=Sr(t);if(null===e.p){e.p=[];var n=Bi(e),r=qi(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new ki(n)),e.p.push(new ki(Ur.keyField(),"asc"));else{for(var i=!1,o=0,a=e.explicitOrderBy;o<a.length;o++){var s=a[o];e.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new ki(Ur.keyField(),u))}}}return e.p}function Gi(t){var e=Sr(t);if(!e.T)if("F"===e.limitType)e.T=vi(e.path,e.collectionGroup,Zi(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Zi(e);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new ki(o.field,a))}var s=e.endAt?new Di(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Di(e.startAt.position,!e.startAt.before):null;e.T=vi(e.path,e.collectionGroup,n,e.filters,e.limit,s,u)}return e.T}function Ki(t,e,n){return new Li(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zi(t,e){return gi(Gi(t),Gi(e))&&t.limitType===e.limitType}function Hi(t){return yi(Gi(t))+"|lt:"+t.limitType}function Wi(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+ii(e.value);var e})).join(", ")+"]"),Jr(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Ai(t.startAt)),t.endAt&&(e+=", endAt: "+Ai(t.endAt)),"Target("+e+")"}(Gi(t))+"; limitType="+t.limitType+")"}function Ji(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):$r.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Oi(t.startAt,Zi(t),e))&&(!t.endAt||!Oi(t.endAt,Zi(t),e))}(t,e)}function Qi(t){return function(e,n){for(var r=!1,i=0,o=Zi(t);i<o.length;i++){var a=o[i],s=Yi(a,e,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function Yi(t,e,n){var r=t.field.isKeyField()?$r.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?ni(r,i):Tr()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Tr()}}function $i(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qr(e)?"-0":e}}function Xi(t){return{integerValue:""+t}}function to(t,e){return Yr(e)?Xi(e):$i(t,e)}var eo=function(){this._=void 0};function no(t,e,n){return t instanceof oo?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof ao?so(t,e):t instanceof uo?co(t,e):function(t,e){var n=io(t,e),r=ho(n)+ho(t.A);return si(n)&&si(t.A)?Xi(r):$i(t.R,r)}(t,e)}function ro(t,e,n){return t instanceof ao?so(t,e):t instanceof uo?co(t,e):n}function io(t,e){return t instanceof lo?si(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var oo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,dr.ZT)(e,t),e}(eo),ao=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,dr.ZT)(e,t),e}(eo);function so(t,e){for(var n=fo(e),r=function(t){n.some((function(e){return ti(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var uo=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,dr.ZT)(e,t),e}(eo);function co(t,e){for(var n=fo(e),r=function(t){n=n.filter((function(e){return!ti(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var lo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return(0,dr.ZT)(e,t),e}(eo);function ho(t){return Gr(t.integerValue||t.doubleValue)}function fo(t){return ui(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var po=function(t,e){this.field=t,this.transform=e},mo=function(t,e){this.version=t,this.transformResults=e},vo=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function yo(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var go=function(){};function bo(t,e,n){t instanceof _o?function(t,e,n){var r=t.value.clone(),i=xo(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof So?function(t,e,n){if(yo(t.precondition,e)){var r=xo(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(No(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function wo(t,e,n){t instanceof _o?function(t,e,n){if(yo(t.precondition,e)){var r=t.value.clone(),i=Co(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(To(e),r).setHasLocalMutations()}}(t,e,n):t instanceof So?function(t,e,n){if(yo(t.precondition,e)){var r=Co(t.fieldTransforms,n,e),i=e.data;i.setAll(No(t)),i.setAll(r),e.convertToFoundDocument(To(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){yo(t.precondition,e)&&e.convertToNoDocument(Rr.min())}(t,e)}function Eo(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e.data.field(o.field),s=io(o.transform,a||null);null!=s&&(null==n&&(n=fi.empty()),n.set(o.field,s))}return n||null}function Io(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Dr(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof ao&&e instanceof ao||t instanceof uo&&e instanceof uo?Dr(t.elements,e.elements,ti):t instanceof lo&&e instanceof lo?ti(t.A,e.A):t instanceof oo&&e instanceof oo}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function To(t){return t.isFoundDocument()?t.version:Rr.min()}var _o=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return(0,dr.ZT)(e,t),e}(go),So=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=t.call(this)||this).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return(0,dr.ZT)(e,t),e}(go);function No(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function xo(t,e,n){var r=new Map;_r(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,ro(a,s,n[i]))}return r}function Co(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,no(s,u,e))}return r}var Do,Ao,ko=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,dr.ZT)(e,t),e}(go),Ro=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,dr.ZT)(e,t),e}(go),Oo=function(t){this.count=t};function Po(t){switch(t){case mr.OK:return Tr();case mr.CANCELLED:case mr.UNKNOWN:case mr.DEADLINE_EXCEEDED:case mr.RESOURCE_EXHAUSTED:case mr.INTERNAL:case mr.UNAVAILABLE:case mr.UNAUTHENTICATED:return!1;case mr.INVALID_ARGUMENT:case mr.NOT_FOUND:case mr.ALREADY_EXISTS:case mr.PERMISSION_DENIED:case mr.FAILED_PRECONDITION:case mr.ABORTED:case mr.OUT_OF_RANGE:case mr.UNIMPLEMENTED:case mr.DATA_LOSS:return!0;default:return Tr()}}function Lo(t){if(void 0===t)return wr("GRPC error has no .code"),mr.UNKNOWN;switch(t){case Do.OK:return mr.OK;case Do.CANCELLED:return mr.CANCELLED;case Do.UNKNOWN:return mr.UNKNOWN;case Do.DEADLINE_EXCEEDED:return mr.DEADLINE_EXCEEDED;case Do.RESOURCE_EXHAUSTED:return mr.RESOURCE_EXHAUSTED;case Do.INTERNAL:return mr.INTERNAL;case Do.UNAVAILABLE:return mr.UNAVAILABLE;case Do.UNAUTHENTICATED:return mr.UNAUTHENTICATED;case Do.INVALID_ARGUMENT:return mr.INVALID_ARGUMENT;case Do.NOT_FOUND:return mr.NOT_FOUND;case Do.ALREADY_EXISTS:return mr.ALREADY_EXISTS;case Do.PERMISSION_DENIED:return mr.PERMISSION_DENIED;case Do.FAILED_PRECONDITION:return mr.FAILED_PRECONDITION;case Do.ABORTED:return mr.ABORTED;case Do.OUT_OF_RANGE:return mr.OUT_OF_RANGE;case Do.UNIMPLEMENTED:return mr.UNIMPLEMENTED;case Do.DATA_LOSS:return mr.DATA_LOSS;default:return Tr()}}(Ao=Do||(Do={}))[Ao.OK=0]="OK",Ao[Ao.CANCELLED=1]="CANCELLED",Ao[Ao.UNKNOWN=2]="UNKNOWN",Ao[Ao.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ao[Ao.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ao[Ao.NOT_FOUND=5]="NOT_FOUND",Ao[Ao.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ao[Ao.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ao[Ao.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ao[Ao.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ao[Ao.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ao[Ao.ABORTED=10]="ABORTED",Ao[Ao.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ao[Ao.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ao[Ao.INTERNAL=13]="INTERNAL",Ao[Ao.UNAVAILABLE=14]="UNAVAILABLE",Ao[Ao.DATA_LOSS=15]="DATA_LOSS";var Mo=function(){function t(t,e){this.comparator=t,this.root=e||Vo.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Vo.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vo.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Fo(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Fo(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Fo(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Fo(this.root,t,this.comparator,!0)},t}(),Fo=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Vo=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Tr();if(this.right.isRed())throw Tr();var t=this.left.check();if(t!==this.right.check())throw Tr();return t+(this.isRed()?0:1)},t}();Vo.EMPTY=null,Vo.RED=!0,Vo.BLACK=!1,Vo.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Tr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Tr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Tr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Tr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Tr()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Vo(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Uo=function(){function t(t){this.comparator=t,this.data=new Mo(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new qo(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new qo(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),qo=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Bo=new Mo($r.comparator);function jo(){return Bo}var Zo=new Mo($r.comparator);function Go(){return Zo}var Ko=new Mo($r.comparator);function zo(){return Ko}var Ho=new Uo($r.comparator);function Wo(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Ho,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Jo=new Uo(Cr);function Qo(){return Jo}var Yo=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,$o.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Rr.min(),r,Qo(),jo(),Wo())},t}(),$o=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Br.EMPTY_BYTE_STRING,n,Wo(),Wo(),Wo())},t}(),Xo=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},ta=function(t,e){this.targetId=t,this.V=e},ea=function(t,e,n,r){void 0===n&&(n=Br.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},na=function(){function t(){this.S=0,this.D=oa(),this.C=Br.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.$=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Wo(),e=Wo(),n=Wo();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Tr()}})),new $o(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=oa()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),ra=function(){function t(t){this.W=t,this.G=new Map,this.H=jo(),this.J=ia(),this.Y=new Uo(Cr)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:Tr()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(bi(i))if(0===n){var o=new $r(i.path);this.tt(e,o,pi.newNoDocument(o,Rr.min()))}else _r(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&bi(o.target)){var a=new $r(o.target.path);null!==e.H.get(a)||e.at(i,a)||e.tt(i,a,pi.newNoDocument(a,t))}r.O&&(n.set(i,r.M()),r.L())}}));var r=Wo();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Yo(t,n,this.Y,this.H,r);return this.H=jo(),this.J=ia(),this.Y=new Uo(Cr),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new na,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Uo(Cr),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||br("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new na),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function ia(){return new Mo($r.comparator)}function oa(){return new Mo($r.comparator)}var aa={asc:"ASCENDING",desc:"DESCENDING"},sa={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ua=function(t,e){this.databaseId=t,this.I=e};function ca(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function la(t,e){return t.I?e.toBase64():e.toUint8Array()}function ha(t,e){return ca(t,e.toTimestamp())}function fa(t){return _r(!!t),Rr.fromTimestamp(function(t){var e=Zr(t);return new kr(e.seconds,e.nanos)}(t))}function da(t,e){return function(t){return new Fr(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function pa(t){var e=Fr.fromString(t);return _r(Va(e)),e}function ma(t,e){return da(t.databaseId,e.path)}function va(t,e){var n=pa(e);if(n.get(1)!==t.databaseId.projectId)throw new vr(mr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new vr(mr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new $r(wa(n))}function ya(t,e){return da(t.databaseId,e)}function ga(t){var e=pa(t);return 4===e.length?Fr.emptyPath():wa(e)}function ba(t){return new Fr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function wa(t){return _r(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Ea(t,e,n){return{name:ma(t,e),fields:n.toProto().mapValue.fields}}function Ia(t,e,n){var r=va(t,e.name),i=fa(e.updateTime),o=new fi({mapValue:{fields:e.fields}}),a=pi.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Ta(t,e){var n;if(e instanceof _o)n={update:Ea(t,e.key,e.value)};else if(e instanceof ko)n={delete:ma(t,e.key)};else if(e instanceof So)n={update:Ea(t,e.key,e.data),updateMask:Fa(e.fieldMask)};else{if(!(e instanceof Ro))return Tr();n={verify:ma(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof oo)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ao)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof uo)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof lo)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Tr()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:ha(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Tr()}(t,e.precondition)),n}function _a(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?vo.updateTime(fa(t.updateTime)):void 0!==t.exists?vo.exists(t.exists):vo.none()}(e.currentDocument):vo.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)_r("REQUEST_TIME"===e.setToServerValue),n=new oo;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new ao(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new uo(i)}else"increment"in e?n=new lo(t,e.increment):Tr();var o=Ur.fromServerFormat(e.fieldPath);return new po(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=va(t,e.update.name),o=new fi({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new qr(e.map((function(t){return Ur.fromServerFormat(t)})))}(e.updateMask);return new So(i,o,a,n,r)}return new _o(i,o,n,r)}if(e.delete){var s=va(t,e.delete);return new ko(s,n)}if(e.verify){var u=va(t,e.verify);return new Ro(u,n)}return Tr()}function Sa(t,e){return{documents:[ya(t,e.path)]}}function Na(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=ya(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=ya(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(li(t.value))return{unaryFilter:{field:Oa(t.field),op:"IS_NAN"}};if(ci(t.value))return{unaryFilter:{field:Oa(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(li(t.value))return{unaryFilter:{field:Oa(t.field),op:"IS_NOT_NAN"}};if(ci(t.value))return{unaryFilter:{field:Oa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oa(t.field),op:Ra(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Oa(t.field),direction:ka(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.I||Jr(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=Da(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Da(e.endAt)),n}function xa(t){var e=ga(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){_r(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=Ca(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return function(t){return new ki(Pa(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return Jr(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Aa(n.startAt));var l=null;return n.endAt&&(l=Aa(n.endAt)),Mi(e,i,s,a,u,"F",c,l)}function Ca(t){return t?void 0!==t.unaryFilter?[Ma(t)]:void 0!==t.fieldFilter?[La(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Ca(t)})).reduce((function(t,e){return t.concat(e)})):Tr():[]}function Da(t){return{before:t.before,values:t.position}}function Aa(t){var e=!!t.before,n=t.values||[];return new Di(n,e)}function ka(t){return aa[t]}function Ra(t){return sa[t]}function Oa(t){return{fieldPath:t.canonicalString()}}function Pa(t){return Ur.fromServerFormat(t.fieldPath)}function La(t){return wi.create(Pa(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Tr()}}(t.fieldFilter.op),t.fieldFilter.value)}function Ma(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Pa(t.unaryFilter.field);return wi.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Pa(t.unaryFilter.field);return wi.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Pa(t.unaryFilter.field);return wi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Pa(t.unaryFilter.field);return wi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Tr()}}function Fa(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function Va(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Ua(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Ba(e)),e=qa(t.get(n),e);return Ba(e)}function qa(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Ba(t){return t+"\x01\x01"}function ja(t){var e=t.length;if(_r(e>=2),2===e)return _r("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Fr.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("\x01",o);switch((a<0||a>n)&&Tr(),t.charAt(a+1)){case"\x01":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=t.substring(o,a),i+="\0";break;case"\x11":i+=t.substring(o,a+1);break;default:Tr()}o=a+2}return new Fr(r)}var Za=function(t,e){this.seconds=t,this.nanoseconds=e},Ga=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Ga.store="owner",Ga.key="owner";var Ka=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Ka.store="mutationQueues",Ka.keyPath="userId";var za=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};za.store="mutations",za.keyPath="batchId",za.userMutationsIndex="userMutationsIndex",za.userMutationsKeyPath=["userId","batchId"];var Ha=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Ua(e)]},t.key=function(t,e,n){return[t,Ua(e),n]},t}();Ha.store="documentMutations",Ha.PLACEHOLDER=new Ha;var Wa=function(t,e){this.path=t,this.readTime=e},Ja=function(t,e){this.path=t,this.version=e},Qa=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Qa.store="remoteDocuments",Qa.readTimeIndex="readTimeIndex",Qa.readTimeIndexPath="readTime",Qa.collectionReadTimeIndex="collectionReadTimeIndex",Qa.collectionReadTimeIndexPath=["parentPath","readTime"];var Ya=function(t){this.byteSize=t};Ya.store="remoteDocumentGlobal",Ya.key="remoteDocumentGlobalKey";var $a=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};$a.store="targets",$a.keyPath="targetId",$a.queryTargetsIndexName="queryTargetsIndex",$a.queryTargetsKeyPath=["canonicalId","targetId"];var Xa=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Xa.store="targetDocuments",Xa.keyPath=["targetId","path"],Xa.documentTargetsIndex="documentTargetsIndex",Xa.documentTargetsKeyPath=["path","targetId"];var ts=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};ts.key="targetGlobalKey",ts.store="targetGlobal";var es=function(t,e){this.collectionId=t,this.parent=e};es.store="collectionParents",es.keyPath=["collectionId","parent"];var ns=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};ns.store="clientMetadata",ns.keyPath="clientId";var rs=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};rs.store="bundles",rs.keyPath="bundleId";var is=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};is.store="namedQueries",is.keyPath="name";var os=(0,dr.ev)((0,dr.ev)([],(0,dr.ev)((0,dr.ev)([],(0,dr.ev)((0,dr.ev)([],(0,dr.ev)((0,dr.ev)([],[Ka.store,za.store,Ha.store,Qa.store,$a.store,Ga.store,ts.store,Xa.store]),[ns.store])),[Ya.store])),[es.store])),[rs.store,is.store]),as="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ss=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),us=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},cs=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Tr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),ls=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new us,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new ds(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=gs(e.target.error);n.ft.reject(new ds(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new ds(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(br("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new ms(e)},t}(),hs=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t((0,i.z$)())&&wr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return br("SimpleDb","Removing database:",t),vs(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,i.z$)(),n=t._t(e),r=0<n&&n<10,o=t.Et(e),a=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return(0,dr.mG)(this,void 0,void 0,(function(){var e,n=this;return(0,dr.Jh)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(br("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new ds(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new vr(mr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new ds(t,n))},i.onupgradeneeded=function(t){br("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){br("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return(0,dr.mG)(this,void 0,void 0,(function(){var i,o,a,s,u;return(0,dr.Jh)(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,a=function(){var e,a,u,c,l;return(0,dr.Jh)(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,s.At(t)];case 2:return s.db=h.sent(),e=ls.open(s.db,t,i?"readonly":"readwrite",n),a=r(e).catch((function(t){return e.abort(t),cs.reject(t)})).toPromise(),u={},a.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(h.sent(),a),u)];case 4:return c=h.sent(),l="FirebaseError"!==c.name&&o<3,br("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),s.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},s=this,c.label=1;case 1:return[5,a()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),fs=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return vs(this.Pt.delete())},t}(),ds=function(t){function e(e,n){var r=this;return(r=t.call(this,mr.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,dr.ZT)(e,t),e}(vr);function ps(t){return"IndexedDbTransactionError"===t.name}var ms=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(br("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(br("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),vs(n)},t.prototype.add=function(t){return br("SimpleDb","ADD",this.store.name,t,t),vs(this.store.add(t))},t.prototype.get=function(t){var e=this;return vs(this.store.get(t)).next((function(n){return void 0===n&&(n=null),br("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return br("SimpleDb","DELETE",this.store.name,t),vs(this.store.delete(t))},t.prototype.count=function(){return br("SimpleDb","COUNT",this.store.name),vs(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ft=function(t,e){br("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.Ot=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.$t=function(t){var e=this.cursor({});return new cs((function(n,r){e.onerror=function(t){var e=gs(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new cs((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new fs(i),a=e(i.primaryKey,i.value,o);if(a instanceof cs){var s=a.catch((function(t){return o.done(),cs.reject(t)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return cs.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function vs(t){return new cs((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=gs(t.target.error);n(e)}}))}var ys=!1;function gs(t){var e=hs._t((0,i.z$)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new vr("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return ys||(ys=!0,setTimeout((function(){throw r}),0)),r}}return t}var bs=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return(0,dr.ZT)(e,t),e}(ss);function ws(t,e){var n=Sr(t);return hs.It(n.Mt,e)}var Es=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&bo(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&wo(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&wo(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Rr.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Wo())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Dr(this.mutations,t.mutations,(function(t,e){return Io(t,e)}))&&Dr(this.baseMutations,t.baseMutations,(function(t,e){return Io(t,e)}))},t}(),Is=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){_r(e.mutations.length===r.length);for(var i=zo(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),Ts=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=Rr.min()),void 0===o&&(o=Rr.min()),void 0===a&&(a=Br.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),_s=function(t){this.Lt=t};function Ss(t,e){if(e.document)return Ia(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=$r.fromSegments(e.noDocument.path),r=As(e.noDocument.readTime),i=pi.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=$r.fromSegments(e.unknownDocument.path);return r=As(e.unknownDocument.version),pi.newUnknownDocument(o,r)}return Tr()}function Ns(t,e,n){var r=xs(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:ma(t,e.key),fields:e.data.toProto().mapValue.fields,updateTime:ca(t,e.version.toTimestamp())}}(t.Lt,e),a=e.hasCommittedMutations;return new Qa(null,null,o,a,r,i)}if(e.isNoDocument()){var s=e.key.path.toArray(),u=Ds(e.version);return a=e.hasCommittedMutations,new Qa(null,new Wa(s,u),null,a,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=Ds(e.version);return new Qa(new Ja(c,l),null,null,!0,r,i)}return Tr()}function xs(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Cs(t){var e=new kr(t[0],t[1]);return Rr.fromTimestamp(e)}function Ds(t){var e=t.toTimestamp();return new Za(e.seconds,e.nanoseconds)}function As(t){var e=new kr(t.seconds,t.nanoseconds);return Rr.fromTimestamp(e)}function ks(t,e){for(var n=(e.baseMutations||[]).map((function(e){return _a(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var a=e.mutations.map((function(e){return _a(t.Lt,e)})),s=kr.fromMillis(e.localWriteTimeMs);return new Es(e.batchId,s,n,a)}function Rs(t){var e,n,r=As(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?As(t.lastLimboFreeSnapshotVersion):Rr.min();return void 0!==t.query.documents?(_r(1===(n=t.query).documents.length),e=Gi(Fi(ga(n.documents[0])))):e=function(t){return Gi(xa(t))}(t.query),new Ts(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Br.fromBase64String(t.resumeToken))}function Os(t,e){var n,r=Ds(e.snapshotVersion),i=Ds(e.lastLimboFreeSnapshotVersion);n=bi(e.target)?Sa(t.Lt,e.target):Na(t.Lt,e.target);var o=e.resumeToken.toBase64();return new $a(e.targetId,yi(e.target),r,o,e.sequenceNumber,i,n)}function Ps(t){var e=xa({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Ki(e,e.limit,"L"):e}var Ls=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Ms(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:As(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return Ms(t).put({bundleId:(n=e).id,createTime:Ds(fa(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Fs(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Ps(e.bundledQuery),readTime:As(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return Fs(t).put(function(t){return{name:t.name,readTime:Ds(fa(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Ms(t){return ws(t,rs.store)}function Fs(t){return ws(t,is.store)}var Vs=function(){function t(){this.Bt=new Us}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),cs.resolve()},t.prototype.getCollectionParents=function(t,e){return cs.resolve(this.Bt.getEntries(e))},t}(),Us=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Uo(Fr.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Uo(Fr.comparator)).toArray()},t}(),qs=function(){function t(){this.qt=new Us}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:Ua(i)};return Bs(t).put(o)}return cs.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Ar(e),""],!1,!0);return Bs(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(ja(o.parent))}return n}))},t}();function Bs(t){return ws(t,es.store)}var js={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Zs=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function Gs(t,e,n){var r=t.store(za.store),i=t.store(Ha.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.Ot({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){_r(1===s)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=Ha.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return cs.waitFor(o).next((function(){return c}))}function Ks(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Tr();e=t.noDocument}return JSON.stringify(e).length}Zs.DEFAULT_COLLECTION_PERCENTILE=10,Zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zs.DEFAULT=new Zs(41943040,Zs.DEFAULT_COLLECTION_PERCENTILE,Zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zs.DISABLED=new Zs(-1,0,0);var zs=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return _r(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ws(t).Ot({index:za.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Js(t),a=Ws(t);return a.add({}).next((function(s){_r("number"==typeof s);for(var u=new Es(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Ta(t.Lt,e)})),i=n.mutations.map((function(e){return Ta(t.Lt,e)}));return new za(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new Uo((function(t,e){return Cr(t.canonicalString(),e.canonicalString())})),f=0,d=r;f<d.length;f++){var p=d[f],m=Ha.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),l.push(a.put(c)),l.push(o.put(m,Ha.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Qt[s]=u.keys()})),cs.waitFor(l).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Ws(t).get(e).next((function(t){return t?(_r(t.userId===n.userId),ks(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?cs.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Ws(t).Ot({index:za.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(_r(e.batchId>=r),o=ks(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Ws(t).Ot({index:za.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ws(t).Nt(za.userMutationsIndex,n).next((function(t){return t.map((function(t){return ks(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Ha.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Js(t).Ot({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=ja(u);if(s===n.userId&&e.path.isEqual(l))return Ws(t).get(c).next((function(t){if(!t)throw Tr();_r(t.userId===n.userId),o.push(ks(n.R,t))}));a.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Uo(Cr),i=[];return e.forEach((function(e){var o=Ha.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=Js(t).Ot({range:a},(function(t,i,o){var a=t[0],s=t[1],u=t[2],c=ja(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),cs.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Ha.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new Uo(Cr);return Js(t).Ot({range:a},(function(t,e,o){var a=t[0],u=t[1],c=t[2],l=ja(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Wt(t,s)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Ws(t).get(e).next((function(t){if(null===t)throw Tr();_r(t.userId===n.userId),r.push(ks(n.R,t))})))})),cs.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return Gs(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),cs.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return cs.resolve();var r=IDBKeyRange.lowerBound(Ha.prefixForUser(e.userId)),i=[];return Js(t).Ot({range:r},(function(t,n,r){if(t[0]===e.userId){var o=ja(t[1]);i.push(o)}else r.done()})).next((function(){_r(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return Hs(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return Qs(t).get(this.userId).next((function(t){return t||new Ka(e.userId,-1,"")}))},t}();function Hs(t,e,n){var r=Ha.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Js(t).Ot({range:o,kt:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function Ws(t){return ws(t,za.store)}function Js(t){return ws(t,Ha.store)}function Qs(t){return ws(t,Ka.store)}var Ys=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),$s=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new Ys(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return Rr.fromTimestamp(new kr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return Xs(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return _r(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Xs(t).Ot((function(a,s){var u=Rs(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return cs.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return Xs(t).Ot((function(t,n){var r=Rs(n);e(r)}))},t.prototype.Xt=function(t){return tu(t).get(ts.key).next((function(t){return _r(null!==t),t}))},t.prototype.Zt=function(t,e){return tu(t).put(ts.key,e)},t.prototype.te=function(t,e){return Xs(t).put(Os(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=yi(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Xs(t).Ot({range:r,index:$a.queryTargetsIndexName},(function(t,n,r){var o=Rs(n);gi(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=eu(t);return e.forEach((function(e){var a=Ua(e.path);i.push(o.put(new Xa(n,a))),i.push(r.referenceDelegate.addReference(t,n,e))})),cs.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=eu(t);return cs.forEach(e,(function(e){var o=Ua(e.path);return cs.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=eu(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=eu(t),i=Wo();return r.Ot({range:n,kt:!0},(function(t,e,n){var r=ja(t[1]),o=new $r(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=Ua(e.path),r=IDBKeyRange.bound([n],[Ar(n)],!1,!0),i=0;return eu(t).Ot({index:Xa.documentTargetsIndex,kt:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return Xs(t).get(e).next((function(t){return t?Rs(t):null}))},t}();function Xs(t){return ws(t,$a.store)}function tu(t){return ws(t,ts.store)}function eu(t){return ws(t,Xa.store)}function nu(t){return(0,dr.mG)(this,void 0,void 0,(function(){return(0,dr.Jh)(this,(function(e){if(t.code!==mr.FAILED_PRECONDITION||t.message!==as)throw t;return br("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function ru(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Cr(n,i);return 0===a?Cr(r,o):a}var iu=function(){function t(t){this.ne=t,this.buffer=new Uo(ru),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();ru(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),ou=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;br("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return(0,dr.mG)(e,void 0,void 0,(function(){var e;return(0,dr.Jh)(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return ps(e=n.sent())?(br("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,nu(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),au=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return cs.resolve(pr.o);var r=new iu(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(br("LruGarbageCollector","Garbage collection skipped; disabled"),cs.resolve(js)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(br("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),js):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,a,s,u,c,l=this,h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>l.params.maximumSequenceNumbersToCollect?(br("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+e),r=l.params.maximumSequenceNumbersToCollect):r=e,a=Date.now(),l.nthSequenceNumber(t,r)})).next((function(r){return n=r,s=Date.now(),l.removeTargets(t,n,e)})).next((function(e){return i=e,u=Date.now(),l.removeOrphanedDocuments(t,n)})).next((function(t){return c=Date.now(),gr()<=o.in.DEBUG&&br("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-a)+"ms\n\tRemoved "+i+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-h)+"ms"),cs.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),su=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new au(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return uu(t,n)},t.prototype.removeReference=function(t,e,n){return uu(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return uu(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return Qs(t).$t((function(r){return Hs(t,r,e).next((function(t){return t&&(n=!0),cs.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(a,s){if(s<=e){var u=n._e(t,a).next((function(e){if(!e)return o++,r.getEntry(t,a).next((function(){return r.removeEntry(a),eu(t).delete([0,Ua(a.path)])}))}));i.push(u)}})).next((function(){return cs.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return uu(t,e)},t.prototype.we=function(t,e){var n,r=eu(t),i=pr.o;return r.Ot({index:Xa.documentTargetsIndex},(function(t,r){var o=t[0],a=(t[1],r.path),s=r.sequenceNumber;0===o?(i!==pr.o&&e(new $r(ja(n)),i),i=s,n=a):i=pr.o})).next((function(){i!==pr.o&&e(new $r(ja(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function uu(t,e){return eu(t).put(function(t,e){return new Xa(0,Ua(t.path),e)}(e,t.currentSequenceNumber))}var cu=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Pr(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype.isEmpty=function(){return Lr(this.inner)},t}(),lu=function(){function t(){this.changes=new cu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Rr.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:pi.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?cs.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),hu=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return pu(t).put(mu(e),n)},t.prototype.removeEntry=function(t,e){var n=pu(t),r=mu(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return pu(t).get(mu(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return pu(t).get(mu(e)).next((function(t){return{document:n.ye(e,t),size:Ks(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=jo();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=jo(),i=new Mo($r.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Ks(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return cs.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return pu(t).Ot({range:r},(function(t,e,r){for(var a=$r.fromSegments(t);o&&$r.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=jo(),o=e.path.length+1,a={};if(n.isEqual(Rr.min())){var s=e.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.toArray(),c=xs(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=Qa.collectionReadTimeIndex}return pu(t).Ot(a,(function(t,n,a){if(t.length===o){var s=Ss(r.R,n);e.path.isPrefixOf(s.key.path)?Ji(e,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new fu(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return du(t).get(Ya.key).next((function(t){return _r(!!t),t}))},t.prototype.me=function(t,e){return du(t).put(Ya.key,e)},t.prototype.ye=function(t,e){if(e){var n=Ss(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Rr.min()))return n}return pi.newInvalidDocument(t)},t}(),fu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new cu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return(0,dr.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Uo((function(t,e){return Cr(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,a){var s=e.Ae.get(o);if(a.document.isValidDocument()){var u=Ns(e.Ie.R,a.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Ks(u);r+=c-s,n.push(e.Ie.addEntry(t,o,u))}else if(r-=s,e.trackRemovals){var l=Ns(e.Ie.R,pi.newNoDocument(o,Rr.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),cs.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(lu);function du(t){return ws(t,Ya.store)}function pu(t){return ws(t,Qa.store)}function mu(t){return t.path.toArray()}var vu=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;_r(n<r&&n>=0&&r<=11);var o=new ls("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Ga.store)}(t),function(t){t.createObjectStore(Ka.store,{keyPath:Ka.keyPath}),t.createObjectStore(za.store,{keyPath:za.keyPath,autoIncrement:!0}).createIndex(za.userMutationsIndex,za.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Ha.store)}(t),yu(t),function(t){t.createObjectStore(Qa.store)}(t));var a=cs.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Xa.store),t.deleteObjectStore($a.store),t.deleteObjectStore(ts.store)}(t),yu(t)),a=a.next((function(){return function(t){var e=t.store(ts.store),n=new ts(0,0,Rr.min().toTimestamp(),0);return e.put(ts.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(za.store).Nt().next((function(n){t.deleteObjectStore(za.store),t.createObjectStore(za.store,{keyPath:za.keyPath,autoIncrement:!0}).createIndex(za.userMutationsIndex,za.userMutationsKeyPath,{unique:!0});var r=e.store(za.store),i=n.map((function(t){return r.put(t)}));return cs.waitFor(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(ns.store,{keyPath:ns.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(Ya.store)}(t),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Qa.store);e.createIndex(Qa.readTimeIndex,Qa.readTimeIndexPath,{unique:!1}),e.createIndex(Qa.collectionReadTimeIndex,Qa.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(t){t.createObjectStore(rs.store,{keyPath:rs.keyPath})}(t),function(t){t.createObjectStore(is.store,{keyPath:is.keyPath})}(t)}))),a},t.prototype.be=function(t){var e=0;return t.store(Qa.store).Ot((function(t,n){e+=Ks(n)})).next((function(){var n=new Ya(e);return t.store(Ya.store).put(Ya.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(Ka.store),r=t.store(za.store);return n.Nt().next((function(n){return cs.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(za.userMutationsIndex,i).next((function(r){return cs.forEach(r,(function(r){_r(r.userId===n.userId);var i=ks(e.R,r);return Gs(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(Xa.store),n=t.store(Qa.store);return t.store(ts.store).get(ts.key).next((function(t){var r=[];return n.Ot((function(n,i){var o=new Fr(n),a=function(t){return[0,Ua(t)]}(o);r.push(e.get(a).next((function(n){return n?cs.resolve():function(n){return e.put(new Xa(0,Ua(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return cs.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(es.store,{keyPath:es.keyPath});var n=e.store(es.store),r=new Us,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Ua(i)})}};return e.store(Qa.store).Ot({kt:!0},(function(t,e){var n=new Fr(t);return i(n.popLast())})).next((function(){return e.store(Ha.store).Ot({kt:!0},(function(t,e){t[0];var n=t[1],r=(t[2],ja(n));return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store($a.store);return n.Ot((function(t,r){var i=Rs(r),o=Os(e.R,i);return n.put(o)}))},t}();function yu(t){t.createObjectStore(Xa.store,{keyPath:Xa.keyPath}).createIndex(Xa.documentTargetsIndex,Xa.documentTargetsKeyPath,{unique:!0}),t.createObjectStore($a.store,{keyPath:$a.keyPath}).createIndex($a.queryTargetsIndexName,$a.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(ts.store)}var gu="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",bu=function(){function t(e,n,r,i,o,a,s,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new vr(mr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new su(this,i),this.Le=n+"main",this.R=new _s(u),this.Be=new hs(this.Le,11,new vu(this.R)),this.qe=new $s(this.referenceDelegate,this.R),this.Ut=new qs,this.Ue=function(t,e){return new hu(t,e)}(this.R,this.Ut),this.Qe=new Ls,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&wr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new vr(mr.FAILED_PRECONDITION,gu);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new pr(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return(0,dr.mG)(e,void 0,void 0,(function(){return(0,dr.Jh)(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return(0,dr.mG)(e,void 0,void 0,(function(){return(0,dr.Jh)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return(0,dr.mG)(e,void 0,void 0,(function(){return(0,dr.Jh)(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Eu(e).put(new ns(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(ps(e))return br("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return br("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return wu(t).get(Ga.key).next((function(t){return cs.resolve(e.tn(t))}))},t.prototype.en=function(t){return Eu(t).delete(this.clientId)},t.prototype.nn=function(){return(0,dr.mG)(this,void 0,void 0,(function(){var t,e,n,r,i=this;return(0,dr.Jh)(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=ws(t,ns.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return cs.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)r=n[e],this.Ke.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?cs.resolve(!0):wu(t).get(Ga.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new vr(mr.FAILED_PRECONDITION,gu);return!1}}return!(!e.networkEnabled||!e.inForeground)||Eu(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&br("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return(0,dr.mG)(this,void 0,void 0,(function(){var t=this;return(0,dr.Jh)(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Ga.store,ns.store],(function(e){var n=new bs(e,pr.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Eu(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return zs.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;br("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,os,(function(o){return i=new bs(o,r.Ne?r.Ne.next():pr.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw wr("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new vr(mr.FAILED_PRECONDITION,as);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return wu(t).get(Ga.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new vr(mr.FAILED_PRECONDITION,gu)}))},t.prototype.Ze=function(t){var e=new Ga(this.clientId,this.allowTabSynchronization,Date.now());return wu(t).put(Ga.key,e)},t.yt=function(){return hs.yt()},t.prototype.Xe=function(t){var e=this,n=wu(t);return n.get(Ga.key).next((function(t){return e.tn(t)?(br("IndexedDbPersistence","Releasing primary lease."),n.delete(Ga.key)):cs.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(wr("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("unload",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return br("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return wr("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){wr("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function wu(t){return ws(t,Ga.store)}function Eu(t){return ws(t,ns.store)}function Iu(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Tu=function(t,e){this.progress=t,this.wn=e},_u=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return $r.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):ji(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new $r(e)).next((function(t){var e=Go();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Go();return this.Ut.getCollectionParents(t,i).next((function(a){return cs.forEach(a,(function(a){var s=function(t,e){return new Li(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,a.child(i));return r.An(t,s,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c);null==l&&(l=pi.newInvalidDocument(c),r=r.insert(c,l)),wo(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){Ji(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=Wo(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof So&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),Su=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Wo(),i=Wo(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Nu=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Rr.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(a){var s=i.Cn(e,a);return(Vi(e)||Ui(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(gr()<=o.in.DEBUG&&br("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Wi(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return s.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new Uo(Qi(t));return e.forEach((function(e,r){Ji(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return gr()<=o.in.DEBUG&&br("QueryEngine","Using full collection scan to execute query:",Wi(e)),this.Sn.getDocumentsMatchingQuery(t,e,Rr.min())},t}(),xu=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Mo(Cr),this.kn=new cu((function(t){return yi(t)}),gi),this.On=Rr.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new _u(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},t}();function Cu(t,e,n,r){return new xu(t,e,n,r)}function Du(t,e){return(0,dr.mG)(this,void 0,void 0,(function(){var n,r,i,o;return(0,dr.Jh)(this,(function(a){switch(a.label){case 0:return n=Sr(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(a){return o=a,r=n.persistence.getMutationQueue(e),i=new _u(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],a=Wo(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var d=0,p=e;d<p.length;d++){var m=p[d];r.push(m.batchId);for(var v=0,y=m.mutations;v<y.length;v++){var g=y[v];a=a.add(g.key)}}return i.pn(t,a).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function Au(t,e){var n=Sr(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),a=cs.resolve();return o.forEach((function(t){a=a.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);_r(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),a.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function ku(t){var e=Sr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function Ru(t,e){var n=Sr(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var a=[];e.targetChanges.forEach((function(e,o){var s=i.get(o);if(s){a.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return _r(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,e)&&a.push(n.qe.updateTargetData(t,c))}}}));var s=jo();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),a.push(Ou(t,o,e.documentUpdates,r,void 0).next((function(t){s=t}))),!r.isEqual(Rr.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));a.push(u)}return cs.waitFor(a).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,s)})).next((function(){return s}))})).then((function(t){return n.Fn=i,t}))}function Ou(t,e,n,r,i){var o=Wo();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=jo();return n.forEach((function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(Rr.min())?(e.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):br("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function Pu(t,e){var n=Sr(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Lu(t,e){var n=Sr(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,cs.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new Ts(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function Mu(t,e,n){return(0,dr.mG)(this,void 0,void 0,(function(){var r,i,o,a;return(0,dr.Jh)(this,(function(s){switch(s.label){case 0:r=Sr(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!ps(a=s.sent()))throw a;return br("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}}))}))}function Fu(t,e,n){var r=Sr(t),i=Rr.min(),o=Wo();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=Sr(t),i=r.kn.get(n);return void 0!==i?cs.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,Gi(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Rr.min(),n?o:Wo())})).next((function(t){return{documents:t,Bn:o}}))}))}function Vu(t,e){var n=Sr(t),r=Sr(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function Uu(t){var e=Sr(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=Sr(t),i=jo(),o=xs(n),a=pu(e),s=IDBKeyRange.lowerBound(o,!0);return a.Ot({index:Qa.readTimeIndex,range:s},(function(t,e){var n=Ss(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:Cs(o)}}))}(e.$n,t,e.On)})).then((function(t){var n=t.wn,r=t.readTime;return e.On=r,n}))}function qu(t){return(0,dr.mG)(this,void 0,void 0,(function(){var e;return(0,dr.Jh)(this,(function(n){return[2,(e=Sr(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=pu(t),n=Rr.min();return e.Ot({index:Qa.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Cs(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.On=t}))]}))}))}function Bu(t,e,n,r){return(0,dr.mG)(this,void 0,void 0,(function(){var i,o,a,s,u,c,l,h,f,d;return(0,dr.Jh)(this,(function(p){switch(p.label){case 0:for(i=Sr(t),o=Wo(),a=jo(),s=zo(),u=0,c=n;u<c.length;u++)l=c[u],h=e.qn(l.metadata.name),l.document&&(o=o.add(h)),a=a.insert(h,e.Un(l)),s=s.insert(h,e.Qn(l.metadata.readTime));return f=i.$n.newChangeBuffer({trackRemovals:!0}),[4,Lu(i,function(t){return Gi(Fi(Fr.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return Ou(t,f,a,Rr.min(),s).next((function(e){return f.apply(t),e})).next((function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next((function(){return i.qe.addMatchingKeys(t,o,d.targetId)})).next((function(){return i.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}function ju(t,e,n){return void 0===n&&(n=Wo()),(0,dr.mG)(this,void 0,void 0,(function(){var r,i;return(0,dr.Jh)(this,(function(o){switch(o.label){case 0:return[4,Lu(t,Gi(Ps(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Sr(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=fa(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var a=r.withResumeToken(Br.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(a.targetId,a),i.qe.updateTargetData(t,a).next((function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.Qe.saveNamedQuery(t,e)}))}))]}}))}))}var Zu=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return cs.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:fa(n.createTime)}),cs.resolve()},t.prototype.getNamedQuery=function(t,e){return cs.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Ps(t.bundledQuery),readTime:fa(t.readTime)}}(e)),cs.resolve()},t}(),Gu=function(){function t(){this.Wn=new Uo(Ku.Gn),this.zn=new Uo(Ku.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Ku(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new Ku(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new $r(new Fr([])),r=new Ku(n,t),i=new Ku(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new $r(new Fr([])),n=new Ku(e,t),r=new Ku(e,t+1),i=Wo();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new Ku(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Ku=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return $r.comparator(t.key,e.key)||Cr(t.ns,e.ns)},t.Hn=function(t,e){return Cr(t.ns,e.ns)||$r.comparator(t.key,e.key)},t}(),zu=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Uo(Ku.Gn)}return t.prototype.checkEmpty=function(t){return cs.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new Es(i,e,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new Ku(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return cs.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return cs.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return cs.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return cs.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return cs.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Ku(e,0),i=new Ku(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),cs.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Uo(Cr);return e.forEach((function(t){var e=new Ku(t,0),i=new Ku(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),cs.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;$r.isDocumentKey(i)||(i=i.child(""));var o=new Ku(new $r(i),0),a=new Uo(Cr);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.ns)),!0)}),o),cs.resolve(this.us(a))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;_r(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return cs.forEach(e.mutations,(function(i){var o=new Ku(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Ku(e,0),r=this.rs.firstAfterOrEqual(n);return cs.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,cs.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Hu=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Mo($r.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return cs.resolve(n?n.document.clone():pi.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=jo();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():pi.newInvalidDocument(t))})),cs.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=jo(),i=new $r(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.document,l=u.readTime;if(!e.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||Ji(e,c)&&(r=r.insert(c.key,c.clone()))}return cs.resolve(r)},t.prototype.fs=function(t,e){return cs.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new Wu(this)},t.prototype.getSize=function(t){return cs.resolve(this.size)},t}(),Wu=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return(0,dr.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),cs.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(lu),Ju=function(){function t(t){this.persistence=t,this.ds=new cu((function(t){return yi(t)}),gi),this.lastRemoteSnapshotVersion=Rr.min(),this.highestTargetId=0,this.ws=0,this._s=new Gu,this.targetCount=0,this.ys=Ys.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),cs.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return cs.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return cs.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),cs.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),cs.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Ys(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,cs.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),cs.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,cs.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),cs.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return cs.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return cs.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),cs.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),cs.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),cs.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return cs.resolve(n)},t.prototype.containsKey=function(t,e){return cs.resolve(this._s.containsKey(e))},t}(),Qu=function(){function t(t,e){var n=this;this.gs={},this.Ne=new pr(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Ju(this),this.Ut=new Vs,this.Ue=function(t,e){return new Hu(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new _s(e),this.Qe=new Zu(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new zu(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;br("MemoryPersistence","Starting transaction:",t);var i=new Yu(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return cs.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),Yu=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return(0,dr.ZT)(e,t),e}(ss),$u=function(){function t(t){this.persistence=t,this.As=new Gu,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Tr()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),cs.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),cs.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),cs.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return cs.forEach(this.vs,(function(r){var i=$r.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return cs.or([function(){return cs.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Xu=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function tc(t,e){return"firestore_clients_"+t+"_"+e}function ec(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function nc(t,e){return"firestore_targets_"+t+"_"+e}Xu.UNAUTHENTICATED=new Xu(null),Xu.GOOGLE_CREDENTIALS=new Xu("google-credentials-uid"),Xu.FIRST_PARTY=new Xu("first-party-uid");var rc=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new vr(o.error.code,o.error.message)),a?new t(e,n,o.state,i):(wr("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),ic=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new vr(i.error.code,i.error.message)),o?new t(e,i.state,r):(wr("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),oc=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Qo(),a=0;i&&a<r.activeTargetIds.length;++a)i=Yr(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(wr("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),ac=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(wr("SharedClientState","Failed to parse online state: "+e),null)},t}(),sc=function(){function t(){this.activeTargetIds=Qo()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),uc=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Mo(Cr),this.started=!1,this.Os=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=tc(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new sc),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,dr.mG)(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,s,u,c,l,h=this;return(0,dr.Jh)(this,(function(f){switch(f.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(tc(this.persistenceKey,r)))&&(o=oc.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(a=this.storage.getItem(this.Us))&&(s=this.js(a))&&this.Ws(s),u=0,c=this.Os;u<c.length;u++)l=c[u],this.Fs(l);return this.Os=[],this.window.addEventListener("unload",(function(){return h.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(nc(this.persistenceKey,t));if(n){var r=ic.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(nc(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return br("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){br("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){br("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(br("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void wr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return(0,dr.mG)(e,void 0,void 0,(function(){var t,e,r,i,o,a;return(0,dr.Jh)(this,(function(s){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(a=function(t){var e=pr.o;if(null!=t)try{var n=JSON.parse(t);_r("number"==typeof n),e=n}catch(t){wr("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==pr.o&&this.sequenceNumberHandler(a);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new rc(this.currentUser,t,e,n),i=ec(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=ec(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=nc(this.persistenceKey,t),i=new ic(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return oc.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return rc.Vs(new Xu(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return ic.Vs(r,e)},t.prototype.js=function(t){return ac.Vs(t)},t.prototype.ii=function(t){return(0,dr.mG)(this,void 0,void 0,(function(){return(0,dr.Jh)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(br("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.syncEngine.hi(a,s).then((function(){n.ks=r}))},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Qo();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),cc=function(){function t(){this.li=new sc,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new sc,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),lc=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),hc=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){br("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){br("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),fc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},dc=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),pc=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return(0,dr.ZT)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise((function(i,o){var a=new fr;a.listenOnce(ur.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case sr.NO_ERROR:var e=a.getResponseJson();br("Connection","XHR received:",JSON.stringify(e)),i(e);break;case sr.TIMEOUT:br("Connection",'RPC "'+t+'" timed out'),o(new vr(mr.DEADLINE_EXCEEDED,"Request time out"));break;case sr.HTTP_ERROR:var n=a.getStatus();if(br("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(mr).indexOf(e)>=0?e:mr.UNKNOWN}(r.status);o(new vr(s,r.message))}else o(new vr(mr.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new vr(mr.UNAVAILABLE,"Connection failed."));break;default:Tr()}}finally{br("Connection",'RPC "'+t+'" completed.')}}));var s=JSON.stringify(r);a.send(e,"POST",s,n,15)}))},e.prototype.$i=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=or(),o=ar(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(a.initMessageHeaders,e),(0,i.uI)()||(0,i.b$)()||(0,i.d)()||(0,i.w1)()||(0,i.Mn)()||(0,i.ru)()||(a.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");br("Connection","Creating WebChannel: "+s,a);var u=r.createWebChannel(s,a),c=!1,l=!1,h=new dc({Ei:function(t){l?br("Connection","Not sending because WebChannel is closed:",t):(c||(br("Connection","Opening WebChannel transport."),u.open(),c=!0),br("Connection","WebChannel sending:",t),u.send(t))},Ti:function(){return u.close()}}),f=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(u,hr.EventType.OPEN,(function(){l||br("Connection","WebChannel transport opened.")})),f(u,hr.EventType.CLOSE,(function(){l||(l=!0,br("Connection","WebChannel transport closed"),h.Vi())})),f(u,hr.EventType.ERROR,(function(t){l||(l=!0,Er("Connection","WebChannel transport errored:",t),h.Vi(new vr(mr.UNAVAILABLE,"The operation could not be completed")))})),f(u,hr.EventType.MESSAGE,(function(t){var e;if(!l){var n=t.data[0];_r(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){br("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=Do[t];if(void 0!==e)return Lo(e)}(o),s=i.message;void 0===a&&(a=mr.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),l=!0,h.Vi(new vr(a,s)),u.close()}else br("Connection","WebChannel received:",n),h.Si(n)}})),f(o,cr.STAT_EVENT,(function(t){t.stat===lr.PROXY?br("Connection","Detected buffering proxy"):t.stat===lr.NOPROXY&&br("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Pi()}),0),h},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);br("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then((function(t){return br("RestConnection","Received: ",t),t}),(function(e){throw Er("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.3.2",t["X-Firebase-GMPID"]=this.databaseInfo.appId,t["Content-Type"]="text/plain",e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=fc[t];return this.Di+"/v1/"+e+":"+n},t}());function mc(){return"undefined"!=typeof window?window:null}function vc(){return"undefined"!=typeof document?document:null}function yc(t){return new ua(t,!0)}var gc=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&br("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Qi=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),bc=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new gc(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return(0,dr.mG)(this,void 0,void 0,(function(){return(0,dr.Jh)(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return(0,dr.mG)(this,void 0,void 0,(function(){return(0,dr.Jh)(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return(0,dr.mG)(this,void 0,void 0,(function(){return(0,dr.Jh)(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===mr.RESOURCE_EXHAUSTED?(wr(e.toString()),wr("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===mr.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new vr(mr.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return(0,dr.mG)(t,void 0,void 0,(function(){return(0,dr.Jh)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return br("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(br("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),wc=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return(0,dr.ZT)(e,t),e.prototype.wr=function(t){return this.Hi.$i("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Tr()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(_r(void 0===e||"string"==typeof e),Br.fromBase64String(e||"")):(_r(void 0===e||e instanceof Uint8Array),Br.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(s=e.targetChange.cause)&&function(t){var e=void 0===t.code?mr.UNKNOWN:Lo(t.code);return new vr(e,t.message||"")}(s);n=new ea(r,i,o,a||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=va(t,r.document.name),o=fa(r.document.updateTime);var s=new fi({mapValue:{fields:r.document.fields}}),u=(a=pi.newFoundDocument(i,o,s),r.targetIds||[]),c=r.removedTargetIds||[];n=new Xo(u,c,a.key,a)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=va(t,r.document),o=r.readTime?fa(r.readTime):Rr.min(),s=pi.newNoDocument(i,o),a=r.removedTargetIds||[],n=new Xo([],a,s.key,s);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=va(t,r.document),o=r.removedTargetIds||[],n=new Xo([],o,i,null);else{if(!("filter"in e))return Tr();e.filter;var l=e.filter;l.targetId,r=l.count||0,i=new Oo(r),o=l.targetId,n=new ta(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Rr.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Rr.min():e.readTime?fa(e.readTime):Rr.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=ba(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=bi(r)?{documents:Sa(t,r)}:{query:Na(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=la(t,e.resumeToken):e.snapshotVersion.compareTo(Rr.min())>0&&(n.readTime=ca(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Tr()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=ba(this.R),e.removeTarget=t,this.cr(e)},e}(bc),Ec=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return(0,dr.ZT)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.$i("Write",t)},e.prototype.onMessage=function(t){if(_r(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(_r(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?fa(t.updateTime):fa(e);return n.isEqual(Rr.min())&&(n=fa(e)),new mo(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=fa(t.commitTime);return this.listener.Tr(n,e)}return _r(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=ba(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Ta(e.R,t)}))};this.cr(n)},e}(bc),Ic=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,dr.ZT)(e,t),e.prototype.br=function(){if(this.Rr)throw new vr(mr.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw t.code===mr.UNAUTHENTICATED&&r.credentials.invalidateToken(),t}))},e.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Oi(t,e,n,i)})).catch((function(t){throw t.code===mr.UNAUTHENTICATED&&r.credentials.invalidateToken(),t}))},e.prototype.terminate=function(){this.Rr=!1},e}((function(){})),Tc=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(wr(e),this.Vr=!1):br("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),_c=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return(0,dr.mG)(o,void 0,void 0,(function(){return(0,dr.Jh)(this,(function(t){switch(t.label){case 0:return Oc(this)?(br("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,dr.mG)(this,void 0,void 0,(function(){var e;return(0,dr.Jh)(this,(function(n){switch(n.label){case 0:return(e=Sr(t)).$r.add(4),[4,Nc(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,Sc(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new Tc(n,r)};function Sc(t){return(0,dr.mG)(this,void 0,void 0,(function(){var e,n;return(0,dr.Jh)(this,(function(r){switch(r.label){case 0:if(!Oc(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Nc(t){return(0,dr.mG)(this,void 0,void 0,(function(){var e,n;return(0,dr.Jh)(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function xc(t,e){var n=Sr(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),Rc(n)?kc(n):Wc(n).er()&&Dc(n,e))}function Cc(t,e){var n=Sr(t),r=Wc(n);n.Or.delete(e),r.er()&&Ac(n,e),0===n.Or.size&&(r.er()?r.ir():Oc(n)&&n.Br.set("Unknown"))}function Dc(t,e){t.qr.U(e.targetId),Wc(t).mr(e)}function Ac(t,e){t.qr.U(e),Wc(t).yr(e)}function kc(t){t.qr=new ra({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),Wc(t).start(),t.Br.Sr()}function Rc(t){return Oc(t)&&!Wc(t).tr()&&t.Or.size>0}function Oc(t){return 0===Sr(t).$r.size}function Pc(t){t.qr=void 0}function Lc(t){return(0,dr.mG)(this,void 0,void 0,(function(){return(0,dr.Jh)(this,(function(e){return t.Or.forEach((function(e,n){Dc(t,e)})),[2]}))}))}function Mc(t,e){return(0,dr.mG)(this,void 0,void 0,(function(){return(0,dr.Jh)(this,(function(n){return Pc(t),Rc(t)?(t.Br.Nr(e),kc(t)):t.Br.set("Unknown"),[2]}))}))}function Fc(t,e,n){return(0,dr.mG)(this,void 0,void 0,(function(){var r,i,o;return(0,dr.Jh)(this,(function(a){switch(a.label){case 0:if(t.Br.set("Online"),!(e instanceof ea&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return(0,dr.mG)(this,void 0,void 0,(function(){var n,r,i,o;return(0,dr.Jh)(this,(function(a){switch(a.label){case 0:n=e.cause,r=0,i=e.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],t.Or.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),t.Or.delete(o),t.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),br("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Vc(t,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Xo?t.qr.X(e):e instanceof ta?t.qr.rt(e):t.qr.et(e),n.isEqual(Rr.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,ku(t.localStore)];case 8:return i=a.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Or.get(r);i&&t.Or.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.Or.get(e);if(n){t.Or.set(e,n.withResumeToken(Br.EMPTY_BYTE_STRING,n.snapshotVersion)),Ac(t,e);var r=new Ts(n.target,e,1,n.sequenceNumber);Dc(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return br("RemoteStore","Failed to raise snapshot:",o=a.sent()),[4,Vc(t,o)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function Vc(t,e,n){return(0,dr.mG)(this,void 0,void 0,(function(){var r=this;return(0,dr.Jh)(this,(function(i){switch(i.label){case 0:if(!ps(e))throw e;return t.$r.add(1),[4,Nc(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return ku(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return(0,dr.mG)(r,void 0,void 0,(function(){return(0,dr.Jh)(this,(function(e){switch(e.label){case 0:return br("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,Sc(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Uc(t,e){return e().catch((function(n){return Vc(t,n,e)}))}function qc(t){return(0,dr.mG)(this,void 0,void 0,(function(){var e,n,r,i,o;return(0,dr.Jh)(this,(function(a){switch(a.label){case 0:e=Sr(t),n=Jc(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,a.label=1;case 1:if(!function(t){return Oc(t)&&t.kr.length<10}(e))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,Pu(e.localStore,r)];case 3:return null===(i=a.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Jc(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=a.sent(),[4,Vc(e,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return Bc(e)&&jc(e),[2]}}))}))}function Bc(t){return Oc(t)&&!Jc(t).tr()&&t.kr.length>0}function jc(t){Jc(t).start()}function Zc(t){return(0,dr.mG)(this,void 0,void 0,(function(){return(0,dr.Jh)(this,(function(e){return Jc(t).Ar(),[2]}))}))}function Gc(t){return(0,dr.mG)(this,void 0,void 0,(function(){var e,n,r,i;return(0,dr.Jh)(this,(function(o){for(e=Jc(t),n=0,r=t.kr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function Kc(t,e,n){return(0,dr.mG)(this,void 0,void 0,(function(){var r,i;return(0,dr.Jh)(this,(function(o){switch(o.label){case 0:return r=t.kr.shift(),i=Is.from(r,e,n),[4,Uc(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,qc(t)];case 2:return o.sent(),[2]}}))}))}function zc(t,e){return(0,dr.mG)(this,void 0,void 0,(function(){return(0,dr.Jh)(this,(function(n){switch(n.label){case 0:return e&&Jc(t).pr?[4,function(t,e){return(0,dr.mG)(this,void 0,void 0,(function(){var n,r;return(0,dr.Jh)(this,(function(i){switch(i.label){case 0:return Po(r=e.code)&&r!==mr.ABORTED?(n=t.kr.shift(),Jc(t).sr(),[4,Uc(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,qc(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Bc(t)&&jc(t),[2]}}))}))}function Hc(t,e){return(0,dr.mG)(this,void 0,void 0,(function(){var n;return(0,dr.Jh)(this,(function(r){switch(r.label){case 0:return n=Sr(t),e?(n.$r.delete(2),[4,Sc(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,Nc(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Wc(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Sr(t);return r.br(),new wc(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Lc.bind(null,t),Ri:Mc.bind(null,t),_r:Fc.bind(null,t)}),t.Mr.push((function(n){return(0,dr.mG)(e,void 0,void 0,(function(){return(0,dr.Jh)(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Rc(t)?kc(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Pc(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function Jc(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=Sr(t);return r.br(),new Ec(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Zc.bind(null,t),Ri:zc.bind(null,t),Ir:Gc.bind(null,t),Tr:Kc.bind(null,t)}),t.Mr.push((function(n){return(0,dr.mG)(e,void 0,void 0,(function(){return(0,dr.Jh)(this,(function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,qc(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(br("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Qr}var Qc=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new us,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new vr(mr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Yc(t,e){if(wr("AsyncQueue",e+": "+t),ps(t))return new vr(mr.UNAVAILABLE,e+": "+t);throw t}var $c=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||$r.comparator(e.key,n.key)}:function(t,e){return $r.comparator(t.key,e.key)},this.keyedMap=Go(),this.sortedSet=new Mo(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Xc=function(){function t(){this.Kr=new Mo($r.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):Tr():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),tl=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,$c.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&zi(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),el=function(){this.Wr=void 0,this.listeners=[]},nl=function(){this.queries=new cu((function(t){return Hi(t)}),zi),this.onlineState="Unknown",this.Gr=new Set};function rl(t,e){return(0,dr.mG)(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return(0,dr.Jh)(this,(function(c){switch(c.label){case 0:if(n=Sr(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new el),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Wr=c.sent(),[3,4];case 3:return s=c.sent(),u=Yc(s,"Initialization of query '"+Wi(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&sl(n),[2]}}))}))}function il(t,e){return(0,dr.mG)(this,void 0,void 0,(function(){var n,r,i,o,a;return(0,dr.Jh)(this,(function(s){return n=Sr(t),r=e.query,i=!1,(o=n.queries.get(r))&&(a=o.listeners.indexOf(e))>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function ol(t,e){for(var n=Sr(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,l=u.listeners;c<l.length;c++)l[c].Hr(a)&&(r=!0);u.Wr=a}}r&&sl(n)}function al(t,e,n){var r=Sr(t),i=r.queries.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(e)}function sl(t){t.Gr.forEach((function(t){t.next()}))}var ul=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new tl(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=tl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),cl=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),ll=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return va(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Ia(this.R,t.document,!1):pi.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return fa(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=hl(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new ll(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],l=(e.get(c)||Wo()).add(a);e.set(c,l)}}return e},t.prototype.complete=function(){return(0,dr.mG)(this,void 0,void 0,(function(){var t,e,n,r,i;return(0,dr.Jh)(this,(function(o){switch(o.label){case 0:return[4,Bu(this.localStore,new ll(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,ju(this.localStore,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Tu(Object.assign({},this.progress),t))]}}))}))}}();function hl(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var fl=function(t){this.key=t},dl=function(t){this.key=t},pl=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Wo(),this.mutatedKeys=Wo(),this.lo=Qi(t),this.fo=new $c(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Xc,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=Vi(this.query)&&i.size===this.query.limit?i.last():null,c=Ui(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=Ji(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(a=a.add(h),o=d?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),Vi(this.query)||Ui(this.query))for(;a.size>this.query.limit;){var l=Vi(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Tr()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var a=e?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new tl(this.query,t.fo,i,o,t.mutatedKeys,0===s,u,!1),To:a}:{To:a}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Xc,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Wo(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new dl(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new fl(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Wo();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return tl.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),ml=function(t,e,n){this.query=t,this.targetId=e,this.view=n},vl=function(t){this.key=t,this.bo=!1},yl=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new cu((function(t){return Hi(t)}),zi),this.Vo=new Map,this.So=new Set,this.Do=new Mo($r.comparator),this.Co=new Map,this.No=new Gu,this.xo={},this.Fo=new Map,this.ko=Ys.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),t}();function gl(t,e){return(0,dr.mG)(this,void 0,void 0,(function(){var n,r,i,o,a,s;return(0,dr.Jh)(this,(function(u){switch(u.label){case 0:return n=Hl(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,Lu(n.localStore,Gi(e))];case 2:return a=u.sent(),s=n.sharedClientState.addLocalQueryTarget(a.targetId),r=a.targetId,[4,bl(n,e,r,"current"===s)];case 3:i=u.sent(),n.isPrimaryClient&&xc(n.remoteStore,a),u.label=4;case 4:return[2,i]}}))}))}function bl(t,e,n,r){return(0,dr.mG)(this,void 0,void 0,(function(){var i,o,a,s,u,c;return(0,dr.Jh)(this,(function(l){switch(l.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return(0,dr.mG)(this,void 0,void 0,(function(){var i,o,a;return(0,dr.Jh)(this,(function(s){switch(s.label){case 0:return(i=e.view._o(n)).Nn?[4,Fu(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),a=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Rl(t,e.targetId,a.To),a.snapshot)]}}))}))}(t,e,n,r)},[4,Fu(t.localStore,e,!0)];case 1:return i=l.sent(),o=new pl(e,i.Bn),a=o._o(i.documents),s=$o.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(a,t.isPrimaryClient,s),Rl(t,n,u.To),c=new ml(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}}))}))}function wl(t,e){return(0,dr.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,dr.Jh)(this,(function(o){switch(o.label){case 0:return n=Sr(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!zi(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Mu(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),Cc(n.remoteStore,r.targetId),Al(n,r.targetId)})).catch(nu)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Al(n,r.targetId),[4,Mu(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function El(t,e,n){return(0,dr.mG)(this,void 0,void 0,(function(){var r,i,o,a;return(0,dr.Jh)(this,(function(s){switch(s.label){case 0:r=Wl(t),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,function(t,e){var n,r=Sr(t),i=kr.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Wo());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],l=Eo(c,n.get(c.key));null!=l&&a.push(new So(c.key,l,di(l.toProto().mapValue),vo.exists(!0)))}return r._n.addMutationBatch(t,i,a,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return i=s.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Mo(Cr)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Ll(r,i.changes)];case 3:return s.sent(),[4,qc(r.remoteStore)];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),a=Yc(o,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}function Il(t,e){return(0,dr.mG)(this,void 0,void 0,(function(){var n,r;return(0,dr.Jh)(this,(function(i){switch(i.label){case 0:n=Sr(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Ru(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(_r(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?_r(r.bo):t.removedDocuments.size>0&&(_r(r.bo),r.bo=!1))})),[4,Ll(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,nu(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Tl(t,e,n){var r=Sr(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Sr(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&sl(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function _l(t,e,n){return(0,dr.mG)(this,void 0,void 0,(function(){var r,i,o,a,s,u;return(0,dr.Jh)(this,(function(c){switch(c.label){case 0:return(r=Sr(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(a=(a=new Mo($r.comparator)).insert(o,pi.newNoDocument(o,Rr.min())),s=Wo().add(o),u=new Yo(Rr.min(),new Map,new Uo(Cr),a,s),[4,Il(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Pl(r),[3,4];case 2:return[4,Mu(r.localStore,e,!1).then((function(){return Al(r,e,n)})).catch(nu)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function Sl(t,e){return(0,dr.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,dr.Jh)(this,(function(o){switch(o.label){case 0:n=Sr(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Au(n.localStore,e)];case 2:return i=o.sent(),Dl(n,r,null),Cl(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Ll(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,nu(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Nl(t,e,n){return(0,dr.mG)(this,void 0,void 0,(function(){var r,i;return(0,dr.Jh)(this,(function(o){switch(o.label){case 0:r=Sr(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Sr(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return _r(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),Dl(r,e,n),Cl(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Ll(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,nu(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function xl(t,e){return(0,dr.mG)(this,void 0,void 0,(function(){var n,r,i,o,a;return(0,dr.Jh)(this,(function(s){switch(s.label){case 0:Oc((n=Sr(t)).remoteStore)||br("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,function(t){var e=Sr(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=s.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=s.sent(),a=Yc(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}}))}))}function Cl(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function Dl(t,e,n){var r=Sr(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Al(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||kl(t,e)}))}function kl(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Cc(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Pl(t))}function Rl(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof fl?(t.No.addReference(o.key,e),Ol(t,o)):o instanceof dl?(br("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||kl(t,o.key)):Tr()}}function Ol(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(br("SyncEngine","New document in limbo: "+n),t.So.add(r),Pl(t))}function Pl(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new $r(Fr.fromString(e)),r=t.ko.next();t.Co.set(r,new vl(n)),t.Do=t.Do.insert(n,r),xc(t.remoteStore,new Ts(Gi(Fi(n.path)),r,2,pr.o))}}function Ll(t,e,n){return(0,dr.mG)(this,void 0,void 0,(function(){var r,i,o,a;return(0,dr.Jh)(this,(function(s){switch(s.label){case 0:return r=Sr(t),i=[],o=[],a=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,s){a.push(r.$o(s,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Su.Pn(s.targetId,t);o.push(e)}})))})),[4,Promise.all(a)]);case 1:return s.sent(),r.vo._r(i),[4,function(t,e){return(0,dr.mG)(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l;return(0,dr.Jh)(this,(function(h){switch(h.label){case 0:n=Sr(t),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return cs.forEach(e,(function(e){return cs.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return cs.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return h.sent(),[3,4];case 3:if(!ps(r=h.sent()))throw r;return br("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=o[i],s=a.targetId,a.fromCache||(u=n.Fn.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),n.Fn=n.Fn.insert(s,l));return[2]}}))}))}(r.localStore,o)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function Ml(t,e){return(0,dr.mG)(this,void 0,void 0,(function(){var n,r;return(0,dr.Jh)(this,(function(i){switch(i.label){case 0:return(n=Sr(t)).currentUser.isEqual(e)?[3,3]:(br("SyncEngine","User change. New user:",e.toKey()),[4,Du(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach((function(t){t.forEach((function(t){t.reject(new vr(mr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Ll(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Fl(t,e){var n=Sr(t),r=n.Co.get(e);if(r&&r.bo)return Wo().add(r.key);var i=Wo(),o=n.Vo.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function Vl(t,e){return(0,dr.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,dr.Jh)(this,(function(o){switch(o.label){case 0:return[4,Fu((n=Sr(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Rl(n,e.targetId,i.To),i)]}}))}))}function Ul(t){return(0,dr.mG)(this,void 0,void 0,(function(){var e;return(0,dr.Jh)(this,(function(n){return[2,Uu((e=Sr(t)).localStore).then((function(t){return Ll(e,t)}))]}))}))}function ql(t,e,n,r){return(0,dr.mG)(this,void 0,void 0,(function(){var i,o;return(0,dr.Jh)(this,(function(a){switch(a.label){case 0:return[4,function(t,e){var n=Sr(t),r=Sr(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):cs.resolve(null)}))}))}((i=Sr(t)).localStore,e)];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,qc(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Dl(i,e,r||null),Cl(i,e),function(t,e){Sr(Sr(t)._n).Gt(e)}(i.localStore,e)):Tr(),a.label=4;case 4:return[4,Ll(i,o)];case 5:return a.sent(),[3,7];case 6:br("SyncEngine","Cannot apply mutation batch with id: "+e),a.label=7;case 7:return[2]}}))}))}function Bl(t,e){return(0,dr.mG)(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return(0,dr.Jh)(this,(function(l){switch(l.label){case 0:return Hl(n=Sr(t)),Wl(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,jl(n,r.toArray())]);case 1:return i=l.sent(),n.Oo=!0,[4,Hc(n.remoteStore,!0)];case 2:for(l.sent(),o=0,a=i;o<a.length;o++)s=a[o],xc(n.remoteStore,s);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then((function(){return Al(n,e),Mu(n.localStore,e,!0)})),Cc(n.remoteStore,e)})),[4,c]);case 4:return l.sent(),[4,jl(n,u)];case 5:return l.sent(),function(t){var e=Sr(t);e.Co.forEach((function(t,n){Cc(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new Mo($r.comparator)}(n),n.Oo=!1,[4,Hc(n.remoteStore,!1)];case 6:l.sent(),l.label=7;case 7:return[2]}}))}))}function jl(t,e,n){return(0,dr.mG)(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,h,f,d,p,m;return(0,dr.Jh)(this,(function(v){switch(v.label){case 0:n=Sr(t),r=[],i=[],o=0,a=e,v.label=1;case 1:return o<a.length?(s=a[o],u=void 0,(c=n.Vo.get(s))&&0!==c.length?[4,Lu(n.localStore,Gi(c[0]))]:[3,7]):[3,13];case 2:u=v.sent(),l=0,h=c,v.label=3;case 3:return l<h.length?(f=h[l],d=n.Po.get(f),[4,Vl(n,d)]):[3,6];case 4:(p=v.sent()).snapshot&&i.push(p.snapshot),v.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Vu(n.localStore,s)];case 8:return m=v.sent(),[4,Lu(n.localStore,m)];case 9:return u=v.sent(),[4,bl(n,Zl(m),s,!1)];case 10:v.sent(),v.label=11;case 11:r.push(u),v.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function Zl(t){return Mi(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Gl(t){var e=Sr(t);return Sr(Sr(e.localStore).persistence).fn()}function Kl(t,e,n,r){return(0,dr.mG)(this,void 0,void 0,(function(){var i,o,a;return(0,dr.Jh)(this,(function(s){switch(s.label){case 0:return(i=Sr(t)).Oo?(br("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Uu(i.localStore)];case 3:return o=s.sent(),a=Yo.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Ll(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,Mu(i.localStore,e,!0)];case 6:return s.sent(),Al(i,e,r),[3,8];case 7:Tr(),s.label=8;case 8:return[2]}}))}))}function zl(t,e,n){return(0,dr.mG)(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,h,f;return(0,dr.Jh)(this,(function(d){switch(d.label){case 0:if(!(r=Hl(t)).Oo)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?(a=o[i],r.Vo.has(a)?(br("SyncEngine","Adding an already active target "+a),[3,5]):[4,Vu(r.localStore,a)]):[3,6];case 2:return s=d.sent(),[4,Lu(r.localStore,s)];case 3:return u=d.sent(),[4,bl(r,Zl(s),u.targetId,!1)];case 4:d.sent(),xc(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return(0,dr.Jh)(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Mu(r.localStore,t,!1).then((function(){Cc(r.remoteStore,t),Al(r,t)})).catch(nu)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,h=n,d.label=7;case 7:return l<h.length?(f=h[l],[5,c(f)]):[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function Hl(t){var e=Sr(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Il.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Fl.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_l.bind(null,e),e.vo._r=ol.bind(null,e.eventManager),e.vo.Mo=al.bind(null,e.eventManager),e}function Wl(t){var e=Sr(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Sl.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Nl.bind(null,e),e}var Jl=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,dr.mG)(this,void 0,void 0,(function(){return(0,dr.Jh)(this,(function(e){switch(e.label){case 0:return this.R=yc(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return Cu(this.persistence,new Nu,t.initialUser,this.R)},t.prototype.qo=function(t){return new Qu($u.bs,this.R)},t.prototype.Bo=function(t){return new cc},t.prototype.terminate=function(){return(0,dr.mG)(this,void 0,void 0,(function(){return(0,dr.Jh)(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),Ql=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,dr.ZT)(e,t),e.prototype.initialize=function(e){return(0,dr.mG)(this,void 0,void 0,(function(){return(0,dr.Jh)(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,qu(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,Wl(this.Ko.syncEngine)];case 4:return n.sent(),[4,qc(this.Ko.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Qo=function(t){return Cu(this.persistence,new Nu,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new ou(e,t.asyncQueue)},e.prototype.qo=function(t){var e=Iu(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Zs.withCacheSize(this.cacheSizeBytes):Zs.DEFAULT;return new bu(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,mc(),vc(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new cc},e}(Jl),Yl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,dr.ZT)(e,t),e.prototype.initialize=function(e){return(0,dr.mG)(this,void 0,void 0,(function(){var n,r=this;return(0,dr.Jh)(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof uc?(this.sharedClientState.syncEngine={ui:ql.bind(null,n),ai:Kl.bind(null,n),hi:zl.bind(null,n),fn:Gl.bind(null,n),ci:Ul.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return(0,dr.mG)(r,void 0,void 0,(function(){return(0,dr.Jh)(this,(function(e){switch(e.label){case 0:return[4,Bl(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=mc();if(!uc.yt(e))throw new vr(mr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Iu(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new uc(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Ql),$l=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,dr.mG)(this,void 0,void 0,(function(){var n=this;return(0,dr.Jh)(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Tl(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Ml.bind(null,this.syncEngine),[4,Hc(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new nl},t.prototype.createDatastore=function(t){var e,n=yc(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new pc(e));return function(t,e,n){return new Ic(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,a=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Tl(a.syncEngine,t,0)},o=hc.yt()?new hc:new lc,new _c(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,a){var s=new yl(t,e,n,r,i,o);return a&&(s.Oo=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return(0,dr.mG)(this,void 0,void 0,(function(){var e;return(0,dr.Jh)(this,(function(n){switch(n.label){case 0:return e=Sr(t),br("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,Nc(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}();var Xl=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),th=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new us,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return(0,dr.mG)(this,void 0,void 0,(function(){return(0,dr.Jh)(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return(0,dr.mG)(this,void 0,void 0,(function(){return(0,dr.Jh)(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return(0,dr.mG)(this,void 0,void 0,(function(){var t,e,n,r;return(0,dr.Jh)(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new cl(JSON.parse(r),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return(0,dr.mG)(this,void 0,void 0,(function(){var t,e;return(0,dr.Jh)(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return(0,dr.mG)(this,void 0,void 0,(function(){var e;return(0,dr.Jh)(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return(0,dr.mG)(this,void 0,void 0,(function(){var t,e;return(0,dr.Jh)(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return(0,dr.mG)(this,void 0,void 0,(function(){var e,n=this;return(0,dr.Jh)(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new vr(mr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,dr.mG)(this,void 0,void 0,(function(){var n,r,i,o,a,s;return(0,dr.Jh)(this,(function(u){switch(u.label){case 0:return n=Sr(t),r=ba(n.R)+"/documents",i={documents:e.map((function(t){return ma(n.R,t)}))},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return o=u.sent(),a=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){_r(!!e.found),e.found.name,e.found.updateTime;var n=va(t,e.found.name),r=fa(e.found.updateTime),i=new fi({mapValue:{fields:e.found.fields}});return pi.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){_r(!!e.missing),_r(!!e.readTime);var n=va(t,e.missing),r=fa(e.readTime);return pi.newNoDocument(n,r)}(t,e):Tr()}(n.R,t);a.set(e.key.toString(),e)})),s=[],[2,(e.forEach((function(t){var e=a.get(t.toString());_r(!!e),s.push(e)})),s)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new ko(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return(0,dr.mG)(this,void 0,void 0,(function(){var t,e=this;return(0,dr.Jh)(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=$r.fromPath(n);e.mutations.push(new Ro(r,e.precondition(r)))})),[4,function(t,e){return(0,dr.mG)(this,void 0,void 0,(function(){var n,r,i;return(0,dr.Jh)(this,(function(o){switch(o.label){case 0:return n=Sr(t),r=ba(n.R)+"/documents",i={writes:e.map((function(t){return Ta(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Tr();e=Rr.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new vr(mr.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?vo.updateTime(e):vo.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Rr.min()))throw new vr(mr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return vo.updateTime(e)}return vo.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),eh=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new gc(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return(0,dr.mG)(t,void 0,void 0,(function(){var t,e,n=this;return(0,dr.Jh)(this,(function(r){return t=new th(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Jr(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Po(e)}return!1},t}(),nh=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Xu.UNAUTHENTICATED,this.clientId=xr.u(),this.credentialListener=function(){},this.receivedInitialUser=new us,this.credentials.setChangeListener((function(t){br("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()}))}return t.prototype.getConfiguration=function(){return(0,dr.mG)(this,void 0,void 0,(function(){return(0,dr.Jh)(this,(function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}}))}))},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then((function(){return e.credentialListener(e.user)}))},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new vr(mr.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new us;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return(0,dr.mG)(t,void 0,void 0,(function(){var t,n;return(0,dr.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Yc(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function rh(t,e){return(0,dr.mG)(this,void 0,void 0,(function(){var n,r,i=this;return(0,dr.Jh)(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),br("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable((function(){return(0,dr.mG)(i,void 0,void 0,(function(){return(0,dr.Jh)(this,(function(t){switch(t.label){case 0:return[4,Du(e.localStore,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function ih(t,e){return(0,dr.mG)(this,void 0,void 0,(function(){var n,r;return(0,dr.Jh)(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,oh(t)];case 1:return n=i.sent(),br("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(n){return t.asyncQueue.enqueueRetryable((function(){return function(t,e){return(0,dr.mG)(this,void 0,void 0,(function(){var n,r;return(0,dr.Jh)(this,(function(i){switch(i.label){case 0:return(n=Sr(t)).asyncQueue.verifyOperationInProgress(),br("RemoteStore","RemoteStore received new credentials"),r=Oc(n),n.$r.add(3),[4,Nc(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,Sc(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,n)}))})),t.onlineComponents=e,[2]}}))}))}function oh(t){return(0,dr.mG)(this,void 0,void 0,(function(){return(0,dr.Jh)(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(br("FirestoreClient","Using default OfflineComponentProvider"),[4,rh(t,new Jl)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function ah(t){return(0,dr.mG)(this,void 0,void 0,(function(){return(0,dr.Jh)(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(br("FirestoreClient","Using default OnlineComponentProvider"),[4,ih(t,new $l)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function sh(t){return oh(t).then((function(t){return t.persistence}))}function uh(t){return oh(t).then((function(t){return t.localStore}))}function ch(t){return ah(t).then((function(t){return t.remoteStore}))}function lh(t){return ah(t).then((function(t){return t.syncEngine}))}function hh(t){return(0,dr.mG)(this,void 0,void 0,(function(){var e,n;return(0,dr.Jh)(this,(function(r){switch(r.label){case 0:return[4,ah(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=gl.bind(null,e.syncEngine),n.onUnlisten=wl.bind(null,e.syncEngine),n)]}}))}))}function fh(t,e,n){var r=this;void 0===n&&(n={});var i=new us;return t.asyncQueue.enqueueAndForget((function(){return(0,dr.mG)(r,void 0,void 0,(function(){var r;return(0,dr.Jh)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Xl({next:function(o){e.enqueueAndForget((function(){return il(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new vr(mr.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new vr(mr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new ul(Fi(n.path),o,{includeMetadataChanges:!0,so:!0});return rl(t,a)},[4,hh(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function dh(t,e,n){var r=this;void 0===n&&(n={});var i=new us;return t.asyncQueue.enqueueAndForget((function(){return(0,dr.mG)(r,void 0,void 0,(function(){var r;return(0,dr.Jh)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Xl({next:function(n){e.enqueueAndForget((function(){return il(t,a)})),n.fromCache&&"server"===r.source?i.reject(new vr(mr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new ul(n,o,{includeMetadataChanges:!0,so:!0});return rl(t,a)},[4,hh(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var ph=function(t,e,n,r,i,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a},mh=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),vh=new Map,yh=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},gh=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(Xu.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),bh=function(){function t(t){var e=this;this.oc=null,this.currentUser=Xu.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){e.cc++,e.currentUser=e.uc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.cc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),t.get().then((function(t){e.auth=t,e.oc&&e.auth.addAuthTokenListener(e.oc)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(br("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(_r("string"==typeof n.accessToken),new yh(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},t.prototype.uc=function(){var t=this.auth&&this.auth.getUid();return _r(null===t||"string"==typeof t),new Xu(t)},t}(),wh=function(){function t(t,e){this.ac=t,this.hc=e,this.type="FirstParty",this.user=Xu.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.hc},e=this.ac.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Eh=function(){function t(t,e){this.ac=t,this.hc=e}return t.prototype.getToken=function(){return Promise.resolve(new wh(this.ac,this.hc))},t.prototype.setChangeListener=function(t){t(Xu.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Ih(t,e,n){if(!n)throw new vr(mr.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Th(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new vr(mr.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function _h(t,e,n,r){if(!0===e&&!0===r)throw new vr(mr.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Sh(t){if(!$r.isDocumentKey(t))throw new vr(mr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Nh(t){if($r.isDocumentKey(t))throw new vr(mr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function xh(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Tr()}function Ch(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new vr(mr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=xh(t);throw new vr(mr.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Dh(t,e){if(e<=0)throw new vr(mr.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Ah=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new vr(mr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new vr(mr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,_h("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),kh=function(){function t(t,e){this._persistenceKey="(lite)",this._settings=new Ah({}),this._settingsFrozen=!1,t instanceof mh?(this._databaseId=t,this._credentials=new gh):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new vr(mr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mh(t.options.projectId)}(t),this._credentials=new bh(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new vr(mr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new vr(mr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ah(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new gh;switch(t.type){case"gapi":var e=t.client;return _r(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Eh(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new vr(mr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return this,(t=vh.get(this))&&(br("ComponentProvider","Removing Datastore"),vh.delete(this),t.terminate()),Promise.resolve();var t},t}(),Rh=function(){function t(t,e,n){this._converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Ph(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Oh=function(){function t(t,e,n){this._converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Ph=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Fi(r))||this).firestore=e,i._path=r,i.type="collection",i}return(0,dr.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Rh(this.firestore,null,new $r(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Oh);function Lh(t,e){for(var n,r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];if(t=(0,i.m9)(t),Ih("collection","path",e),t instanceof kh)return Nh(n=Fr.fromString.apply(Fr,(0,dr.ev)([e],r))),new Ph(t,null,n);if(!(t instanceof Rh||t instanceof Ph))throw new vr(mr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Nh(n=Fr.fromString.apply(Fr,(0,dr.ev)([t.path],r)).child(Fr.fromString(e))),new Ph(t.firestore,null,n)}function Mh(t,e){for(var n,r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];if(t=(0,i.m9)(t),1===arguments.length&&(e=xr.u()),Ih("doc","path",e),t instanceof kh)return Sh(n=Fr.fromString.apply(Fr,(0,dr.ev)([e],r))),new Rh(t,null,new $r(n));if(!(t instanceof Rh||t instanceof Ph))throw new vr(mr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Sh(n=t._path.child(Fr.fromString.apply(Fr,(0,dr.ev)([e],r)))),new Rh(t.firestore,t instanceof Ph?t._converter:null,new $r(n))}function Fh(t,e){return t=(0,i.m9)(t),e=(0,i.m9)(e),(t instanceof Rh||t instanceof Ph)&&(e instanceof Rh||e instanceof Ph)&&t.firestore===e.firestore&&t.path===e.path&&t._converter===e._converter}function Vh(t,e){return t=(0,i.m9)(t),e=(0,i.m9)(e),t instanceof Oh&&e instanceof Oh&&t.firestore===e.firestore&&zi(t._query,e._query)&&t._converter===e._converter}var Uh=function(){function t(){var t=this;this.lc=Promise.resolve(),this.fc=[],this.dc=!1,this.wc=[],this._c=null,this.mc=!1,this.yc=[],this.Zi=new gc(this,"async_queue_retry"),this.gc=function(){var e=vc();e&&br("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=vc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.gc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.dc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ec(),this.Tc(t)},t.prototype.enterRestrictedMode=function(){if(!this.dc){this.dc=!0;var t=vc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.gc)}},t.prototype.enqueue=function(t){return this.Ec(),this.dc?new Promise((function(t){})):this.Tc(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.fc.push(t),e.Ic()}))},t.prototype.Ic=function(){return(0,dr.mG)(this,void 0,void 0,(function(){var t,e=this;return(0,dr.Jh)(this,(function(n){switch(n.label){case 0:if(0===this.fc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.fc[0]()];case 2:return n.sent(),this.fc.shift(),this.Zi.reset(),[3,4];case 3:if(!ps(t=n.sent()))throw t;return br("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.fc.length>0&&this.Zi.ji((function(){return e.Ic()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Tc=function(t){var e=this,n=this.lc.then((function(){return e.mc=!0,t().catch((function(t){throw e._c=t,e.mc=!1,wr("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.mc=!1,t}))}));return this.lc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ec(),this.yc.indexOf(t)>-1&&(e=0);var i=Qc.createAndSchedule(this,t,e,n,(function(t){return r.Ac(t)}));return this.wc.push(i),i},t.prototype.Ec=function(){this._c&&Tr()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Rc=function(){return(0,dr.mG)(this,void 0,void 0,(function(){var t;return(0,dr.Jh)(this,(function(e){switch(e.label){case 0:return[4,t=this.lc];case 1:e.sent(),e.label=2;case 2:if(t!==this.lc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.bc=function(t){for(var e=0,n=this.wc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.vc=function(t){var e=this;return this.Rc().then((function(){e.wc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.wc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Rc()}))},t.prototype.Pc=function(t){this.yc.push(t)},t.prototype.Ac=function(t){var e=this.wc.indexOf(t);this.wc.splice(e,1)},t}();function qh(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new us,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var Bh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._queue=new Uh,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return(0,dr.ZT)(e,t),e.prototype._terminate=function(){return this._firestoreClient||Zh(this),this._firestoreClient.terminate()},e}(kh);function jh(t){return t._firestoreClient||Zh(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Zh(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new ph(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new nh(t._credentials,t._queue,r)}function Gh(t,e,n){var r=this,i=new us;return t.asyncQueue.enqueue((function(){return(0,dr.mG)(r,void 0,void 0,(function(){var r;return(0,dr.Jh)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,rh(t,n)];case 1:return o.sent(),[4,ih(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===mr.FAILED_PRECONDITION||t.code===mr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function Kh(t){if(t._initialized||t._terminated)throw new vr(mr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var zh=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new vr(mr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ur(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Hh=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Br.fromBase64String(e))}catch(e){throw new vr(mr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Br.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Wh=function(t){this._methodName=t},Jh=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new vr(mr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new vr(mr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Cr(this._lat,t._lat)||Cr(this._long,t._long)},t}(),Qh=/^__.*__$/,Yh=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new So(t,this.data,this.fieldMask,e,this.fieldTransforms):new _o(t,this.data,e,this.fieldTransforms)},t}(),$h=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new So(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function Xh(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Tr()}}var tf=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Vc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Sc",{get:function(){return this.settings.Sc},enumerable:!1,configurable:!0}),t.prototype.Dc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Cc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Dc({path:n,Nc:!1});return r.xc(t),r},t.prototype.Fc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Dc({path:n,Nc:!1});return r.Vc(),r},t.prototype.kc=function(t){return this.Dc({path:void 0,Nc:!0})},t.prototype.Oc=function(t){return Ef(t,this.settings.methodName,this.settings.$c||!1,this.path,this.settings.Mc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Vc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.xc(this.path.get(t))},t.prototype.xc=function(t){if(0===t.length)throw this.Oc("Document fields must not be empty");if(Xh(this.Sc)&&Qh.test(t))throw this.Oc('Document fields cannot begin and end with "__"')},t}(),ef=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||yc(t)}return t.prototype.Lc=function(t,e,n,r){return void 0===r&&(r=!1),new tf({Sc:t,methodName:e,Mc:n,path:Ur.emptyPath(),Nc:!1,$c:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function nf(t){var e=t._freezeSettings(),n=yc(t._databaseId);return new ef(t._databaseId,!!e.ignoreUndefinedProperties,n)}function rf(t,e,n,r,i,o){void 0===o&&(o={});var a=t.Lc(o.merge||o.mergeFields?2:0,e,n,i);yf("Data must be an object, but it was:",a,r);var s,u,c=mf(r,a);if(o.merge)s=new qr(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=gf(e,f[h],n);if(!a.contains(d))throw new vr(mr.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");If(l,d)||l.push(d)}s=new qr(l),u=a.fieldTransforms.filter((function(t){return s.covers(t.field)}))}else s=null,u=a.fieldTransforms;return new Yh(new fi(c),s,u)}var of=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,dr.ZT)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Sc)throw 1===t.Sc?t.Oc(this._methodName+"() can only appear at the top level of your update data"):t.Oc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Wh);function af(t,e,n){return new tf({Sc:3,Mc:e.settings.Mc,methodName:t._methodName,Nc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var sf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,dr.ZT)(e,t),e.prototype._toFieldTransform=function(t){return new po(t.path,new oo)},e.prototype.isEqual=function(t){return t instanceof e},e}(Wh),uf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Bc=n,r}return(0,dr.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=af(this,t,!0),n=this.Bc.map((function(t){return pf(t,e)})),r=new ao(n);return new po(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Wh),cf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Bc=n,r}return(0,dr.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=af(this,t,!0),n=this.Bc.map((function(t){return pf(t,e)})),r=new uo(n);return new po(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Wh),lf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return(0,dr.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=new lo(t.R,to(t.R,this.qc));return new po(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Wh);function hf(t,e,n,r){var o=t.Lc(1,e,n);yf("Data must be an object, but it was:",o,r);var a=[],s=fi.empty();Pr(r,(function(t,r){var u=wf(e,t,n);r=(0,i.m9)(r);var c=o.Fc(u);if(r instanceof of)a.push(u);else{var l=pf(r,c);null!=l&&(a.push(u),s.set(u,l))}}));var u=new qr(a);return new $h(s,u,o.fieldTransforms)}function ff(t,e,n,r,o,a){var s=t.Lc(1,e,n),u=[gf(e,r,n)],c=[o];if(a.length%2!=0)throw new vr(mr.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var l=0;l<a.length;l+=2)u.push(gf(e,a[l])),c.push(a[l+1]);for(var h=[],f=fi.empty(),d=u.length-1;d>=0;--d)if(!If(h,u[d])){var p=u[d],m=c[d];m=(0,i.m9)(m);var v=s.Fc(p);if(m instanceof of)h.push(p);else{var y=pf(m,v);null!=y&&(h.push(p),f.set(p,y))}}var g=new qr(h);return new $h(f,g,s.fieldTransforms)}function df(t,e,n,r){return void 0===r&&(r=!1),pf(n,t.Lc(r?4:3,e))}function pf(t,e){if(vf(t=(0,i.m9)(t)))return yf("Unsupported field value:",e,t),mf(t,e);if(t instanceof Wh)return function(t,e){if(!Xh(e.Sc))throw e.Oc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Oc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Nc&&4!==e.Sc)throw e.Oc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=pf(o[i],e.kc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,i.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return to(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=kr.fromDate(t);return{timestampValue:ca(e.R,n)}}if(t instanceof kr)return n=new kr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:ca(e.R,n)};if(t instanceof Jh)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Hh)return{bytesValue:la(e.R,t._byteString)};if(t instanceof Rh){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Oc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:da(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Oc("Unsupported field value: "+xh(t))}(t,e)}function mf(t,e){var n={};return Lr(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pr(t,(function(t,r){var i=pf(r,e.Cc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function vf(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof kr||t instanceof Jh||t instanceof Hh||t instanceof Rh||t instanceof Wh)}function yf(t,e,n){if(!vf(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=xh(n);throw"an object"===r?e.Oc(t+" a custom object"):e.Oc(t+" "+r)}}function gf(t,e,n){if((e=(0,i.m9)(e))instanceof zh)return e._internalPath;if("string"==typeof e)return wf(t,e);throw Ef("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var bf=new RegExp("[~\\*/\\[\\]]");function wf(t,e,n){if(e.search(bf)>=0)throw Ef("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(zh.bind.apply(zh,(0,dr.ev)([void 0],e.split(".")))))._internalPath}catch(I){throw Ef("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Ef(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new vr(mr.INVALID_ARGUMENT,(s+=". ")+t+u)}function If(t,e){return t.some((function(t){return t.isEqual(e)}))}var Tf=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Rh(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new _f(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Sf("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),_f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,dr.ZT)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Tf);function Sf(t,e){return"string"==typeof e?wf(t,e):e instanceof zh?e._internalPath:e._delegate._internalPath}var Nf=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),xf=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,a)||this)._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return(0,dr.ZT)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Cf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Sf("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Tf),Cf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,dr.ZT)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(xf),Df=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Nf(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new Cf(n._firestore,n._userDataWriter,r.key,r,new Nf(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query._converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new vr(mr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){var r=new Cf(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Nf(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Cf(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Nf(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Af(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Af(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Tr()}}function kf(t,e){return t instanceof xf&&e instanceof xf?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Df&&e instanceof Df&&t._firestore===e._firestore&&Vh(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Rf(t){if(Ui(t)&&0===t.explicitOrderBy.length)throw new vr(mr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Of=function(){};function Pf(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Lf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Uc=e,i.Qc=n,i.Kc=r,i.type="where",i}return(0,dr.ZT)(e,t),e.prototype._apply=function(t){var e=nf(t.firestore),n=function(t,e,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new vr(mr.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){jf(a,o);for(var u=[],c=0,l=a;c<l.length;c++){var h=l[c];u.push(Bf(r,t,h))}s={arrayValue:{values:u}}}else s=Bf(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||jf(a,o),s=df(n,"where",a,"in"===o||"not-in"===o);var f=wi.create(i,o,s);return function(t,e){if(e.g()){var n=Bi(t);if(null!==n&&!n.isEqual(e.field))throw new vr(mr.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=qi(t);null!==r&&Zf(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new vr(mr.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new vr(mr.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,e,t.firestore._databaseId,this.Uc,this.Qc,this.Kc);return new Oh(t.firestore,t._converter,function(t,e){var n=t.filters.concat([e]);return new Li(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Of),Mf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Uc=e,r.jc=n,r.type="orderBy",r}return(0,dr.ZT)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new vr(mr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new vr(mr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new ki(e,n);return function(t,e){if(null===qi(t)){var n=Bi(t);null!==n&&Zf(t,n,e.field)}}(t,r),r}(t._query,this.Uc,this.jc);return new Oh(t.firestore,t._converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Li(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Of),Ff=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Wc=n,i.Gc=r,i}return(0,dr.ZT)(e,t),e.prototype._apply=function(t){return new Oh(t.firestore,t._converter,Ki(t._query,this.Wc,this.Gc))},e}(Of),Vf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.zc=n,i.Hc=r,i}return(0,dr.ZT)(e,t),e.prototype._apply=function(t){var e=qf(t,this.type,this.zc,this.Hc);return new Oh(t.firestore,t._converter,function(t,e){return new Li(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Of),Uf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.zc=n,i.Hc=r,i}return(0,dr.ZT)(e,t),e.prototype._apply=function(t){var e=qf(t,this.type,this.zc,this.Hc);return new Oh(t.firestore,t._converter,function(t,e){return new Li(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Of);function qf(t,e,n,r){if(n[0]=(0,i.m9)(n[0]),n[0]instanceof Tf)return function(t,e,n,r,i){if(!r)throw new vr(mr.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=Zi(t);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(ai(e,r.key));else{var c=r.data.field(u.field);if(zr(c))throw new vr(mr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new vr(mr.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Di(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var o=nf(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new vr(mr.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new vr(mr.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!ji(t)&&-1!==c.indexOf("/"))throw new vr(mr.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Fr.fromString(c));if(!$r.isDocumentKey(l))throw new vr(mr.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new $r(l);s.push(ai(e,h))}else{var f=df(n,r,c);s.push(f)}}return new Di(s,o)}(t._query,t.firestore._databaseId,o,e,n,r)}function Bf(t,e,n){if("string"==typeof(n=(0,i.m9)(n))){if(""===n)throw new vr(mr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!ji(e)&&-1!==n.indexOf("/"))throw new vr(mr.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Fr.fromString(n));if(!$r.isDocumentKey(r))throw new vr(mr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return ai(t,new $r(r))}if(n instanceof Rh)return ai(t,n._key);throw new vr(mr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+xh(n)+".")}function jf(t,e){if(!Array.isArray(t)||0===t.length)throw new vr(mr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new vr(mr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Zf(t,e,n){if(!n.isEqual(e))throw new vr(mr.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var Gf=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Xr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Gr(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Kr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Tr()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Pr(t.fields||{},(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new Jh(Gr(t.latitude),Gr(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Hr(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Wr(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=Zr(t);return new kr(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Fr.fromString(t);_r(Va(n));var r=new mh(n.get(1),n.get(3)),i=new $r(n.popFirst(5));return r.isEqual(e)||wr("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function Kf(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var zf=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,dr.ZT)(e,t),e.prototype.convertBytes=function(t){return new Hh(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Rh(this.firestore,null,e)},e}(Gf),Hf=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=nf(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Wf(t,this._firestore),i=Kf(r._converter,e,n),o=rf(this._dataReader,"WriteBatch.set",r._key,i,null!==r._converter,n);return this._mutations.push(o.toMutation(r._key,vo.none())),this},t.prototype.update=function(t,e,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];this._verifyNotCommitted();var a,s=Wf(t,this._firestore);return a="string"==typeof(e=(0,i.m9)(e))||e instanceof zh?ff(this._dataReader,"WriteBatch.update",s._key,e,n,r):hf(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(a.toMutation(s._key,vo.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Wf(t,this._firestore);return this._mutations=this._mutations.concat(new ko(e._key,vo.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new vr(mr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Wf(t,e){if((t=(0,i.m9)(t)).firestore!==e)throw new vr(mr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Jf=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,dr.ZT)(e,t),e.prototype.convertBytes=function(t){return new Hh(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Rh(this.firestore,null,e)},e}(Gf);function Qf(t,e,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];t=Ch(t,Rh);var a=Ch(t.firestore,Bh),s=nf(a);return $f(a,[("string"==typeof(e=(0,i.m9)(e))||e instanceof zh?ff(s,"updateDoc",t._key,e,n,r):hf(s,"updateDoc",t._key,e)).toMutation(t._key,vo.exists(!0))])}function Yf(t){for(var e,n,r,o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];t=(0,i.m9)(t);var s={includeMetadataChanges:!1},u=0;"object"!=typeof o[u]||qh(o[u])||(s=o[u],u++);var c,l,h,f={includeMetadataChanges:s.includeMetadataChanges};if(qh(o[u])){var d=o[u];o[u]=null===(e=d.next)||void 0===e?void 0:e.bind(d),o[u+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),o[u+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof Rh)l=Ch(t.firestore,Bh),h=Fi(t._key.path),c={next:function(e){o[u]&&o[u](Xf(l,t,e))},error:o[u+1],complete:o[u+2]};else{var p=Ch(t,Oh);l=Ch(p.firestore,Bh),h=p._query;var m=new Jf(l);c={next:function(t){o[u]&&o[u](new Df(l,m,p,t))},error:o[u+1],complete:o[u+2]},Rf(t._query)}return function(t,e,n,r){var i=this,o=new Xl(r),a=new ul(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return(0,dr.mG)(i,void 0,void 0,(function(){var e;return(0,dr.Jh)(this,(function(n){switch(n.label){case 0:return e=rl,[4,hh(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return(0,dr.mG)(i,void 0,void 0,(function(){var e;return(0,dr.Jh)(this,(function(n){switch(n.label){case 0:return e=il,[4,hh(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))}))}}(jh(l),h,f,c)}function $f(t,e){return function(t,e){var n=this,r=new us;return t.asyncQueue.enqueueAndForget((function(){return(0,dr.mG)(n,void 0,void 0,(function(){var n;return(0,dr.Jh)(this,(function(i){switch(i.label){case 0:return n=El,[4,lh(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(jh(t),e)}function Xf(t,e,n){var r=n.docs.get(e._key),i=new Jf(t);return new xf(t,i,e._key,r,new Nf(n.hasPendingWrites,n.fromCache),e._converter)}var td=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return(0,dr.ZT)(e,t),e.prototype.get=function(e){var n=this,r=Wf(e,this._firestore),i=new Jf(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new xf(n._firestore,i,r._key,t._document,new Nf(!1,!1),r._converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=nf(t)}return t.prototype.get=function(t){var e=this,n=Wf(t,this._firestore),r=new zf(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return Tr();var i=t[0];if(i.isFoundDocument())return new Tf(e._firestore,r,i.key,i,n._converter);if(i.isNoDocument())return new Tf(e._firestore,r,n._key,null,n._converter);throw Tr()}))},t.prototype.set=function(t,e,n){var r=Wf(t,this._firestore),i=Kf(r._converter,e,n),o=rf(this._dataReader,"Transaction.set",r._key,i,null!==r._converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];var a,s=Wf(t,this._firestore);return a="string"==typeof(e=(0,i.m9)(e))||e instanceof zh?ff(this._dataReader,"Transaction.update",s._key,e,n,r):hf(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,a),this},t.prototype.delete=function(t){var e=Wf(t,this._firestore);return this._transaction.delete(e._key),this},t}());function ed(){if("undefined"==typeof Uint8Array)throw new vr(mr.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function nd(){if("undefined"==typeof atob)throw new vr(mr.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var rd=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return nd(),new t(Hh.fromBase64String(e))},t.fromUint8Array=function(e){return ed(),new t(Hh.fromUint8Array(e))},t.prototype.toBase64=function(){return nd(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return ed(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),id=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Kh(t=Ch(t,Bh));var n=jh(t),r=t._freezeSettings(),i=new $l;return Gh(n,i,new Ql(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Kh(t=Ch(t,Bh));var e=jh(t),n=t._freezeSettings(),r=new $l;return Gh(e,r,new Yl(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new vr(mr.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new us;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return(0,dr.mG)(e,void 0,void 0,(function(){var e;return(0,dr.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return(0,dr.mG)(this,void 0,void 0,(function(){var e;return(0,dr.Jh)(this,(function(n){switch(n.label){case 0:return hs.yt()?(e=t+"main",[4,hs.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Iu(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),od=function(){function t(t,e,n){var r=this;this._delegate=e,this.Jc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof mh||(this.Yc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=Ch(t,kh))._getSettings();"firestore.googleapis.com"!==r.host&&r.host!==e&&Er("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._delegate,t,e)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return(0,dr.mG)(e,void 0,void 0,(function(){var e,n;return(0,dr.Jh)(this,(function(r){switch(r.label){case 0:return[4,sh(t)];case 1:return e=r.sent(),[4,ch(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Sr(t);return e.$r.delete(0),Sc(e)}(n))]}}))}))}))}(jh(Ch(this._delegate,Bh)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return(0,dr.mG)(e,void 0,void 0,(function(){var e,n;return(0,dr.Jh)(this,(function(r){switch(r.label){case 0:return[4,sh(t)];case 1:return e=r.sent(),[4,ch(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return(0,dr.mG)(this,void 0,void 0,(function(){var e;return(0,dr.Jh)(this,(function(n){switch(n.label){case 0:return(e=Sr(t)).$r.add(0),[4,Nc(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(jh(Ch(this._delegate,Bh)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&_h("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Jc.enableMultiTabIndexedDbPersistence(this):this.Jc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Jc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Yc&&(this.Yc._removeServiceInstance("firestore"),this.Yc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new us;return t.asyncQueue.enqueueAndForget((function(){return(0,dr.mG)(e,void 0,void 0,(function(){var e;return(0,dr.Jh)(this,(function(r){switch(r.label){case 0:return e=xl,[4,lh(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(jh(Ch(this._delegate,Bh)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Xl(e);return t.asyncQueue.enqueueAndForget((function(){return(0,dr.mG)(n,void 0,void 0,(function(){var e;return(0,dr.Jh)(this,(function(n){switch(n.label){case 0:return e=function(t,e){Sr(t).Gr.add(e),e.next()},[4,hh(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return(0,dr.mG)(n,void 0,void 0,(function(){var e;return(0,dr.Jh)(this,(function(n){switch(n.label){case 0:return e=function(t,e){Sr(t).Gr.delete(e)},[4,hh(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(jh(t=Ch(t,Bh)),qh(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Yc)throw new vr(mr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Yc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new bd(this,Lh(this._delegate,t))}catch(t){throw hd(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new ld(this,Mh(this._delegate,t))}catch(t){throw hd(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new vd(this,function(t,e){if(t=Ch(t,kh),Ih("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new vr(mr.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Oh(t,null,function(t){return new Li(Fr.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw hd(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new us;return t.asyncQueue.enqueueAndForget((function(){return(0,dr.mG)(n,void 0,void 0,(function(){var n;return(0,dr.Jh)(this,(function(i){switch(i.label){case 0:return[4,function(t){return ah(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new eh(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(jh(t),(function(n){return e(new td(t,n))}))}(this._delegate,(function(n){return t(new sd(e,n))}))},t.prototype.batch=function(){var t=this;return jh(this._delegate),new ud(new Hf(this._delegate,(function(e){return $f(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new vr(mr.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new vr(mr.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),ad=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,dr.ZT)(e,t),e.prototype.convertBytes=function(t){return new rd(new Hh(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return ld.Xc(e,this.firestore,null)},e}(Gf);var sd=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new ad(t)}return t.prototype.get=function(t){var e=this,n=wd(t);return this._delegate.get(n).then((function(t){return new pd(e._firestore,new xf(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n._converter))}))},t.prototype.set=function(t,e,n){var r=wd(t);return n?(Th("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=wd(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,(0,dr.ev)([a,e,n],i)),this},t.prototype.delete=function(t){var e=wd(t);return this._delegate.delete(e),this},t}(),ud=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=wd(t);return n?(Th("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=wd(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,(0,dr.ev)([a,e,n],i)),this},t.prototype.delete=function(t){var e=wd(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),cd=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Cf(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new md(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.Zc=function(e,n){var r=t.tu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new ad(e),n),i.set(n,o)),o},t}();cd.tu=new WeakMap;var ld=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new ad(t)}return t.eu=function(e,n,r){if(e.length%2!=0)throw new vr(mr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Rh(n._delegate,r,new $r(e)))},t.Xc=function(e,n,r){return new t(n,new Rh(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new bd(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new bd(this.firestore,Lh(this._delegate,t))}catch(t){throw hd(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=(0,i.m9)(t))instanceof Rh&&Fh(this._delegate,t)},t.prototype.set=function(t,e){e=Th("DocumentReference.set",e);try{return function(t,e,n){t=Ch(t,Rh);var r=Ch(t.firestore,Bh),i=Kf(t._converter,e,n);return $f(r,[rf(nf(r),"setDoc",t._key,i,null!==t._converter,n).toMutation(t._key,vo.none())])}(this._delegate,t,e)}catch(t){throw hd(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Qf(this._delegate,t):Qf.apply(void 0,(0,dr.ev)([this._delegate,t,e],n))}catch(t){throw hd(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return $f(Ch((t=this._delegate).firestore,Bh),[new ko(t._key,vo.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=fd(e),i=dd(e,(function(e){return new pd(t.firestore,new xf(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate._converter))}));return Yf(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Ch(t,Rh);var e=Ch(t.firestore,Bh),n=jh(e),r=new Jf(e);return function(t,e){var n=this,r=new us;return t.asyncQueue.enqueueAndForget((function(){return(0,dr.mG)(n,void 0,void 0,(function(){var n;return(0,dr.Jh)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,dr.mG)(this,void 0,void 0,(function(){var r,i;return(0,dr.Jh)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Sr(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new vr(mr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Yc(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,uh(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new xf(e,r,t._key,n,new Nf(null!==n&&n.hasLocalMutations,!0),t._converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Ch(t,Rh);var e=Ch(t.firestore,Bh);return fh(jh(e),t._key,{source:"server"}).then((function(n){return Xf(e,t,n)}))}(this._delegate):function(t){t=Ch(t,Rh);var e=Ch(t.firestore,Bh);return fh(jh(e),t._key).then((function(n){return Xf(e,t,n)}))}(this._delegate)).then((function(t){return new pd(e.firestore,new xf(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(cd.Zc(this.firestore,e)):this._delegate.withConverter(null))},t}();function hd(t,e,n){return t.message=t.message.replace(e,n),t}function fd(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!qh(r))return r}return{}}function dd(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=qh(t[0])?t[0]:qh(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var pd=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new ld(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return kf(this._delegate,t._delegate)},t}(),md=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,dr.ZT)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(pd),vd=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new ad(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Pf(this._delegate,function(t,e,n){var r=e,i=Sf("where",t);return new Lf(i,r,n)}(e,n,r)))}catch(e){throw hd(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Pf(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Sf("orderBy",t);return new Mf(r,n)}(e,n)))}catch(e){throw hd(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Pf(this._delegate,function(t){return Dh("limit",t),new Ff("limit",t,"F")}(e)))}catch(e){throw hd(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Pf(this._delegate,function(t){return Dh("limitToLast",t),new Ff("limitToLast",t,"L")}(e)))}catch(e){throw hd(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Pf(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Vf("startAt",t,!0)}.apply(void 0,e)))}catch(e){throw hd(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Pf(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Vf("startAfter",t,!1)}.apply(void 0,e)))}catch(e){throw hd(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Pf(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Uf("endBefore",t,!0)}.apply(void 0,e)))}catch(e){throw hd(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Pf(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Uf("endAt",t,!1)}.apply(void 0,e)))}catch(e){throw hd(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Vh(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Ch(t,Oh);var e=Ch(t.firestore,Bh),n=jh(e),r=new Jf(e);return function(t,e){var n=this,r=new us;return t.asyncQueue.enqueueAndForget((function(){return(0,dr.mG)(n,void 0,void 0,(function(){var n;return(0,dr.Jh)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,dr.mG)(this,void 0,void 0,(function(){var r,i,o,a,s;return(0,dr.Jh)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Fu(t,e,!0)];case 1:return s=u.sent(),r=new pl(e,s.Bn),i=r._o(s.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return a=u.sent(),s=Yc(a,"Failed to execute query '"+e+" against cache"),n.reject(s),[3,3];case 3:return[2]}}))}))},[4,uh(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new Df(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Ch(t,Oh);var e=Ch(t.firestore,Bh),n=jh(e),r=new Jf(e);return dh(n,t._query,{source:"server"}).then((function(n){return new Df(e,r,t,n)}))}(this._delegate):function(t){t=Ch(t,Oh);var e=Ch(t.firestore,Bh),n=jh(e),r=new Jf(e);return Rf(t._query),dh(n,t._query).then((function(n){return new Df(e,r,t,n)}))}(this._delegate)).then((function(t){return new gd(e.firestore,new Df(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=fd(e),i=dd(e,(function(e){return new gd(t.firestore,new Df(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return Yf(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(cd.Zc(this.firestore,e)):this._delegate.withConverter(null))},t}(),yd=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new md(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),gd=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new vd(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new md(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new yd(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new md(n._firestore,r))}))},t.prototype.isEqual=function(t){return kf(this._delegate,t._delegate)},t}(),bd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return(0,dr.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new ld(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new ld(this.firestore,void 0===t?Mh(this._delegate):Mh(this._delegate,t))}catch(t){throw hd(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Ch(t.firestore,Bh),r=Mh(t),i=Kf(t._converter,e);return $f(n,[rf(nf(t.firestore),"addDoc",r._key,i,null!==t._converter,{}).toMutation(r._key,vo.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new ld(e.firestore,t)}))},e.prototype.isEqual=function(t){return Fh(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(cd.Zc(this.firestore,t)):this._delegate.withConverter(null))},e}(vd);function wd(t){return Ch(t,Rh)}var Ed=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(zh.bind.apply(zh,(0,dr.ev)([void 0],t)))}return t.documentId=function(){return new t(Ur.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=(0,i.m9)(t))instanceof zh&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Id=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new sf("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new of("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new uf("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new cf("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new lf("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}();var Td,_d=n(826),Sd={Firestore:od,GeoPoint:Jh,Timestamp:kr,Blob:rd,Transaction:sd,WriteBatch:ud,DocumentReference:ld,DocumentSnapshot:pd,Query:vd,QueryDocumentSnapshot:md,QuerySnapshot:gd,CollectionReference:bd,FieldPath:Ed,FieldValue:Id,setLogLevel:function(t){var e;e=t,yr.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new _d.wA("firestore",(function(t){return function(t,e){return new od(t,new Bh(t,e),new id)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Sd)))})(Td=r.Z),Td.registerVersion("@firebase/firestore","2.2.2")},71:function(t,e,n){n.d(e,{Jvf:function(){return i}});var r=n(9983);function i(t){return(0,r.w_)({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeMiterlimit:"10",strokeWidth:"32",d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192 192-86 192-192z"}},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M320 320L192 192m0 128l128-128"}}]})(t)}},9388:function(t,e,n){n.d(e,{ZT:function(){return i},pi:function(){return o},mG:function(){return a},Jh:function(){return s},XA:function(){return u},CR:function(){return c},ev:function(){return l}});var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};function a(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function s(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create;function u(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function l(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create}}]);
//# sourceMappingURL=969.8ad48d2e.chunk.js.map